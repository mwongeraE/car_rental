<!--content-->
<!--navigator-->
<div class="templatemo-flex-row">
  <div class="templatemo-sidebar">
    <header class="templatemo-site-header">
      <h1><i class="fa fa-wrench" style="font-size:24px;color:white"></i><u id="text_name">&nbsp;Admin&nbsp;panel</u>&nbsp;2.0</h1><!--glyphicon glyphicon-wrench-->
    </header>
    <!--menu-->
    <div class="mobile-menu-icon">
      <i class="fa fa-reorder"></i>
    </div>
    <nav class="templatemo-left-nav">
      <!--Search box-->
      <form class="templatemo-search-form" role="search" onsubmit="return false;">
        <div class="input-group">
          <button class="fa fa-search" onclick="apSearch();"></button>
          <input type="text" class="form-control" placeholder="Search" id="search">
        </div>
      </form>
      <ul>
        <li><a id="menu_users_and_features" href="#users_and_features" data-toggle="collapse"><i class="fa fa-users fa-fw"></i>Users And Features</a>
          <div id="users_and_features" class="collapse">
            <a id="a_audit" href="javascript:apGetAudit();">audit</a>
            <a id="a_settings" href="javascript:apGetSettings();">settings</a>
            <a id="a_project" href="javascript:apGetProject();">project</a>
            <a id="a_user" href="javascript:apGetUser();">user</a>
            <a id="a_transport" href="javascript:apGetTransport();">transport</a>
            <a id="a_transport_type_part" href="javascript:apGetTransportTypePart();">transport_type_part</a>
            <a id="a_sensor" href="javascript:apGetSensor();">sensor</a>
            <a id="a_discount" href="javascript:apGetDiscount();">discount</a>
            <a id="a_tax" href="javascript:apGetTax();">tax</a>
            <a id="a_message" href="javascript:apGetMessage();">message</a>
            <a id="a_user_review" href="javascript:apGetUserReview();">user_review</a>
            <a id="a_product_review" href="javascript:apGetProductReview();">product_review</a>
            <a id="a_transport_review" href="javascript:apGetTransportReview();">transport_review</a>
            <a id="a_track" href="javascript:apGetTrack();">track</a>
            <a id="a_track_part" href="javascript:apGetTrackPart();">track_part</a>
            <a id="a_sensor_circle" href="javascript:apGetSensorCircle();">sensor_circle</a>
            <a id="a_sensor_group" href="javascript:apGetSensorGroup();">sensor_group</a>
            <a id="a_sensor_place" href="javascript:apGetSensorPlace();">sensor_place</a>
          </div>
        </li>
        <li><a id="menu_types_and_attr" href="#types_and_attr" data-toggle="collapse"><i class="fa fa-barcode fa-fw"></i>Types And Attr</a>
          <div id="types_and_attr" class="collapse">
            <a id="a_attr" href="javascript:apGetAttr();">attribute</a>
            <a id="a_attr_part" href="javascript:apGetAttrPart();">attribute parts</a>
            <a id="a_color" href="javascript:apGetColor();">color</a>
            <a id="a_currency" href="javascript:apGetCurrency();">currency</a>
            <a id="a_language" href="javascript:apGetLanguage();">language</a>
            <a id="a_delivery_type" href="javascript:apGetDeliveryType();">delivery_type</a>
            <a id="a_track_type" href="javascript:apGetTrackType();">track_type</a>
            <a id="a_order_status" href="javascript:apGetOrderStatus();">order_status</a>
            <a id="a_pickup_status" href="javascript:apGetPickupStatus();">pickup_status</a>
            <a id="a_product_param" href="javascript:apGetProductParam();">product_param</a>
            <a id="a_product_type" href="javascript:apGetProductType();">product_type</a>
            <a id="a_transport_type" href="javascript:apGetTransportType();">transport_type</a>
          </div>
        </li>
        <li><a id="menu_trade_and_services" href="#trade_and_services" data-toggle="collapse"><i class="fa fa-cart-plus fa-fw"></i>Trade and Services</a>
          <div id="trade_and_services" class="collapse">
            <a id="a_stock" href="javascript:apGetStock();">stock</a>
            <a id="a_stock_invoice" href="javascript:apGetStockInvoice();">stock_invoice</a>
            <a id="a_stock_invoice_part" href="javascript:apGetStockInvoicePart();">stock_invoice_part</a>
            <a id="a_store" href="javascript:apGetStore();">store</a>
            <a id="a_store_part" href="javascript:apGetStorePart();">store_part</a>
            <a id="a_job" href="javascript:apGetOrderJob();">job</a>
            <a id="a_order" href="javascript:apGetOrderAB();">order</a>
            <!--a id="a_order_part" href="javascript:apGetOrderABPart();">order_part</a--><!--old style-->
            <a id="a_order_product_part" href="javascript:apGetOrderABProductPart();">order_product_part</a>
            <a id="a_order_user_part" href="javascript:apGetOrderABUserPart();">order_user_part</a>
            <a id="a_manufacture" href="javascript:apGetManufacture();">manufacture</a>
            <a id="a_product" href="javascript:apGetProduct();">product</a>
            <a id="a_product_param_part" href="javascript:apGetProductParamPart();">product_param_part</a>
            <a id="a_product_type_part" href="javascript:apGetProductTypePart();">product_type_part</a>
            <a id="a_purchase" href="javascript:apGetPurchase();">purchase</a>
            <a id="a_payment" href="javascript:apGetPayment();">payment</a>
            <a id="a_prepaid_card" href="javascript:apGetPrepaidCard();">prepaid_card</a>
          </div></li>
      </ul>
     </nav>
  </div>

  <div class="col-sm-12 container">
  <div class="row">
  <!--ERROR-->
  <div id="div_error">
    <div class="col-sm-4 container">
      <div id="div_need_to_register">
        <center>
          <img id="img_need_to_register" src="" class="img-responsive" alt="NEED_TO_REGISTER">
          <h1 id="text_need_to_register">Need to register</h1>
        </center>
      </div>
      <div id="div_user_deactivated">
        <center>
          <img id="img_user_deactivated" src="" class="img-responsive" alt="USER_DEACTIVATED">
          <h1 id="text_user_deactivated">User deactivated</h1>
        </center>
      </div>
      <div id="div_insufficient_privileges">
        <center>
          <img id="img_insufficient_privileges" src="" class="img-responsive" alt="INSUFFICIENT_PRIVILEGES">
          <h1 id="text_insufficient_privileges">Insufficient privileges</h1>
        </center>
      </div>
      <br>
      <div id="div_message"></div>
      <div id="div_object_name"></div>
      <div id="div_error_message">
        <center>
          <img id="img_error" src="" class="img-responsive" alt="ERROR">
          <h4 id="text_error_message" style="color:red"></h4>
        </center></div>
      <div id="div_loading"><center><i class="fa fa-circle-o-notch fa-spin" style="font-size:48px;color:buttonface;"></i></center></div>
    </div>
  </div>
  <!--SEARCH-->
  <div id="div_form_search">
    <div class="col-sm-6 container">
      <div class="templatemo-content-container">
        <div class="templatemo-content-widget no-padding">
          <div class="panel panel-default table-responsive">
            <div id="div_form_search_fields"></div>
            <div id="div_form_search_button"></div>
          </div>
        </div>
      </div>
     </div>
  </div>
  </div>
  <!--DATA-->
  <div id="div_table">
    <div class="templatemo-content-container">
      <div class="templatemo-content-widget no-padding">
        <div class="panel panel-default table-responsive">
          <table class="table table-hover table-bordered templatemo-user-table" id="table">
            <thead id="table_head"></thead>
            <tbody id="table_body"></tbody>
          </table>
          <input type="file" id="input_picture_file" accept="image/*">
          <div id="div_buttons">
            <hr>
            &nbsp;
            <button type="button" id="button_add" title="Add" onclick="apAddObject();" class="btn btn-primary btn-lg">
              <span class="glyphicon glyphicon-plus" style="font-size:24px;color:white"></span>
            </button>
            <hr>
          </div>
          <!--PAGES-->
          <div id="div_pages">
            &nbsp;
            <ul id="pages" class="pagination">
              <li><a href="javascript:gotoPage(-1);" aria-label="Prev">&lt;</a></li>
              <li class="active"><a href="javascript:gotoPage(0);">1</a></li>
              <li><a href="javascript:gotoPage(1);">2</a></li>
              <li><a href="javascript:gotoPage(2);">3</a></li>
              <li><a href="javascript:gotoPage(3);">4</a></li>
              <li><a href="javascript:gotoPage(4);">5</a></li>
              <li><a href="javascript:gotoPage(-2);" aria-label="Next">&gt;</a></li>
            </ul>
          </div></div>
      </div>
      <!--end of-->
    </div>
  </div><!--end row-->
  </div>

</div>

<!--END_OF_INNOCENCE-->

  <script type="text/javascript" src="js/templatemo-script.js"></script>

  <!--js-->
  <script type="text/javascript">
    $("#div_loading").hide();
    $("#div_need_to_register").hide();
    $("#div_user_deactivated").hide();
    $("#div_insufficient_privileges").hide();
    $("#img_error").hide();
    $("#input_picture_file").hide();
    $("#div_buttons").hide();
    $("#div_pages").hide();

    if(fa.getApiKey()!==null&&fa.getApiKey().length>0)$("#a_project").hide();
    if(fa.username===DEFAULT_USERNAME){
      $("#a_audit").hide();
      $("#a_settings").hide();
      $("#a_project").hide();
    }

    $("#img_need_to_register").attr("src",picture_cancel);
    $("#img_user_deactivated").attr("src",picture_cancel);
    $("#img_insufficient_privileges").attr("src",picture_cancel);
    $("#img_error").attr("src",picture_cancel);

    var add_icon='<span class="glyphicon glyphicon-plus" style="font-size:24px;color:white"></span>';
    var download_icon='<span class="glyphicon glyphicon-download" style="font-size:24px;color:white"></span>';
    var upload_icon='<span class="glyphicon glyphicon-upload" style="font-size:24px;color:white"></span>';
    var update_icon='<span class="glyphicon glyphicon-refresh" style="font-size:24px;color:white"></span>';
    var remove_icon='<span class="glyphicon glyphicon-remove" style="font-size:24px;color:white"></span>';

    var id_reserved_value=100000000;/*one hundred millions*/
    var temp_value=-10000000,temp_id=temp_value-1;
    var rows_count=10,curr_object_name=null,curr_object_list=null;

    /*picture function for get,update*/
    var curr_picture_function=null,curr_picture_id=null;

    /*search string for name field*/
    var search=null;
    /*list of searching names*/
    var search_id=null,search_date=null,search_name1=null,search_name2=null,search_name3=null,search_name4=null,search_bool=null;

    found_rows=null;
    PAGE_SET=0;PAGE_CURR=0;PAGE_COUNT=0;

    fa.setSaveFoundRows(true);

    $("#div_form_search").hide();

    if(parseInt(user_type)!==USER_TYPE_ADMIN||typeof user_type==='undefined')$("#div_insufficient_privileges").show();
    $("#div_message").html('<img src="'+picture_marker_A+'" class="img-responsive">&nbsp;<h2>'+getMessage(fa.language,9001))+"</h2>";

    fa.ret_val_list.length=0;
    /*main*/
    function getData(ptr){/*ptr not used here*/
      if(fa.ret_val_list.length>0){/*update data failed*/
        var ret_val=fa.ret_val_list[fa.ret_val_list.length-1];
        if(ret_val.status==="ERROR")return;
      }
      if(curr_object_name!==null){
        eval("apGet"+curr_object_name+"()");
      }
    }
    function apAddObject(){
      if(curr_object_name!==null){
        eval("apAdd"+curr_object_name+"()");
      }
    }
    function apFindObjectById(list_name,object_id){
      var ret_val=null;
      var j,list=eval(list_name);
      for(j=0;j<list.length;j++){
        if(parseInt(list[j].id)===parseInt(object_id)){
          ret_val=list[j];break;
        }
      }
      return ret_val;
    }
    function apFindObjectByValue(list_name,param,value){
      var ret_val=null;
      var j,list=eval(list_name);
      for(j=0;j<list.length;j++){
        if(eval('list[j].'+param)===value){
          ret_val=list[j];break;
        }
      }
      return ret_val;
    }
    function apFindObjectBy2Value(list_name,param1,param2,value1,value2){
      var ret_val=null;
      var j,list=eval(list_name);
      for(j=0;j<list.length;j++){
        if(eval('list[j].'+param1)===value1&&eval('list[j].'+param2)===value2){
          ret_val=list[j];break;
        }
      }
      return ret_val;
    }
    function apFindObjectBy2Id(list_name,param1,param2,id1,id2){
      var ret_val=null;
      var j,list=eval(list_name);
      for(j=0;j<list.length;j++){
        if(eval('parseInt(list[j].'+param1+')')===parseInt(id1)&&eval('parseInt(list[j].'+param2+')')===parseInt(id2)){
          ret_val=list[j];break;
        }
      }
      return ret_val;
    }
    /*update*/
    function apUpdateInput(object_id,input){
      var obj=apFindObjectById(curr_object_list,object_id);
      if(obj){
        eval('obj.'+input.name+'="'+input.value.replace(/"/g,'\\"').replace(/'/g,"\\'")+'"');
      }
    }
    function apUpdateInputByValue(object_param,object_value,input){
      var obj=apFindObjectByValue(curr_object_list,object_param,object_value);
      if(obj){
        eval('obj.'+input.name+'="'+input.value.replace(/"/g,'\\"').replace(/'/g,"\\'")+'"');
      }
    }
    function apUpdateSelect(object_id,select){
      var obj=apFindObjectById(curr_object_list,object_id);
      if(obj){
        var value=$(select).val();
        eval('obj.'+select.name+'="'+value+'"');
      }
    }
    function apUpdateCheckbox(object_id,input){
      var obj=apFindObjectById(curr_object_list,object_id);
      if(obj){
        var value=input.checked?1:0;
        eval('obj.'+input.name+'="'+value+'"');
      }
    }
    function apUpdateCheckboxByValue(object_param,object_value,input){
      var obj=apFindObjectByValue(curr_object_list,object_param,object_value);
      if(obj){
        var value=input.checked?1:0;
        eval('obj.'+input.name+'="'+value+'"');
      }
    }
    function apUpdateDate(object_id,input){
      var obj=apFindObjectById(curr_object_list,object_id);
      if(obj){
        var value=input.value;
        var date="";
        if(value.length>0){
          var count=value.split(":").length;
          if(count===1)value=value+" 00:00:00";
          else if(count===2)value=value+":00";
          date=toMySQLDatetimeString(value);
        }
        eval('obj.'+input.name+'="'+date+'"');
      }
    }
    function apUpdateObject(object_id,callback,prepare){
      var obj=apFindObjectById(curr_object_list,object_id);
      if(obj){
        if(parseInt(obj.id)<temp_value){
          /*obj.id=null;no send*/
          if(prepare)prepare(obj);
          eval("fa.add"+curr_object_name+"(obj,'#text_error_message',"+callback+",obj)");
        }
        else{
          if(prepare)prepare(obj);
          eval("fa.update"+curr_object_name+"(obj,'#text_error_message',"+callback+",obj)");
        }
      }
    }
    function apChecked(value){
      if(value===1||value>0)return "checked";
      else return "";
    }
    function apSearch(){
      /*clear pages for search*/
      PAGE_SET=0;PAGE_CURR=0;PAGE_COUNT=5;/*five pages in*/
      PAGE_ROWS=rows_count;
      fa.offset=PAGE_SET*PAGE_COUNT*PAGE_ROWS+PAGE_CURR*PAGE_ROWS;fa.rows=PAGE_ROWS;
      search=$("#search").val();
      /*search_id=$("#search_id").val();
      search_date=$("#search_date").val();
      search_name1=$("#search_name1").val();*/
      getData();
    }
    function apClearSearch(){
      search=null;
      $("#search").val("");
      search_id=null;search_data=null;search_name1=null;search_name2=null;search_name3=null;search_name4=null;search_bool=null;
    }
    function apSearchForm(search_id_fname,search_date_fname,search_name1_fname,search_name2_fname,search_name3_fname,search_name4_fname,search_bool_fname){
      var html='',value;
      $("#div_form_search").hide();
      if(search_id_fname!==null){
        value=search_id!==null?search_id:'';
        html+='<h4>'+search_id_fname+'</h4>';
        html+='<input type="text" class="form-control" value="'+value+'" placeholder="'+search_id_fname+'" onchange="apSearchId(this);" id="search_id">';
      }
      if(search_date_fname!==null){
        value=search_data!==null?search_data:'';
        html+='<h4>'+search_date_fname+'</h4>';
        html+='<input type="text" class="form-control" value="'+value+'" placeholder="25.12.2012" onchange="apSearchDate(this);" id="search_date">';
      }
      if(search_name1_fname!==null){
        value=search_name1!==null?search_name1:'';
        html+='<h4>'+search_name1_fname+'</h4>';
        html+='<input type="text" class="form-control" value="'+value+'" placeholder="'+search_name1_fname+'" onchange="apSearchName1(this);" id="search_name1">';
      }
      if(search_name2_fname!==null){
        value=search_name2!==null?search_name2:'';
        html+='<h4>'+search_name2_fname+'</h4>';
        html+='<input type="text" class="form-control" value="'+value+'" placeholder="'+search_name2_fname+'" onchange="apSearchName2(this);" id="search_name2">';
      }
      if(search_name3_fname!==null){
        value=search_name3!==null?search_name3:'';
        html+='<h4>'+search_name3_fname+'</h4>';
        html+='<input type="text" class="form-control" value="'+value+'" placeholder="'+search_name3_fname+'" onchange="apSearchName3(this);" id="search_name3">';
      }
      if(search_name4_fname!==null){
        value=search_name4!==null?search_name4:'';
        html+='<h4>'+search_name4_fname+'</h4>';
        html+='<input type="text" class="form-control" value="'+value+'" placeholder="'+search_name4_fname+'" onchange="apSearchName4(this);" id="search_name4">';
      }
      if(search_bool_fname!==null){
        value=(search_bool!==null&&search_bool===1)?'checked':'';
        html+='<h4>'+search_bool_fname+'</h4>';
        html+='<input type="checkbox" class="form-control" '+value+' placeholder="'+search_bool_fname+'" onchange="apSearchBool(this);" id="search_bool">';
      }
      $("#div_form_search_fields").html(html);
      if(html.length>0){
        $("#div_message").html('<img src="'+picture_marker_B+'" class="img-responsive">&nbsp;<h4>'+getMessage(fa.language,9002))+"</h4>";
        $("#div_form_search_button").html('<button onclick="apSearch();">'+getMessage(fa.language,9000)+'</button>');
        $("#div_form_search").show();
      }
    }
    function apSearchId(input){
      search_id=input.value;
    }
    function apSearchDate(input){
      var value=input.value;
      if(value.length>0){
        search_date=toMySQLDatetimeString(value);
      }
      else search_date=null;
    }
    function apSearchName1(input){
      search_name1=input.value;
    }
    function apSearchName2(input){
      search_name2=input.value;
    }
    function apSearchName3(input){
      search_name3=input.value;
    }
    function apSearchName4(input){
      search_name4=input.value;
    }
    function apSearchBool(input){
      search_bool=input.checked?1:0;
    }
    /*remove*/
    function apRemoveObject(object_id,object_name,callback){
      fa.removeObject(object_id,object_name,"#text_error_message",callback);
    }
    function apRemoveEmptyId(empty_id){
      $("#"+empty_id).remove();
    }
    /*after*/
    function apAfter(){
      /*found_rows=fa.getFoundRows();*/
      /*seek found rows history*/
      found_rows=null;
      var found_rows_object,list=fa.getFoundRowsObjects();
      for(var i=0;i<list.length;i++){
        found_rows_object=list[i];
        if(found_rows_object&&eval(found_rows_object.object_name)===eval(curr_object_list)){
          found_rows=found_rows_object.found_rows;
          /*alert("found_rows="+found_rows);*/
        }
      }
      /*pages : showPages();*/
      pagesByRowsCount(found_rows);
      /*clear founbd rows history*/
      list.length=0;
    }
    /*picture*/
    function apPictureClick(picture_id){
      curr_picture_id=picture_id;
      $("#input_picture_file").click();
    }
    function apAfterPicture(ptr){
      if(ptr){
        $("#img_picture_"+ptr.id).attr("src","data:image/jpeg;base64,"+ptr.picture);
      }
    }
    $("#input_picture_file").change(function(){
      var reader=new FileReader(),read_obj=$('#input_picture_file')[0];
      if(read_obj&&read_obj.files&&read_obj.files.length>0)reader.readAsDataURL(read_obj.files[0]);
      reader.onloadend=function(){
        if(reader.result)$("#img_picture_"+curr_picture_id).attr("src",reader.result);
        var obj=apFindObjectById(curr_object_list,curr_picture_id);
        obj.picture=reader.result.split(";base64,")[1];
        if(curr_object_name==='ProductParamPart')/*save picture by two id's*/
          fa.updateProductParamPartPicture(obj.product_id,obj.product_param_id,obj.picture,"#text_error_message",null);
        else fa.updatePicture(obj.id,obj.picture,curr_picture_function,"#text_error_message",null);
      };
    });

    /*Types And Attr*/

    /*stat*/
    function apGetStat(){
      $("#div_object_name").html("<h2>"+getMessage(fa.language,10301)+"</h2>");
      $("#div_form_search").hide();
      $("#div_message").empty();
      $("#text_error_message").empty();
      $("#table_body").empty();$("#table_head").empty();
      curr_object_name='Stat';
      curr_object_list='fa.stat_list';
      fa.offset=null;fa.rows=null;
      $("#search").attr("placeholder","");
      fa.stat_list.length=0;
      fa.getStat("#text_error_message",apAfterStat);
      $("#div_buttons").hide();
      $("#div_pages").hide();
    }
    function apAfterStat(){
      var h;
      if(fa.stat_list.length>0){
        h=faParsePattern(fa.stat_list,
        '<tr><td>Audit: %%audit%%</td></tr>'+
        '<tr><td>Drivers: %%driver_count%%</td></tr>'+
        '<tr><td>Clients: %%client_count%%</td></tr>'+
        '<tr><td>Drivers online: %%driver_active_sensor_count%%</td></tr>'+
        '<tr><td>Clients online: %%client_active_sensor_count%%</td></tr>'+
        '<tr><td>Transports: %%transport_count%%</td></tr>'+
        '<tr><td>Manufactures: %%manufacture_count%%</td></tr>'+
        '<tr><td>Products: %%product_count%%</td></tr>'+
        '<tr><td>Stores: %%store_count%%</td></tr>'+
        '<tr><td>Orders: %%order_count%%</td></tr>'+
        '<tr><td>Orders completed: %%order_completed_count%%</td></tr>'+
        '<tr><td>Orders cancelled: %%order_cancelled_count%%</td></tr>'+
        '<tr><td>Orders pending: %%order_pending_count%%</td></tr>'+
        '<tr><td>Orders today: %%order_today_count%%</td></tr>'+
        '<tr><td>Orders yesterday: %%order_yesterday_count%%</td></tr>'+
        '<tr><td>Orders week: %%order_week_count%%</td></tr>'+
        '<tr><td>Orders month: %%order_month_count%%</td></tr>'+
        '<tr><td>Orders today completed: %%order_today_completed_count%%</td></tr>'+
        '<tr><td>Orders today cancelled: %%order_today_cancelled_count%%</td></tr>'+
        '<tr><td>Orders today panding: %%order_today_pending_count%%</td></tr>'+
        '<tr><td>Orders yesterday completed: %%order_yesterday_completed_count%%</td></tr>'+
        '<tr><td>Orders yesterday cancelled: %%order_yesterday_cancelled_count%%</td></tr>'+
        '<tr><td>Orders yesterday pending: %%order_yesterday_pending_count%%</td></tr>'+
        '<tr><td>Orders total price: %%order_total_price%%</td></tr>'+
        '<tr><td>Purchase amount: %%purchase_payment_amount%%</td></tr>'+
        '<tr><td>Payment amount: %%payment_amount%%</td></tr>'+
        '<tr><td>Driver orders: %%driver_order_count%%</td></tr>'+
        '<tr><td>Driver orders completed: %%driver_order_completed_count%%</td></tr>'+
        '<tr><td>Driver orders pending: %%driver_order_pending_count%%</td></tr>'+
        '<tr><td>Driver orders total price: %%driver_order_total_price%%</td></tr>'+
        '<tr><td>Driver purchase amount: %%driver_purchase_payment_amount%%</td></tr>'+
        '<tr><td>Input messages: %%input_messages_count%%</td></tr>'+
        '<tr><td>Output messages: %%output_messages_count%%</td></tr>'+
        '<tr><td>Audit messages: %%audit_count%%</td></tr>'
        );
        $("#table_body").html(h);
      }
      h="<tr id='tr_table_header'><th>Value</th></tr>";
      $("#table_head").html(h);
      updateTableHeader(fa.language);
      updateTableBodyForStat(fa.language);
    }

    /*audit*/
    function apGetAudit(){
      $("#div_object_name").html("<h2>"+getMessage(fa.language,10302)+"</h2>");
      $("#div_form_search").hide();
      $("#div_message").empty();
      $("#text_error_message").empty();
      $("#table_body").empty();$("#table_head").empty();
      if(curr_object_name!=='Audit'){
        apClearSearch();
        PAGE_SET=0;PAGE_CURR=0;PAGE_COUNT=5;/*five pages in*/
        $("#div_pages").hide();
      }
      curr_object_name='Audit';
      curr_object_list='fa.audit_list';
      PAGE_ROWS=rows_count;
      fa.offset=PAGE_SET*PAGE_COUNT*PAGE_ROWS+PAGE_CURR*PAGE_ROWS;fa.rows=PAGE_ROWS;
      $("#search").attr("placeholder",getMessage(fa.language,20017));
      fa.audit_list.length=0;
      fa.getAudit(search,"#text_error_message",apAfter);
      $(document).one("ajaxStop",function(){
        apShowAudit();
      });
      $("#div_buttons").hide();
    }
    function apShowAudit(){
      var h;
      if(fa.audit_list.length>0){
        h=faParsePattern(fa.audit_list,
        '<tr id="%%id%%"><td>%%id%%</td>'+
        '<td>%%name%%</td>'+
        '<td>%%description%%</td>'+
        '<td>%%username%%</td>'+
        '<td>%%message%%</td>'+
        '<td>%%fromMySQLDatetimeString(obj.create_date)%%</td>'+
        '<td>%%getTimesAgoFrom(toMySQLDatetimeMilisec(obj.last_update),fa.language)%%</td>'+
        '</tr>');
        $("#table_body").html(h);
      }
      h="<tr id='tr_table_header'><th>Id</th><th>Name</th><th>Description</th><th>Username</th><th>Message</th><th>Create date</th><th>Last update</th></tr>";
      $("#table_head").html(h);
      updateTableHeader(fa.language);
    }

    /*settings*/
    function apGetSettings(){
      $("#div_object_name").html("<h2>"+getMessage(fa.language,10303)+"</h2>");
      $("#div_form_search").hide();
      $("#div_message").empty();
      $("#text_error_message").empty();
      $("#table_body").empty();$("#table_head").empty();
      curr_object_name='Settings';
      curr_object_list='fa.settings_list';
      fa.offset=null;fa.rows=null;
      $("#search").attr("placeholder",getMessage(fa.language,20007));
      var settings=new faSettings();
      settings.code="%";
      if(search!==null&&search!=='')settings.code="%"+search+"%";
      fa.settings_list.length=0;
      fa.getSettings(settings,"#text_error_message",null);
      $(document).one("ajaxStop",function(){
        apShowSettings();
      });
      $("#div_buttons").show();
      $("#div_pages").hide();
    }
    function apShowSettings(){
      var h;
      if(fa.settings_list.length>0){
        h=faParsePattern(fa.settings_list,
        '<tr id="%%code%%">'+
        '<td>%%code%%</td>'+
        '<td><input type="text" onchange="apUpdateInputByValue(\'code\',\'%%code%%\',this);" name="name" value="%%name%%"></td>'+
        '<td><input type="text" onchange="apUpdateInputByValue(\'code\',\'%%code%%\',this);" name="value" value="%%value%%"></td>'+
        '<td><button type="button" class="btn btn-primary btn-lg" title="Remove" onclick="apRemoveSettings(\'%%code%%\',getData);">'+remove_icon+'</button></td>'+
        '<td><button type="button" class="btn btn-primary btn-lg" title="Update" onclick="apUpdateSettings(\'%%code%%\',getData);">'+update_icon+'</button></td>'+
        '</tr>');
        $("#table_body").html(h);
      }
      h="<tr id='tr_table_header'><th>Code</th><th>Name</th><th>Value</th><th>Remove</th><th>Update</th></tr>";
      $("#table_head").html(h);
      updateTableHeader(fa.language);
    }
    function apAddSettings(){
      var h=faParsePattern(null,
      '<tr id="'+temp_id+'">'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="code" value=""></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="name" value=""></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="value" value=""></td>'+
      '<td><button type="button" class="btn btn-primary btn-lg" title="Remove" onclick="apRemoveEmptyId('+temp_id+');">'+remove_icon+'</button></td>'+
      '<td><button type="button" class="btn btn-primary btn-lg" title="Update" onclick="apUpdateObject('+temp_id+',getData);">'+update_icon+'</button></td>'+
      '</tr>');
      $("#table_body").append(h);

      var settings=new faSettings();
      settings.id=temp_id;
      fa.settings_list.push(settings);

      temp_id--;
    }
    function apRemoveSettings(code,callback){
      fa.removeSettings(code,"#text_error_message",callback);
    }
    function apUpdateSettings(value,callback){
      var obj=apFindObjectByValue(curr_object_list,"code",value);
      if(obj){
        fa.updateSettings(obj,"#text_error_message",callback);
      }
    }

    /*project*/
    function apGetProject(){
      $("#div_object_name").html("<h2>"+getMessage(fa.language,10304)+"</h2>");
      $("#div_form_search").hide();
      $("#div_message").empty();
      $("#text_error_message").empty();
      $("#table_body").empty();$("#table_head").empty();
      if(curr_object_name!=='Project'){
        apClearSearch();
        PAGE_SET=0;PAGE_CURR=0;PAGE_COUNT=5;/*five pages in*/
        $("#div_pages").hide();
      }
      curr_object_name='Project';
      curr_object_list='fa.project_list';
      PAGE_ROWS=rows_count;
      fa.offset=PAGE_SET*PAGE_COUNT*PAGE_ROWS+PAGE_CURR*PAGE_ROWS;fa.rows=PAGE_ROWS;
      $("#search").attr("placeholder",getMessage(fa.language,20117));
      var project=new faProject();
      project.schema_name="%";
      if(search!==null&&search!=='')project.schema_name="%"+search+"%";
      fa.project_list.length=0;
      fa.getProject(project,"#text_error_message",apAfter);
      $(document).one("ajaxStop",function(){
        apShowProject();
      });
      $("#div_buttons").show();
    }
    function apShowProject(){
      var h;
      if(fa.project_list.length>0){
        h=faParsePattern(fa.project_list,
        '<tr id="%%schema_name%%">'+
        '<td>%%api_key%%</td>'+
        '<td>%%schema_name%%</td>'+
        '<td><div class="form-group"><div class="checkbox"><input type="checkbox" onchange="apUpdateCheckboxByValue(\'schema_name\',\'%%schema_name%%\',this);" %%apChecked(obj.active)%% name="active" value="%%active%%" id="input_activity_%%schema_name%%"><label id="label_activity" for="input_activity_%%schema_name%%"><span></span></label></div></div></td>'+
        '<td>%%amount_paid%%</td>'+
        '<td>%%currency%%</td>'+
        '<td>%%name%%</td>'+
        '<td>%%description%%</td>'+
        '<td>%%ip_address%%</td>'+
        '<td>%%fromMySQLDatetimeString(obj.create_date)%%</td>'+
        '<td>%%getTimesAgoFrom(toMySQLDatetimeMilisec(obj.last_update),fa.language)%%</td>'+
        '<td><button type="button" class="btn btn-primary btn-lg" title="Remove" onclick="apRemoveProject(\'%%schema_name%%\',getData);">'+remove_icon+'</button></td>'+
        '<td><button type="button" class="btn btn-primary btn-lg" title="Update" onclick="apUpdateProject(\'%%schema_name%%\',getData);">'+update_icon+'</button></td>'+
        '</tr>');
        $("#table_body").html(h);
      }
      h="<tr id='tr_table_header'><th>API key</th><th>Schema name</th><th>Activity</th><th>Amount paid</th><th>Currency</th><th>Name</th><th>Description</th><th>IP address</th><th>Create date</th><th>Last update</th><th>Remove</th><th>Update</th></tr>";
      $("#table_head").html(h);
      updateTableHeader(fa.language);
    }
    function apAddProject(){
      var h=faParsePattern(null,
      '<tr id="'+temp_id+'">'+
      '<td>&ndash;</td>'+
      '<td>&ndash;</td>'+
      '<td>&ndash;</td>'+
      '<td>&ndash;</td>'+
      '<td>&ndash;</td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="name" value=""></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="description" value=""></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="ip_address" value="" hint="192.168.0.1"></td>'+
      '<td>&ndash;</td>'+
      '<td>&ndash;</td>'+
      '<td><button type="button" class="btn btn-primary btn-lg" title="Remove" onclick="apRemoveEmptyId('+temp_id+');">'+remove_icon+'</button></td>'+
      '<td><button type="button" class="btn btn-primary btn-lg" title="Update" onclick="apUpdateObject('+temp_id+',getData);">'+update_icon+'</button></td>'+
      '</tr>');
      $("#table_body").append(h);

      var project=new faProject();
      project.id=temp_id;
      fa.project_list.push(project);

      temp_id--;
    }
    function apRemoveProject(schema_name,callback){
      fa.removeProject(schema_name,"#text_error_message",callback);
    }
    function apUpdateProject(value,callback){
      var obj=apFindObjectByValue(curr_object_list,"schema_name",value);
      if(obj){
        fa.updateProjectActivity(value,obj.active,"#text_error_message",callback);
      }
    }

    /*attr*/
    function apGetAttr(){
      $("#div_object_name").html("<h2>"+getMessage(fa.language,10102)+"</h2>");
      $("#div_form_search").hide();
      $("#div_message").empty();
      $("#text_error_message").empty();
      $("#table_body").empty();$("#table_head").empty();
      curr_object_name='Attr';
      curr_object_list='fa.attr_list';
      fa.offset=null;fa.rows=null;
      $("#search").attr("placeholder","");
      fa.attr_list.length=0;
      fa.getAttr("#text_error_message",apAfterAttr);
      $("#div_buttons").show();
      $("#div_pages").hide();
    }
    function apAfterAttr(){
      var h;
      if(fa.attr_list.length>0){
        h=faParsePattern(fa.attr_list,
        '<tr id="%%name%%">'+
        '<td>%%name%%</td>'+
        '<td><button type="button" class="btn btn-primary btn-lg" title="Remove" onclick="apRemoveAttr(\'%%name%%\',getData);">'+remove_icon+'</button></td>'+
        '</tr>');
        $("#table_body").html(h);
      }
      h="<tr id='tr_table_header'><th>Attribute</th><th>Remove</th></tr>";
      $("#table_head").html(h);
      updateTableHeader(fa.language);
    }
    function apAddAttr(){
      var h=faParsePattern(null,
      '<tr id="'+temp_id+'">'+
      '<td><input type="text" name="name" value="" id="input_'+temp_id+'"></td>'+
      '<td><button type="button" class="btn btn-primary btn-lg" title="Update" onclick="apUpdateAttr('+temp_id+',getData);">'+update_icon+'</button></td>'+
      '</tr>');
      $("#table_body").append(h);
      temp_id--;
    }
    function apUpdateAttr(id,callback){
      var value=$("#input_"+id).val();
      /*var obj=document.getElementById("input_"+id);*/
      fa.addAttr(value,"#text_error_message",callback);
    }
    function apRemoveAttr(name,callback){
      fa.removeAttr(name,"#text_error_message",callback);
    }
    /*color*/
    function apGetColor(){
      $("#div_object_name").html("<h2>"+getMessage(fa.language,10104)+"</h2>");
      $("#div_form_search").hide();
      $("#div_message").empty();
      $("#text_error_message").empty();
      $("#table_body").empty();$("#table_head").empty();
      curr_object_name='Color';
      curr_object_list='fa.color_list';
      fa.offset=null;fa.rows=null;
      $("#search").attr("placeholder","");
      fa.color_list.length=0;
      fa.getColor("#text_error_message",apAfterColor);
      $("#div_buttons").show();
      $("#div_pages").hide();
    }
    function apAfterColor(){
      var h;
      if(fa.color_list.length>0){
        h=faParsePattern(fa.color_list,
        '<tr id="%%name%%">'+
        '<td>%%name%%</td>'+
        '<td><button type="button" class="btn btn-primary btn-lg" title="Remove" onclick="apRemoveColor(\'%%name%%\',getData);">'+remove_icon+'</button></td>'+
        '</tr>');
        $("#table_body").html(h);
      }
      h="<tr id='tr_table_header'><th>Color</th><th>Remove</th></tr>";
      $("#table_head").html(h);
      updateTableHeader(fa.language);
    }
    function apAddColor(){
      var h=faParsePattern(null,
      '<tr id="'+temp_id+'">'+
      '<td><input type="text" name="name" value="" id="input_'+temp_id+'"></td>'+
      '<td><button type="button" class="btn btn-primary btn-lg" title="Update" onclick="apUpdateColor('+temp_id+',getData);">'+update_icon+'</button></td>'+
      '</tr>');
      $("#table_body").append(h);
      temp_id--;
    }
    function apUpdateColor(id,callback){
      var value=$("#input_"+id).val();
      /*var obj=document.getElementById("input_"+id);*/
      fa.addColor(value,"#text_error_message",callback);
    }
    function apRemoveColor(name,callback){
      fa.removeColor(name,"#text_error_message",callback);
    }

    /*language*/
    function apGetLanguage(){
      $("#div_object_name").html("<h2>"+getMessage(fa.language,10106)+"</h2>");
      $("#div_form_search").hide();
      $("#div_message").empty();
      $("#text_error_message").empty();
      $("#table_body").empty();$("#table_head").empty();
      curr_object_name='Language';
      curr_object_list='fa.language_list';
      fa.offset=null;fa.rows=null;
      $("#search").attr("placeholder","");
      fa.language_list.length=0;
      fa.getLanguage("#text_error_message",null);
      $(document).one("ajaxStop",function(){
        apShowLanguage();
      });
      $("#div_buttons").show();
      $("#div_pages").hide();
    }
    function apShowLanguage(){
      var h;
      if(fa.language_list.length>0){
        h=faParsePattern(fa.language_list,
        '<tr id="%%id%%"><td>%%id%%</td>'+
        '<td><input type="text" onchange="apUpdateInput(%%id%%,this);" name="name" value="%%name%%"></td>'+
        '<td><input type="text" onchange="apUpdateInput(%%id%%,this);" name="value" value="%%value%%"></td>'+
        '<td><input type="text" onchange="apUpdateInput(%%id%%,this);" name="code" value="%%code%%"></td>'+
        '<td><div class="form-group"><div class="checkbox"><input type="checkbox" onchange="apUpdateCheckbox(%%id%%,this);" %%apChecked(obj.active)%% name="active" value="%%active%%" id="input_activity_%%id%%"><label id="label_activity" for="input_activity_%%id%%"><span></span></label></div></div></td>'+
        '<td><button type="button" class="btn btn-primary btn-lg" title="Remove" onclick="apRemoveObject(%%id%%,\'language\',getData);">'+remove_icon+'</button></td>'+
        '<td><button type="button" class="btn btn-primary btn-lg" title="Update" onclick="apUpdateObject(%%id%%,apAfterUpdateLanguage);">'+update_icon+'</button></td>'+
        '</tr>');
        $("#table_body").html(h);
      }
      h="<tr id='tr_table_header'><th>Id</th><th>Name</th><th>Value</th><th>Code</th><th>Activity</th><th>Remove</th><th>Update</th></tr>";
      $("#table_head").html(h);
      updateTableHeader(fa.language);
    }
    function apAddLanguage(){
      var h=faParsePattern(null,
      '<tr id="'+temp_id+'">'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="temp_id" value=""></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="name" value=""></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="value" value=""></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="code" value=""></td>'+
      '<td><div class="form-group"><div class="checkbox"><input type="checkbox" onchange="apUpdateCheckbox('+temp_id+',this);" name="active" value="" id="input_activity_'+temp_id+'"><label id="label_activity" for="input_activity_'+temp_id+'"><span></span></label></div></div></td>'+
      '<td><button type="button" class="btn btn-primary btn-lg" title="Remove" onclick="apRemoveEmptyId('+temp_id+');">'+remove_icon+'</button></td>'+
      '<td><button type="button" class="btn btn-primary btn-lg" title="Update" onclick="apUpdateLanguage('+temp_id+',getData);">'+update_icon+'</button></td>'+
      '</tr>');
      $("#table_body").append(h);

      var language=new faLanguage();
      language.id=temp_id;
      fa.language_list.push(language);

      temp_id--;
    }
    function apUpdateLanguage(object_id,callback){
      var obj=apFindObjectById(curr_object_list,object_id);
      if(obj){
        obj.id=obj.temp_id;
        fa.addLanguage(obj,"#text_error_message",null);
        if(obj.active===null)obj.active=0;
        $(document).one("ajaxStop",function(){
          fa.updateLanguageActivity(obj.id,obj.active,"#text_error_message",callback);
        });
      }
    }
    function apAfterUpdateLanguage(ptr){
      var list=fa.ret_val_list;
      if(list.length>0){
        var ret_val=list[list.length-1];
        if(ret_val.status==="ERROR"){
        }
        else if(ret_val.status==="SUCCESS"){
          if(ptr.active===null)ptr.active=0;
          fa.updateLanguageActivity(ptr.id,ptr.active,"#text_error_message",getData);
        }
      }
    }

    /*currency*/
    function apGetCurrency(){
      $("#div_object_name").html("<h2>"+getMessage(fa.language,10105)+"</h2>");
      $("#div_form_search").hide();
      $("#div_message").empty();
      $("#text_error_message").empty();
      $("#table_body").empty();$("#table_head").empty();
      if(curr_object_name!=='Currency'){
        apClearSearch();
      }
      curr_object_name='Currency';
      curr_object_list='fa.currency_list';
      fa.offset=null;fa.rows=null;
      $("#search").attr("placeholder","Id");
      var currency=new faCurrency();
      currency.id="%";
      if(search!==null&&search!=='')currency.id="%"+search+"%";
      fa.currency_list.length=0;
      fa.getCurrency(currency,fa.language,"#text_error_message",null);
      fa.language_list.length=0;
      fa.getLanguage("#text_error_message",null);
      $(document).one("ajaxStop",function(){
        apShowCurrency();
      });
      $("#div_buttons").show();
      $("#div_pages").hide();
    }
    function apShowCurrency(){
      var h;
      if(fa.currency_list.length>0){
        h=faParsePattern(fa.currency_list,
        '<tr id="%%id%%"><td>%%id%%</td>'+
        '<td><input type="text" onchange="apUpdateInput(%%id%%,this);" name="name" value="%%name%%"></td>'+
        '<td><input type="text" onchange="apUpdateInput(%%id%%,this);" name="description" value="%%description%%"></td>'+
        '<td><input type="text" onchange="apUpdateInput(%%id%%,this);" name="value" value="%%value%%"></td>'+
        '<td><div class="form-group"><div class="checkbox"><input type="checkbox" onchange="apUpdateCheckbox(%%id%%,this);" %%apChecked(obj.active)%% name="active" value="%%active%%" id="input_activity_%%id%%"><label id="label_activity" for="input_activity_%%id%%"><span></span></label></div></div></td>'+
        '<td><select options="fa.language_list" onchange="apUpdateSelect(%%id%%,this);" name="language" option_selected="%%language%%" option_value="value" option_name="value"><option value=""></option></select></td>'+
        '<td>%%getTimesAgoFrom(toMySQLDatetimeMilisec(obj.last_update),fa.language)%%</td>'+
        '<td>%%parseAttrList(obj.attr_list)%%</td>'+
        '<td><button type="button" class="btn btn-primary btn-lg" title="Remove" onclick="apRemoveObject(%%id%%,\'currency\',getData);">'+remove_icon+'</button></td>'+
        '<td><button type="button" class="btn btn-primary btn-lg" title="Update" onclick="apUpdateObject(%%id%%,apAfterUpdateCurrency);">'+update_icon+'</button></td>'+
        '</tr>');
        $("#table_body").html(h);
      }
      h="<tr id='tr_table_header'><th>Id</th><th>Name</th><th>Description</th><th>Value</th><th>Activity</th><th>Language</th><th>Last update</th><th>Attr</th><th>Remove</th><th>Update</th></tr>";
      $("#table_head").html(h);
      updateTableHeader(fa.language);
    }
    function apAddCurrency(){
      var h=faParsePattern(null,
      '<tr id="'+temp_id+'"><td>&ndash;</td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="name" value=""></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="description" value=""></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="value" value=""></td>'+
      '<td><div class="form-group"><div class="checkbox"><input type="checkbox" onchange="apUpdateCheckbox('+temp_id+',this);" name="active" value="" id="input_activity_'+temp_id+'"><label id="label_activity" for="input_activity_'+temp_id+'"><span></span></label></div></div></td>'+
      '<td><select options="fa.language_list" onchange="apUpdateSelect('+temp_id+',this);" name="language" option_selected="" option_value="value" option_name="value"><option value=""></option></select></td>'+
      '<td>&ndash;</td>'+
      '<td>&ndash;</td>'+
      '<td><button type="button" class="btn btn-primary btn-lg" title="Remove" onclick="apRemoveEmptyId('+temp_id+');">'+remove_icon+'</button></td>'+
      '<td><button type="button" class="btn btn-primary btn-lg" title="Update" onclick="apUpdateObject('+temp_id+',apAfterUpdateCurrency);">'+update_icon+'</button></td>'+
      '</tr>');
      $("#table_body").append(h);

      var currency=new faCurrency();
      currency.id=temp_id;
      fa.currency_list.push(currency);

      temp_id--;
    }
    function apAfterUpdateCurrency(ptr){
      var list=fa.ret_val_list;
      if(list.length>0){
        var ret_val=list[list.length-1];
        if(ret_val.status==="ERROR"){
        }
        else if(ret_val.status==="SUCCESS"){
          if(ptr.id===null||parseInt(ptr.id)<temp_value){/*replace id*/
            ptr.id=ret_val.value;
          }
          if(ptr.active===null)ptr.active=0;
          fa.updateCurrencyActivity(ptr.id,ptr.active,"#text_error_message",getData);
        }
      }
    }

    /*attr_part*/
    function apGetAttrPart(){
      $("#div_object_name").html("<h2>"+getMessage(fa.language,10103)+"</h2>");
      $("#div_form_search").hide();
      $("#div_message").empty();
      $("#text_error_message").empty();
      $("#table_body").empty();$("#table_head").empty();
      if(curr_object_name!=='AttrPart'){
        apClearSearch();
        PAGE_SET=0;PAGE_CURR=0;PAGE_COUNT=5;/*five pages in*/
        $("#div_pages").hide();
      }
      curr_object_name='AttrPart';
      curr_object_list='fa.attr_part_list';
      PAGE_ROWS=rows_count;
      fa.offset=PAGE_SET*PAGE_COUNT*PAGE_ROWS+PAGE_CURR*PAGE_ROWS;fa.rows=PAGE_ROWS;
      $("#search").attr("placeholder",getMessage(fa.language,20010));
      var attr_part=new faAttrPart();
      attr_part.object_id="%";
      attr_part.object_name="%";
      if(search!==null&&search!=='')attr_part.object_name="%"+search+"%";
      fa.attr_part_list.length=0;
      fa.getAttrPart(attr_part,"#text_error_message",apAfter);
      fa.offset=null;fa.rows=null;
      fa.attr_list.length=0;
      fa.getAttr("#text_error_message",null);
      fa.language_list.length=0;
      fa.getLanguage("#text_error_message",null);
      $(document).one("ajaxStop",function(){
        apShowAttrPart();
      });
      $("#div_buttons").show();
    }
    function apShowAttrPart(){
      fa.temp_list.length=0;
      var object_name;
      object_name=new faObjectName();
      object_name.name="manufacture";
      fa.temp_list.push(object_name);
      object_name=new faObjectName();
      object_name.name="product";
      fa.temp_list.push(object_name);
      object_name=new faObjectName();
      object_name.name="product_type";
      fa.temp_list.push(object_name);
      object_name=new faObjectName();
      object_name.name="product_param";
      fa.temp_list.push(object_name);
      object_name=new faObjectName();
      object_name.name="store";
      fa.temp_list.push(object_name);
      object_name=new faObjectName();
      object_name.name="transport_type";
      fa.temp_list.push(object_name);
      object_name=new faObjectName();
      object_name.name="delivery_type";
      fa.temp_list.push(object_name);
      object_name=new faObjectName();
      object_name.name="order_status";
      fa.temp_list.push(object_name);
      object_name=new faObjectName();
      object_name.name="discount";
      fa.temp_list.push(object_name);
      object_name=new faObjectName();
      object_name.name="currency";
      fa.temp_list.push(object_name);
      object_name=new faObjectName();
      object_name.name="tax";
      fa.temp_list.push(object_name);
      object_name=new faObjectName();
      object_name.name="track_type";
      fa.temp_list.push(object_name);

      var h;
      if(fa.attr_part_list.length>0){
        h=faParsePattern(fa.attr_part_list,
        '<tr id="%%id%%"><td>%%id%%</td>'+
        '<td><input type="text" onchange="apUpdateInput(%%id%%,this);" name="object_id" value="%%object_id%%"></td>'+
        '<td><select options="fa.temp_list" onchange="apUpdateSelect(%%id%%,this);" name="object_name" option_selected="%%object_name%%" option_value="name" option_name="name"><option value=""></option></select></td>'+
        '<td><select options="fa.attr_list" onchange="apUpdateSelect(%%id%%,this);" name="name" option_selected="%%name%%" option_value="name" option_name="name"><option value=""></option></select></td>'+
        '<td><input type="text" onchange="apUpdateInput(%%id%%,this);" name="value" value="%%value%%"></td>'+
        '<td><select options="fa.language_list" onchange="apUpdateSelect(%%id%%,this);" name="language" option_selected="%%language%%" option_value="value" option_name="value"><option value=""></option></select></td>'+
        '<td>%%getTimesAgoFrom(toMySQLDatetimeMilisec(obj.last_update),fa.language)%%</td>'+
        '<td><button type="button" class="btn btn-primary btn-lg" title="Remove" onclick="apRemoveObject(%%id%%,\'attr_part\',getData);">'+remove_icon+'</button></td>'+
        '<td><button type="button" class="btn btn-primary btn-lg" title="Update" onclick="apUpdateObject(%%id%%,getData);">'+update_icon+'</button></td>'+
        '</tr>');
        $("#table_body").html(h);
      }
      h="<tr id='tr_table_header'><th>Id</th><th>ObjectId</th><th>Object name</th><th>Name</th><th>Value</th><th>Language</th><th>Last update</th><th>Remove</th><th>Update</th></tr>";
      $("#table_head").html(h);
      updateTableHeader(fa.language);
    }
    function apAddAttrPart(){
      var h=faParsePattern(null,
      '<tr id="'+temp_id+'"><td>&ndash;</td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="object_id" value=""></td>'+
      '<td><select options="fa.temp_list" onchange="apUpdateSelect('+temp_id+',this);" name="object_name" option_selected="" option_value="name" option_name="name"><option value=""></option></select></td>'+
      '<td><select options="fa.attr_list" onchange="apUpdateSelect('+temp_id+',this);" name="name" option_selected="" option_value="name" option_name="name"><option value=""></option></select></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="value" value=""></td>'+
      '<td><select options="fa.language_list" onchange="apUpdateSelect('+temp_id+',this);" name="language" option_selected="" option_value="value" option_name="value"><option value=""></option></select></td>'+
      '<td>&ndash;</td>'+
      '<td><button type="button" class="btn btn-primary btn-lg" title="Remove" onclick="apRemoveEmptyId('+temp_id+');">'+remove_icon+'</button></td>'+
      '<td><button type="button" class="btn btn-primary btn-lg" title="Update" onclick="apUpdateObject('+temp_id+',getData);">'+update_icon+'</button></td>'+
      '</tr>');
      $("#table_body").append(h);

      var attr_part=new faAttrPart();
      attr_part.id=temp_id;
      fa.attr_part_list.push(attr_part);

      temp_id--;
    }

    /*delivery_type*/
    function apGetDeliveryType(){
      $("#div_object_name").html("<h2>"+getMessage(fa.language,10107)+"</h2>");
      $("#div_form_search").hide();
      $("#div_message").empty();
      $("#text_error_message").empty();
      $("#table_body").empty();$("#table_head").empty();
      if(curr_object_name!=='DeliveryType'){
        apClearSearch();
        PAGE_SET=0;PAGE_CURR=0;PAGE_COUNT=5;/*five pages in*/
        $("#div_pages").hide();
      }
      curr_object_name='DeliveryType';
      curr_object_list='fa.delivery_type_list';
      PAGE_ROWS=rows_count;
      fa.offset=PAGE_SET*PAGE_COUNT*PAGE_ROWS+PAGE_CURR*PAGE_ROWS;fa.rows=PAGE_ROWS;
      $("#search").attr("placeholder",getMessage(fa.language,20005));
      var obj_type=new faObjectType();
      obj_type.id="%";
      if(search!==null&&search!=='')obj_type.name="%"+search+"%";
      fa.delivery_type_list.length=0;
      fa.getDeliveryType(obj_type,fa.language,"#text_error_message",apAfter);
      fa.offset=null;fa.rows=null;
      fa.language_list.length=0;
      fa.getLanguage("#text_error_message",null);
      $(document).one("ajaxStop",function(){
        apShowDeliveryType();
      });
      $("#div_buttons").show();
    }
    function apShowDeliveryType(){
      var h;
      if(fa.delivery_type_list.length>0){
        h=faParsePattern(fa.delivery_type_list,
        '<tr id="%%id%%"><td>%%id%%</td>'+
        '<td><input type="text" onchange="apUpdateInput(%%id%%,this);" name="name" value="%%name%%"></td>'+
        '<td><select options="fa.language_list" onchange="apUpdateSelect(%%id%%,this);" name="language" option_selected="%%language%%" option_value="value" option_name="value"><option value=""></option></select></td>'+
        '<td>%%getTimesAgoFrom(toMySQLDatetimeMilisec(obj.last_update),fa.language)%%</td>'+
        '<td>%%parseAttrList(obj.attr_list)%%</td>'+
        '<td><button type="button" class="btn btn-primary btn-lg" title="Remove" onclick="apRemoveObject(%%id%%,\'delivery_type\',getData);">'+remove_icon+'</button></td>'+
        '<td><button type="button" class="btn btn-primary btn-lg" title="Update" onclick="apUpdateObject(%%id%%,getData);">'+update_icon+'</button></td>'+
        '</tr>');
        $("#table_body").html(h);
      }
      h="<tr id='tr_table_header'><th>Id</th><th>Name</th><th>Language</th><th>Last update</th><th>Attr</th><th>Remove</th><th>Update</th></tr>";
      $("#table_head").html(h);
      updateTableHeader(fa.language);
    }
    function apAddDeliveryType(){
      var h=faParsePattern(null,
      '<tr id="'+temp_id+'"><td>&ndash;</td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="name" value=""></td>'+
      '<td><select options="fa.language_list" onchange="apUpdateSelect('+temp_id+',this);" name="language" option_selected="" option_value="value" option_name="value"><option value=""></option></select></td>'+
      '<td>&ndash;</td>'+
      '<td>&ndash;</td>'+
      '<td><button type="button" class="btn btn-primary btn-lg" title="Remove" onclick="apRemoveEmptyId('+temp_id+');">'+remove_icon+'</button></td>'+
      '<td><button type="button" class="btn btn-primary btn-lg" title="Update" onclick="apUpdateObject('+temp_id+',getData);">'+update_icon+'</button></td>'+
      '</tr>');
      $("#table_body").append(h);

      var obj_type=new faObjectType();
      obj_type.id=temp_id;
      fa.delivery_type_list.push(obj_type);

      temp_id--;
    }

    /*track_type*/
    function apGetTrackType(){
      $("#div_object_name").html("<h2>"+getMessage(fa.language,10108)+"</h2>");
      $("#div_form_search").hide();
      $("#div_message").empty();
      $("#text_error_message").empty();
      $("#table_body").empty();$("#table_head").empty();
      if(curr_object_name!=='TrackType'){
        apClearSearch();
        PAGE_SET=0;PAGE_CURR=0;PAGE_COUNT=5;/*five pages in*/
        $("#div_pages").hide();
      }
      curr_object_name='TrackType';
      curr_object_list='fa.track_type_list';
      PAGE_ROWS=rows_count;
      fa.offset=PAGE_SET*PAGE_COUNT*PAGE_ROWS+PAGE_CURR*PAGE_ROWS;fa.rows=PAGE_ROWS;
      $("#search").attr("placeholder",getMessage(fa.language,20005));
      var obj_type=new faObjectType();
      obj_type.id="%";
      if(search!==null&&search!=='')obj_type.name="%"+search+"%";
      fa.track_type_list.length=0;
      fa.getTrackType(obj_type,fa.language,"#text_error_message",apAfter);
      fa.offset=null;fa.rows=null;
      fa.language_list.length=0;
      fa.getLanguage("#text_error_message",null);
      $(document).one("ajaxStop",function(){
        apShowTrackType();
      });
      $("#div_buttons").show();
    }
    function apShowTrackType(){
      var h;
      if(fa.track_type_list.length>0){
        h=faParsePattern(fa.track_type_list,
        '<tr id="%%id%%"><td>%%id%%</td>'+
        '<td><input type="text" onchange="apUpdateInput(%%id%%,this);" name="name" value="%%name%%"></td>'+
        '<td><select options="fa.language_list" onchange="apUpdateSelect(%%id%%,this);" name="language" option_selected="%%language%%" option_value="value" option_name="value"><option value=""></option></select></td>'+
        '<td>%%getTimesAgoFrom(toMySQLDatetimeMilisec(obj.last_update),fa.language)%%</td>'+
        '<td>%%parseAttrList(obj.attr_list)%%</td>'+
        '<td><button type="button" class="btn btn-primary btn-lg" title="Remove" onclick="apRemoveObject(%%id%%,\'track_type\',getData);">'+remove_icon+'</button></td>'+
        '<td><button type="button" class="btn btn-primary btn-lg" title="Update" onclick="apUpdateObject(%%id%%,getData);">'+update_icon+'</button></td>'+
        '</tr>');
        $("#table_body").html(h);
      }
      h="<tr id='tr_table_header'><th>Id</th><th>Name</th><th>Language</th><th>Last update</th><th>Attr</th><th>Remove</th><th>Update</th></tr>";
      $("#table_head").html(h);
      updateTableHeader(fa.language);
    }
    function apAddTrackType(){
      var h=faParsePattern(null,
      '<tr id="'+temp_id+'">'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="temp_id" value=""></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="name" value=""></td>'+
      '<td><select options="fa.language_list" onchange="apUpdateSelect('+temp_id+',this);" name="language" option_selected="" option_value="value" option_name="value"><option value=""></option></select></td>'+
      '<td>&ndash;</td>'+
      '<td>&ndash;</td>'+
      '<td><button type="button" class="btn btn-primary btn-lg" title="Remove" onclick="apRemoveEmptyId('+temp_id+');">'+remove_icon+'</button></td>'+
      '<td><button type="button" class="btn btn-primary btn-lg" title="Update" onclick="apUpdateObject('+temp_id+',getData,apBeforeUpdateTrackType);">'+update_icon+'</button></td>'+
      '</tr>');
      $("#table_body").append(h);

      var obj_type=new faObjectType();
      obj_type.id=temp_id;
      fa.track_type_list.push(obj_type);

      temp_id--;
    }
    function apBeforeUpdateTrackType(ptr){
      ptr.id=ptr.temp_id;
    }

    /*order_status*/
    function apGetOrderStatus(){
      $("#div_object_name").html("<h2>"+getMessage(fa.language,10109)+"</h2>");
      $("#div_form_search").hide();
      $("#div_message").empty();
      $("#text_error_message").empty();
      $("#table_body").empty();$("#table_head").empty();
      if(curr_object_name!=='OrderStatus'){
        apClearSearch();
        PAGE_SET=0;PAGE_CURR=0;PAGE_COUNT=5;/*five pages in*/
        $("#div_pages").hide();
      }
      curr_object_name='OrderStatus';
      curr_object_list='fa.order_status_list';
      PAGE_ROWS=rows_count;
      fa.offset=PAGE_SET*PAGE_COUNT*PAGE_ROWS+PAGE_CURR*PAGE_ROWS;fa.rows=PAGE_ROWS;
      $("#search").attr("placeholder",getMessage(fa.language,20005));
      var obj_type=new faObjectType();
      obj_type.id="%";
      if(search!==null&&search!=='')obj_type.name="%"+search+"%";
      fa.order_status_list.length=0;
      fa.getOrderStatus(obj_type,fa.language,"#text_error_message",apAfter);
      fa.offset=null;fa.rows=null;
      fa.language_list.length=0;
      fa.getLanguage("#text_error_message",null);
      $(document).one("ajaxStop",function(){
        apShowOrderStatus();
      });
      $("#div_buttons").show();
    }
    function apShowOrderStatus(){
      var h;
      if(fa.order_status_list.length>0){
        h=faParsePattern(fa.order_status_list,
        '<tr id="%%id%%"><td>%%id%%</td>'+
        '<td><input type="text" onchange="apUpdateInput(%%id%%,this);" name="name" value="%%name%%"></td>'+
        '<td><select options="fa.language_list" onchange="apUpdateSelect(%%id%%,this);" name="language" option_selected="%%language%%" option_value="value" option_name="value"><option value=""></option></select></td>'+
        '<td>%%getTimesAgoFrom(toMySQLDatetimeMilisec(obj.last_update),fa.language)%%</td>'+
        '<td>%%parseAttrList(obj.attr_list)%%</td>'+
        '<td><button type="button" class="btn btn-primary btn-lg" title="Remove" onclick="apRemoveObject(%%id%%,\'order_status\',getData);">'+remove_icon+'</button></td>'+
        '<td><button type="button" class="btn btn-primary btn-lg" title="Update" onclick="apUpdateObject(%%id%%,getData);">'+update_icon+'</button></td>'+
        '</tr>');
        $("#table_body").html(h);
      }
      h="<tr id='tr_table_header'><th>Id</th><th>Name</th><th>Language</th><th>Last update</th><th>Attr</th><th>Remove</th><th>Update</th></tr>";
      $("#table_head").html(h);
      updateTableHeader(fa.language);
    }
    function apAddOrderStatus(){
      var h=faParsePattern(null,
      '<tr id="'+temp_id+'">'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="temp_id" value=""></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="name" value=""></td>'+
      '<td><select options="fa.language_list" onchange="apUpdateSelect('+temp_id+',this);" name="language" option_selected="" option_value="value" option_name="value"><option value=""></option></select></td>'+
      '<td>&ndash;</td>'+
      '<td>&ndash;</td>'+
      '<td><button type="button" class="btn btn-primary btn-lg" title="Remove" onclick="apRemoveEmptyId('+temp_id+');">'+remove_icon+'</button></td>'+
      '<td><button type="button" class="btn btn-primary btn-lg" title="Update" onclick="apUpdateObject('+temp_id+',getData,apBeforeUpdateOrderStatus);">'+update_icon+'</button></td>'+
      '</tr>');
      $("#table_body").append(h);

      var obj_type=new faObjectType();
      obj_type.id=temp_id;
      fa.order_status_list.push(obj_type);

      temp_id--;
    }
    function apBeforeUpdateOrderStatus(ptr){
      ptr.id=ptr.temp_id;
    }

    /*pickup_status*/
    function apGetPickupStatus(){
      $("#div_object_name").html("<h2>"+getMessage(fa.language,10113)+"</h2>");
      $("#div_form_search").hide();
      $("#div_message").empty();
      $("#text_error_message").empty();
      $("#table_body").empty();$("#table_head").empty();
      if(curr_object_name!=='PickupStatus'){
        apClearSearch();
        PAGE_SET=0;PAGE_CURR=0;PAGE_COUNT=5;/*five pages in*/
        $("#div_pages").hide();
      }
      curr_object_name='PickupStatus';
      curr_object_list='fa.pickup_status_list';
      PAGE_ROWS=rows_count;
      fa.offset=PAGE_SET*PAGE_COUNT*PAGE_ROWS+PAGE_CURR*PAGE_ROWS;fa.rows=PAGE_ROWS;
      $("#search").attr("placeholder",getMessage(fa.language,20005));
      var obj_type=new faObjectType();
      obj_type.id="%";
      if(search!==null&&search!=='')obj_type.name="%"+search+"%";
      fa.pickup_status_list.length=0;
      fa.getPickupStatus(obj_type,fa.language,"#text_error_message",apAfter);
      fa.offset=null;fa.rows=null;
      fa.language_list.length=0;
      fa.getLanguage("#text_error_message",null);
      $(document).one("ajaxStop",function(){
        apShowPickupStatus();
      });
      $("#div_buttons").show();
    }
    function apShowPickupStatus(){
      var h;
      if(fa.pickup_status_list.length>0){
        h=faParsePattern(fa.pickup_status_list,
        '<tr id="%%id%%"><td>%%id%%</td>'+
        '<td><input type="text" onchange="apUpdateInput(%%id%%,this);" name="name" value="%%name%%"></td>'+
        '<td><select options="fa.language_list" onchange="apUpdateSelect(%%id%%,this);" name="language" option_selected="%%language%%" option_value="value" option_name="value"><option value=""></option></select></td>'+
        '<td>%%getTimesAgoFrom(toMySQLDatetimeMilisec(obj.last_update),fa.language)%%</td>'+
        '<td>%%parseAttrList(obj.attr_list)%%</td>'+
        '<td><button type="button" class="btn btn-primary btn-lg" title="Remove" onclick="apRemoveObject(%%id%%,\'pickup_status\',getData);">'+remove_icon+'</button></td>'+
        '<td><button type="button" class="btn btn-primary btn-lg" title="Update" onclick="apUpdateObject(%%id%%,getData);">'+update_icon+'</button></td>'+
        '</tr>');
        $("#table_body").html(h);
      }
      h="<tr id='tr_table_header'><th>Id</th><th>Name</th><th>Language</th><th>Last update</th><th>Attr</th><th>Remove</th><th>Update</th></tr>";
      $("#table_head").html(h);
      updateTableHeader(fa.language);
    }
    function apAddPickupStatus(){
      var h=faParsePattern(null,
      '<tr id="'+temp_id+'">'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="temp_id" value=""></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="name" value=""></td>'+
      '<td><select options="fa.language_list" onchange="apUpdateSelect('+temp_id+',this);" name="language" option_selected="" option_value="value" option_name="value"><option value=""></option></select></td>'+
      '<td>&ndash;</td>'+
      '<td>&ndash;</td>'+
      '<td><button type="button" class="btn btn-primary btn-lg" title="Remove" onclick="apRemoveEmptyId('+temp_id+');">'+remove_icon+'</button></td>'+
      '<td><button type="button" class="btn btn-primary btn-lg" title="Update" onclick="apUpdateObject('+temp_id+',getData,apBeforeUpdatePickupStatus);">'+update_icon+'</button></td>'+
      '</tr>');
      $("#table_body").append(h);

      var obj_type=new faObjectType();
      obj_type.id=temp_id;
      fa.pickup_status_list.push(obj_type);

      temp_id--;
    }
    function apBeforeUpdatePickupStatus(ptr){
      ptr.id=ptr.temp_id;
    }

    /*product_param*/
    function apGetProductParam(){
      $("#div_object_name").html("<h2>"+getMessage(fa.language,10110)+"</h2>");
      $("#div_form_search").hide();
      $("#div_message").empty();
      $("#text_error_message").empty();
      $("#table_body").empty();$("#table_head").empty();
      if(curr_object_name!=='ProductParam'){
        apClearSearch();
        PAGE_SET=0;PAGE_CURR=0;PAGE_COUNT=5;/*five pages in*/
        $("#div_pages").hide();
      }
      curr_picture_function='product_param';
      curr_object_name='ProductParam';
      curr_object_list='fa.product_param_list';
      PAGE_ROWS=rows_count;
      fa.offset=PAGE_SET*PAGE_COUNT*PAGE_ROWS+PAGE_CURR*PAGE_ROWS;fa.rows=PAGE_ROWS;
      $("#search").attr("placeholder",getMessage(fa.language,20005));
      var product_param=new faProductParam();
      product_param.id="%";
      if(search!==null&&search!=='')product_param.name="%"+search+"%";
      fa.product_param_list.length=0;
      fa.getProductParam(product_param,fa.language,"#text_error_message",apAfter);
      fa.offset=null;fa.rows=null;
      fa.language_list.length=0;
      fa.getLanguage("#text_error_message",null);
      $(document).one("ajaxStop",function(){
        apShowProductParam();
        /*pictures*/
        if(fa.product_param_list.length>0){
          var j,product_param;
          for(j=0;j<fa.product_param_list.length;j++){
            product_param=fa.product_param_list[j];
            fa.getPicture(product_param,product_param.id,curr_picture_function,null,apAfterPicture,product_param);
          }
        }
      });
      $("#div_buttons").show();
    }
    function apShowProductParam(){
      var h;
      if(fa.product_param_list.length>0){
        h=faParsePattern(fa.product_param_list,
        '<tr id="%%id%%"><td>%%id%%</td>'+
        '<td><img id="img_picture_%%id%%" onclick="apPictureClick(%%id%%);" src="'+picture_do_not_disturb+'" class="img-rounded" style="width: 100%; display: inline;" alt="PICTURE"></td>'+
        '<td><input type="text" onchange="apUpdateInput(%%id%%,this);" name="parent_id" value="%%parent_id%%"></td>'+
        '<td><input type="text" onchange="apUpdateInput(%%id%%,this);" name="name" value="%%name%%"></td>'+
        '<td><input type="text" onchange="apUpdateInput(%%id%%,this);" name="value" value="%%value%%"></td>'+
        '<td><select options="fa.language_list" onchange="apUpdateSelect(%%id%%,this);" name="language" option_selected="%%language%%" option_value="value" option_name="value"><option value=""></option></select></td>'+
        ' <td>%%getTimesAgoFrom(toMySQLDatetimeMilisec(obj.last_update),fa.language)%%</td>'+
        '<td>%%parseAttrList(obj.attr_list)%%</td>'+
        '<td><button type="button" class="btn btn-primary btn-lg" title="Remove" onclick="apRemoveObject(%%id%%,\'product_param\',getData);">'+remove_icon+'</button></td>'+
        '<td><button type="button" class="btn btn-primary btn-lg" title="Update" onclick="apUpdateObject(%%id%%,getData,apBeforeUpdateProductParam);">'+update_icon+'</button></td>'+
        '</tr>');
        $("#table_body").html(h);
      }
      h="<tr id='tr_table_header'><th>Id</th><th>Picture</th><th>ParentId</th><th>Name</th><th>Value</th><th>Language</th><th>Last update</th><th>Attr</th><th>Remove</th><th>Update</th></tr>";
      $("#table_head").html(h);
      updateTableHeader(fa.language);
    }
    function apAddProductParam(){
      var h=faParsePattern(null,
      '<tr id="'+temp_id+'"><td>&ndash;</td>'+
      '<td>&ndash;</td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="parent_id" value=""></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="name" value=""></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="value" value=""></td>'+
      '<td><select options="fa.language_list" onchange="apUpdateSelect('+temp_id+',this);" name="language" option_selected="" option_value="value" option_name="value"><option value=""></option></select></td>'+
      '<td>&ndash;</td>'+
      '<td>&ndash;</td>'+
      '<td><button type="button" class="btn btn-primary btn-lg" title="Remove" onclick="apRemoveEmptyId('+temp_id+');">'+remove_icon+'</button></td>'+
      '<td><button type="button" class="btn btn-primary btn-lg" title="Update" onclick="apUpdateObject('+temp_id+',getData,apBeforeUpdateProductParam);">'+update_icon+'</button></td>'+
      '</tr>');
      $("#table_body").append(h);

      var product_param=new faProductParam();
      product_param.id=temp_id;
      fa.product_param_list.push(product_param);

      temp_id--;
    }
    function apBeforeUpdateProductParam(ptr){
      if(ptr.parent_id===null||ptr.parent_id==='')ptr.parent_id=-1;
    }

    /*product_type*/
    function apGetProductType(){
      $("#div_object_name").html("<h2>"+getMessage(fa.language,10111)+"</h2>");
      $("#div_form_search").hide();
      $("#div_message").empty();
      $("#text_error_message").empty();
      $("#table_body").empty();$("#table_head").empty();
      if(curr_object_name!=='ProductType'){
        apClearSearch();
        PAGE_SET=0;PAGE_CURR=0;PAGE_COUNT=5;/*five pages in*/
        $("#div_pages").hide();
      }
      curr_object_name='ProductType';
      curr_object_list='fa.product_type_list';
      PAGE_ROWS=rows_count;
      fa.offset=PAGE_SET*PAGE_COUNT*PAGE_ROWS+PAGE_CURR*PAGE_ROWS;fa.rows=PAGE_ROWS;
      $("#search").attr("placeholder",getMessage(fa.language,20005));
      var obj_type=new faObjectTypeExt();
      obj_type.id="%";
      if(search!==null&&search!=='')obj_type.name="%"+search+"%";
      fa.product_type_list.length=0;
      fa.getProductType(obj_type,fa.language,"#text_error_message",apAfter);
      fa.offset=null;fa.rows=null;
      fa.language_list.length=0;
      fa.getLanguage("#text_error_message",null);
      $(document).one("ajaxStop",function(){
        apShowProductType();
      });
      $("#div_buttons").show();
    }
    function apShowProductType(){
      var h;
      if(fa.product_type_list.length>0){
        h=faParsePattern(fa.product_type_list,
        '<tr id="%%id%%"><td>%%id%%</td>'+
        '<td><input type="text" onchange="apUpdateInput(%%id%%,this);" name="parent_id" value="%%parent_id%%"></td>'+
        '<td><input type="text" onchange="apUpdateInput(%%id%%,this);" name="name" value="%%name%%"></td>'+
        '<td><input type="text" onchange="apUpdateInput(%%id%%,this);" name="description" value="%%description%%"></td>'+
        '<td><select options="fa.language_list" onchange="apUpdateSelect(%%id%%,this);" name="language" option_selected="%%language%%" option_value="value" option_name="value"><option value=""></option></select></td>'+
        '<td>%%getTimesAgoFrom(toMySQLDatetimeMilisec(obj.last_update),fa.language)%%</td>'+
        '<td>%%parseAttrList(obj.attr_list)%%</td>'+
        '<td><button type="button" class="btn btn-primary btn-lg" title="Remove" onclick="apRemoveObject(%%id%%,\'product_type\',getData);">'+remove_icon+'</button></td>'+
        '<td><button type="button" class="btn btn-primary btn-lg" title="Update" onclick="apUpdateObject(%%id%%,getData,apBeforeUpdateProductType);">'+update_icon+'</button></td>'+
        '</tr>');
        $("#table_body").html(h);
      }
      h="<tr id='tr_table_header'><th>Id</th><th>ParentId</th><th>Name</th><th>Description</th><th>Language</th><th>Last update</th><th>Attr</th><th>Remove</th><th>Update</th></tr>";
      $("#table_head").html(h);
      updateTableHeader(fa.language);
    }
    function apAddProductType(){
      var h=faParsePattern(null,
      '<tr id="'+temp_id+'"><td>&ndash;</td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="parent_id" value=""></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="name" value=""></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="description" value=""></td>'+
      '<td><select options="fa.language_list" onchange="apUpdateSelect('+temp_id+',this);" name="language" option_selected="" option_value="value" option_name="value"><option value=""></option></select></td>'+
      '<td>&ndash;</td>'+
      '<td>&ndash;</td>'+
      '<td><button type="button" class="btn btn-primary btn-lg" title="Remove" onclick="apRemoveEmptyId('+temp_id+');">'+remove_icon+'</button></td>'+
      '<td><button type="button" class="btn btn-primary btn-lg" title="Update" onclick="apUpdateObject('+temp_id+',getData,apBeforeUpdateProductType);">'+update_icon+'</button></td>'+
      '</tr>');
      $("#table_body").append(h);

      var obj_type=new faObjectTypeExt();
      obj_type.id=temp_id;
      fa.product_type_list.push(obj_type);

      temp_id--;
    }
    function apBeforeUpdateProductType(ptr){
      if(ptr.parent_id===null||ptr.parent_id==='')ptr.parent_id=-1;
    }

    /*transport_type*/
    function apGetTransportType(){
      $("#div_object_name").html("<h2>"+getMessage(fa.language,10112)+"</h2>");
      $("#div_form_search").hide();
      $("#div_message").empty();
      $("#text_error_message").empty();
      $("#table_body").empty();$("#table_head").empty();
      if(curr_object_name!=='TransportType'){
        apClearSearch();
        PAGE_SET=0;PAGE_CURR=0;PAGE_COUNT=5;/*five pages in*/
        $("#div_pages").hide();
      }
      curr_object_name='TransportType';
      curr_object_list='fa.transport_type_list';
      PAGE_ROWS=rows_count;
      fa.offset=PAGE_SET*PAGE_COUNT*PAGE_ROWS+PAGE_CURR*PAGE_ROWS;fa.rows=PAGE_ROWS;
      $("#search").attr("placeholder",getMessage(fa.language,20005));
      var obj_type=new faObjectTypeExt();
      obj_type.id="%";
      if(search!==null&&search!=='')obj_type.name="%"+search+"%";
      fa.transport_type_list.length=0;
      fa.getTransportType(obj_type,fa.language,"#text_error_message",apAfter);
      fa.offset=null;fa.rows=null;
      fa.language_list.length=0;
      fa.getLanguage("#text_error_message",null);
      $(document).one("ajaxStop",function(){
        apShowTransportType();
      });
      $("#div_buttons").show();
    }
    function apShowTransportType(){
      var h;
      if(fa.transport_type_list.length>0){
        h=faParsePattern(fa.transport_type_list,
        '<tr id="%%id%%"><td>%%id%%</td>'+
        '<td><input type="text" onchange="apUpdateInput(%%id%%,this);" name="parent_id" value="%%parent_id%%"></td>'+
        '<td><input type="text" onchange="apUpdateInput(%%id%%,this);" name="name" value="%%name%%"></td>'+
        '<td><input type="text" onchange="apUpdateInput(%%id%%,this);" name="description" value="%%description%%"></td>'+
        '<td><select options="fa.language_list" onchange="apUpdateSelect(%%id%%,this);" name="language" option_selected="%%language%%" option_value="value" option_name="value"><option value=""></option></select></td>'+
        '<td>%%getTimesAgoFrom(toMySQLDatetimeMilisec(obj.last_update),fa.language)%%</td>'+
        '<td>%%parseAttrList(obj.attr_list)%%</td>'+
        '<td><button type="button" class="btn btn-primary btn-lg" title="Remove" onclick="apRemoveObject(%%id%%,\'transport_type\',getData);">'+remove_icon+'</button></td>'+
        '<td><button type="button" class="btn btn-primary btn-lg" title="Update" onclick="apUpdateObject(%%id%%,getData,apBeforeUpdateTransportType);">'+update_icon+'</button></td>'+
        '</tr>');
        $("#table_body").html(h);
      }
      h="<tr id='tr_table_header'><th>Id</th><th>ParentId</th><th>Name</th><th>Description</th><th>Language</th><th>Last update</th><th>Attr</th><th>Remove</th><th>Update</th></tr>";
      $("#table_head").html(h);
      updateTableHeader(fa.language);
    }
    function apAddTransportType(){
      var h=faParsePattern(null,
      '<tr id="'+temp_id+'"><td>&ndash;</td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="parent_id" value=""></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="name" value=""></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="description" value=""></td>'+
      '<td><select options="fa.language_list" onchange="apUpdateSelect('+temp_id+',this);" name="language" option_selected="" option_value="value" option_name="value"><option value=""></option></select></td>'+
      '<td>&ndash;</td>'+
      '<td>&ndash;</td>'+
      '<td><button type="button" class="btn btn-primary btn-lg" title="Remove" onclick="apRemoveEmptyId('+temp_id+');">'+remove_icon+'</button></td>'+
      '<td><button type="button" class="btn btn-primary btn-lg" title="Update" onclick="apUpdateObject('+temp_id+',getData,apBeforeUpdateTransportType);">'+update_icon+'</button></td>'+
      '</tr>');
      $("#table_body").append(h);

      var obj_type=new faObjectTypeExt();
      obj_type.id=temp_id;
      fa.transport_type_list.push(obj_type);

      temp_id--;
    }
    function apBeforeUpdateTransportType(ptr){
      if(ptr.parent_id===null||ptr.parent_id==='')ptr.parent_id=-1;
    }

    /*transport_type_part*/
    function apGetTransportTypePart(){
      $("#div_object_name").html("<h2>"+getMessage(fa.language,10004)+"</h2>");
      $("#div_form_search").hide();
      $("#div_message").empty();
      $("#text_error_message").empty();
      $("#table_body").empty();$("#table_head").empty();
      if(curr_object_name!=='TransportTypePart'){
        apClearSearch();
        PAGE_SET=0;PAGE_CURR=0;PAGE_COUNT=5;/*five pages in*/
        $("#div_pages").hide();
      }
      curr_object_name='TransportTypePart';
      curr_object_list='fa.transport_type_part_list';
      PAGE_ROWS=rows_count;
      fa.offset=PAGE_SET*PAGE_COUNT*PAGE_ROWS+PAGE_CURR*PAGE_ROWS;fa.rows=PAGE_ROWS;
      $("#search").attr("placeholder",getMessage(fa.language,20005));
      var obj_type=new faObjectTypeExt();
      obj_type.id="%";
      if(search!==null&&search!=='')obj_type.name="%"+search+"%";
      fa.transport_type_part_list.length=0;
      fa.getTransportTypePart(obj_type,fa.language,"#text_error_message",apAfter);
      fa.offset=null;fa.rows=null;
      var transport=new faTransport();
      transport.id="%";
      fa.transport_list.length=0;
      fa.getTransport(transport,fa.language,"#text_error_message",null);
      obj_type=new faObjectTypeExt();
      obj_type.id="%";
      fa.transport_type_list.length=0;
      fa.getTransportType(obj_type,fa.language,"#text_error_message",null);
      $(document).one("ajaxStop",function(){
        apShowTransportTypePart();
      });
      $("#div_buttons").show();
    }
    function apShowTransportTypePart(){
      var h;
      if(fa.transport_type_part_list.length>0){
        h=faParsePattern(fa.transport_type_part_list,
        '<tr id="%%transport_id%%%%transport_type_id%%">'+
        '<td>%%transport_id%%</td>'+
        '<td><select disabled options="fa.transport_list" onchange="apUpdateSelect(%%id%%,this);" name="transport_id" option_selected="%%transport_id%%" option_value="id" option_name="obj.name+\' \'+obj.license_plate+\' (\'+obj.id+\')\'"><option value=""></option></select></td>'+
        '<td>%%transport_type_id%%</td>'+
        '<td><select disabled options="fa.transport_type_list" name="transport_type_id" option_selected="%%transport_type_id%%" option_value="id" option_name="obj.name+\' [\'+parseAttrList(obj.attr_list)+\']\'"><option value=""></option></select>'+
        '<td>%%getTimesAgoFrom(toMySQLDatetimeMilisec(obj.last_update),fa.language)%%</td>'+
        '<td><button type="button" class="btn btn-primary btn-lg" title="Remove" onclick="apRemoveTransportTypePart(%%transport_id%%,%%transport_type_id%%,getData);">'+remove_icon+'</button></td>'+
        '<td>&ndash;</td>'+
        '</tr>');
        $("#table_body").html(h);
      }
      h="<tr id='tr_table_header'><th>TransportId</th><th>Transport</th><th>TypeId</th><th>Transport type</th><th>Last update</th><th>Remove</th><th>Update</th></tr>";
      $("#table_head").html(h);
      updateTableHeader(fa.language);
    }
    function apAddTransportTypePart(){
      var h=faParsePattern(null,
      '<tr id="'+temp_id+'">'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="transport_id" value=""></td>'+
      '<td><select options="fa.transport_list" onchange="apUpdateSelect('+temp_id+',this);" name="transport_id" option_selected="%%transport_id%%" option_value="id" option_name="obj.name+\' \'+obj.license_plate+\' (\'+obj.id+\')\'"><option value=""></option></select></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="transport_type_id" value=""></td>'+
      '<td><select options="fa.transport_type_list" onchange="apUpdateSelect('+temp_id+',this);" name="transport_type_id" option_selected="" option_value="id" option_name="obj.name+\' [\'+parseAttrList(obj.attr_list)+\']\'"><option value=""></option></select></td>'+
      '<td>&ndash;</td>'+
      '<td><button type="button" class="btn btn-primary btn-lg" title="Remove" onclick="apRemoveEmptyId('+temp_id+');">'+remove_icon+'</button></td>'+
      '<td><button type="button" class="btn btn-primary btn-lg" title="Update" onclick="apUpdateTransportTypePart('+temp_id+',getData);">'+update_icon+'</button></td>'+
      '</tr>');
      $("#table_body").append(h);

      var transport_type_part=new faTransportTypePart();
      transport_type_part.id=temp_id;
      fa.transport_type_part_list.push(transport_type_part);

      temp_id--;
    }
    function apRemoveTransportTypePart(transport_id,type_id,callback){
      fa.removeTransportTypePart(transport_id,type_id,"#text_error_message",callback);
    }
    function apUpdateTransportTypePart(object_id,callback){
      var obj=apFindObjectById(curr_object_list,object_id);
      if(obj){
        fa.addTransportTypePart(obj.transport_id,obj.transport_type_id,"#text_error_message",callback);
      }
    }

    /*Users And Features*/

    /*user*/
    function apGetUser(){
      $("#div_object_name").html("<h2>"+getMessage(fa.language,10002)+"</h2>");
      $("#div_form_search").hide();
      $("#div_message").empty();
      $("#text_error_message").empty();
      $("#table_body").empty();$("#table_head").empty();
      if(curr_object_name!=='User'){
        apClearSearch();
        PAGE_SET=0;PAGE_CURR=0;PAGE_COUNT=5;/*five pages in*/
        $("#div_pages").hide();
      }
      curr_picture_function="user";
      curr_object_name='User';
      curr_object_list='fa.user_list';
      PAGE_ROWS=rows_count;
      fa.offset=PAGE_SET*PAGE_COUNT*PAGE_ROWS+PAGE_CURR*PAGE_ROWS;fa.rows=PAGE_ROWS;
      $("#search").attr("placeholder",getMessage(fa.language,20022));
      var user=new faUser();
      user.username="%";
      if(search!==null&&search!=='')user.call_name="%"+search+"%";
      if(search_id!==null&&search_id!=='')user.id=search_id;
      if(search_date!==null&&search_date!=='')user.create_date="%"+search_date+"%";
      if(search_name1!==null&&search_name1!=='')user.username="%"+search_name1+"%";
      if(search_name2!==null&&search_name2!=='')user.first_name="%"+search_name2+"%";
      if(search_name3!==null&&search_name3!=='')user.last_name="%"+search_name3+"%";
      fa.user_list.length=0;
      fa.getUser(user,fa.language,"#text_error_message",apAfter);
      fa.offset=null;fa.rows=null;
      var discount=new faDiscount();
      discount.code="%";
      fa.discount_list.length=0;
      fa.getDiscount(discount,fa.language,"#text_error_message",null);
      $(document).one("ajaxStop",function(){
        apShowUser();
        /*create search form*/
        apSearchForm("Id",getMessage(fa.language,20025),getMessage(fa.language,20017),getMessage(fa.language,20020),getMessage(fa.language,20021),null,null);
        /*pictures*/
        if(fa.user_list.length>0){
          var j,user;
          for(j=0;j<fa.user_list.length;j++){
            user=fa.user_list[j];
            fa.getPicture(user,user.id,curr_picture_function,null,apAfterPicture,user);
          }
        }
      });
      $("#div_buttons").show();
    }
    function apShowUser(){
      fa.usertype_list.length=0;
      var usertype;
      usertype=new faObjectType();
      usertype.id=USER_TYPE_ADMIN;
      usertype.name=getMessage(fa.language,1);
      fa.usertype_list.push(usertype);
      usertype=new faObjectType();
      usertype.id=USER_TYPE_WORKER;
      usertype.name=getMessage(fa.language,2);
      fa.usertype_list.push(usertype);
      usertype=new faObjectType();
      usertype.id=USER_TYPE_CUSTOMER;
      usertype.name=getMessage(fa.language,3);
      fa.usertype_list.push(usertype);

      var h;
      if(fa.user_list.length>0){
        h=faParsePattern(fa.user_list,
        '<tr id="%%id%%"><td>%%id%%</td>'+
        '<td><img id="img_picture_%%id%%" onclick="apPictureClick(%%id%%);" src="'+picture_do_not_disturb+'" class="img-rounded" style="width: 100%; display: inline;" alt="PICTURE"></td>'+
        '<td>%%username%%</td>'+
        '<td><select options="fa.usertype_list" onchange="apUpdateSelect(%%id%%,this);" name="type" option_selected="%%type%%" option_value="id" option_name="name"><option value=""></option></select></td>'+
        '<td><select options="fa.discount_list" onchange="apUpdateSelect(%%id%%,this);" name="discount_code" option_selected="%%discount_code%%" option_value="code" option_name="code"><option value=""></option></select></td>'+
        '<td><input type="text" onchange="apUpdateInput(%%id%%,this);" name="first_name" value="%%first_name%%"></td>'+
        '<td><input type="text" onchange="apUpdateInput(%%id%%,this);" name="last_name" value="%%last_name%%"></td>'+
        '<td><input type="text" onchange="apUpdateInput(%%id%%,this);" name="call_name" value="%%call_name%%"></td>'+
        '<td><input type="text" onchange="apUpdateInput(%%id%%,this);" name="email" value="%%email%%"></td>'+
        '<td><input type="text" onchange="apUpdateInput(%%id%%,this);" name="phone" value="%%phone%%"></td>'+
        '<td><input type="text" onchange="apUpdateInput(%%id%%,this);" name="prepaid_amount" value="%%prepaid_amount%%"></td>'+
        '<td><div class="form-group"><div class="checkbox"><input type="checkbox" onchange="apUpdateCheckbox(%%id%%,this);" %%apChecked(obj.active)%% name="active" value="%%active%%" id="input_activity_%%id%%"><label id="label_activity" for="input_activity_%%id%%"><span></span></label></div></div></td>'+
        '<td>%%fromMySQLDatetimeString(obj.create_date)%%</td>'+
        '<td>%%getTimesAgoFrom(toMySQLDatetimeMilisec(obj.last_update),fa.language)%%</td>'+
        '<td><button type="button" class="btn btn-primary btn-lg" title="Remove" onclick="apRemoveObject(%%id%%,\'user\',getData);">'+remove_icon+'</button></td>'+
        '<td><button type="button" class="btn btn-primary btn-lg" title="Update" onclick="apUpdateObject(%%id%%,apAfterUpdateUser);">'+update_icon+'</button></td>'+
        '</tr>');
        $("#table_body").html(h);
      }
      h="<tr id='tr_table_header'><th>Id</th><th>Picture</th><th>Username</th><th>Type</th><th>Discount</th><th>Firstname</th><th>Lastname</th><th>Callname</th><th>Email</th><th>Phone</th><th>Prepaid amount</th><th>Activity</th><th>Create date</th><th>Last update</th><th>Remove</th><th>Update</th></tr>";
      $("#table_head").html(h);
      updateTableHeader(fa.language);
    }
    function apAddUser(){
      var h=faParsePattern(null,
      '<tr id="'+temp_id+'"><td>&ndash;</td>'+
      '<td>&ndash;</td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="username" value=""></td>'+
      '<td><select options="fa.usertype_list" onchange="apUpdateSelect('+temp_id+',this);" name="type" option_selected="" option_value="id" option_name="name"><option value=""></option></select></td>'+
      '<td><select options="fa.discount_list" onchange="apUpdateSelect('+temp_id+',this);" name="discount_code" option_selected="" option_value="code" option_name="code"><option value=""></option></select></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="first_name" value=""></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="last_name" value=""></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="call_name" value=""></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="email" value=""></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="phone" value=""></td>'+
      '<td>0.00</td>'+
      '<td><div class="form-group"><div class="checkbox"><input type="checkbox" onchange="apUpdateCheckbox('+temp_id+',this);" name="active" value="" id="input_activity_'+temp_id+'"><label id="label_activity" for="input_activity_'+temp_id+'"><span></span></label></div></div></td>'+
      '<td>&ndash;</td>'+
      '<td>&ndash;</td>'+
      '<td><button type="button" class="btn btn-primary btn-lg" title="Remove" onclick="apRemoveEmptyId('+temp_id+');">'+remove_icon+'</button></td>'+
      '<td><button type="button" class="btn btn-primary btn-lg" title="Update" onclick="apUpdateObject('+temp_id+',apAfterUpdateUser);">'+update_icon+'</button></td>'+
      '</tr>');
      $("#table_body").append(h);

      var user=new faUser();
      user.id=temp_id;
      fa.user_list.push(user);

      temp_id--;
    }
    function apAfterUpdateUser(ptr){
      var list=fa.ret_val_list;
      if(list.length>0){
        var ret_val=list[list.length-1];
        if(ret_val.status==="ERROR"){
        }
        else if(ret_val.status==="SUCCESS"){
          if(ptr.id===null||parseInt(ptr.id)<temp_value){/*replace id*/
            ptr.id=ret_val.value;
          }
          if(ptr.active===null)ptr.active=0;
          fa.updateUserDiscount(ptr.id,ptr.discount_code,"#text_error_message",null);
          fa.updateUserActivity(ptr.id,ptr.active,"#text_error_message",null);
          fa.updateUserPrepaidAmount(ptr.id,ptr.prepaid_amount,"#text_error_message",null);
          $(document).one("ajaxStop",function(){
            getData();
          });
        }
      }
    }

    /*transport*/
    function apGetTransport(){
      $("#div_object_name").html("<h2>"+getMessage(fa.language,10003)+"</h2>");
      $("#div_form_search").hide();
      $("#div_message").empty();
      $("#text_error_message").empty();
      $("#table_body").empty();$("#table_head").empty();
      if(curr_object_name!=='Transport'){
        apClearSearch();
        PAGE_SET=0;PAGE_CURR=0;PAGE_COUNT=5;/*five pages in*/
        $("#div_pages").hide();
      }
      curr_picture_function='transport';
      curr_object_name='Transport';
      curr_object_list='fa.transport_list';
      PAGE_ROWS=rows_count;
      fa.offset=PAGE_SET*PAGE_COUNT*PAGE_ROWS+PAGE_CURR*PAGE_ROWS;fa.rows=PAGE_ROWS;
      $("#search").attr("placeholder",getMessage(fa.language,20005));
      var transport=new faTransport();
      transport.id="%";
      if(search!==null&&search!=='')transport.name="%"+search+"%";
      fa.transport_list.length=0;
      fa.getTransport(transport,fa.language,"#text_error_message",apAfter);
      fa.offset=null;fa.rows=null;
      fa.color_list.length=0;
      fa.getColor("#text_error_message",null);
      $(document).one("ajaxStop",function(){
        apShowTransport();
        /*pictures*/
        if(fa.transport_list.length>0){
          var j,transport;
          for(j=0;j<fa.transport_list.length;j++){
            transport=fa.transport_list[j];
            fa.getPicture(transport,transport.id,curr_picture_function,null,apAfterPicture,transport);
          }
        }
      });
      $("#div_buttons").show();
    }
    function apShowTransport(){
      var h;
      if(fa.transport_list.length>0){
        h=faParsePattern(fa.transport_list,
        '<tr id="%%id%%"><td>%%id%%</td>'+
        '<td><img id="img_picture_%%id%%" onclick="apPictureClick(%%id%%);" src="'+picture_do_not_disturb+'" class="img-rounded" style="width: 100%; display: inline;" alt="PICTURE"></td>'+
        '<td>%%rate%%</td>'+
        '<td><input type="text" onchange="apUpdateInput(%%id%%,this);" name="name" value="%%name%%"></td>'+
        '<td><select options="fa.color_list" onchange="apUpdateSelect(%%id%%,this);" name="color" option_selected="%%obj.color.toUpperCase()%%" option_value="name" option_name="name"><option value=""></option></select></td>'+
        '<td><input type="text" onchange="apUpdateInput(%%id%%,this);" name="license_plate" value="%%license_plate%%"></td>'+
        '<td>%%obj.sensor?obj.sensor.name+\' (\'+obj.sensor.id+\')\':\'&ndash;\'%%</td>'+
        '<td><div class="form-group"><div class="checkbox"><input type="checkbox" %%apChecked(obj.sensor_active)%% disabled name="" id="input_activity_%%id%%"><label id="label_activity" for="input_activity_%%id%%"><span></span></label></div></div></td>'+
        '<td>%%getTimesAgoFrom(toMySQLDatetimeMilisec(obj.last_update),fa.language)%%</td>'+
        '<td><button type="button" class="btn btn-primary btn-lg" title="Remove" onclick="apRemoveObject(%%id%%,\'transport\',getData);">'+remove_icon+'</button></td>'+
        '<td><button type="button" class="btn btn-primary btn-lg" title="Update" onclick="apUpdateObject(%%id%%,getData,apBeforeUpdateTransport);">'+update_icon+'</button></td>'+
        '</tr>');
        $("#table_body").html(h);
      }
      h="<tr id='tr_table_header'><th>Id</th><th>Picture</th><th>Rate</th><th>Name</th><th>Color</th><th>License plate</th><th>Sensor(Id)</th><th>Activity</th><th>Last update</th><th>Remove</th><th>Update</th></tr>";
      $("#table_head").html(h);
      updateTableHeader(fa.language);
    }
    function apAddTransport(){
      var h=faParsePattern(null,
      '<tr id="'+temp_id+'"><td>&ndash;</td>'+
      '<td>&ndash;</td>'+
      '<td>&ndash;</td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="name" value=""></td>'+
      '<td><select options="fa.color_list" onchange="apUpdateSelect('+temp_id+',this);" name="color" option_selected="" option_value="name" option_name="name"><option value=""></option></select></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="license_plate" value=""></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="sensor_id" value=""></td>'+
      '<td>&ndash;</td>'+
      '<td>&ndash;</td>'+
      '<td><button type="button" class="btn btn-primary btn-lg" title="Remove" onclick="apRemoveEmptyId('+temp_id+');">'+remove_icon+'</button></td>'+
      '<td><button type="button" class="btn btn-primary btn-lg" title="Update" onclick="apUpdateObject('+temp_id+',getData,apBeforeUpdateTransport);">'+update_icon+'</button></td>'+
      '</tr>');
      $("#table_body").append(h);

      var transport=new faTransport();
      transport.id=temp_id;
      fa.transport_list.push(transport);

      temp_id--;
    }
    function apBeforeUpdateTransport(ptr){
      if(ptr.sensor_id===null||ptr.sensor_id==='')ptr.sensor_id=-1;
    }

    /*sensor*/
    function apGetSensor(){
      $("#div_object_name").html("<h2>"+getMessage(fa.language,10005)+"</h2>");
      $("#div_form_search").hide();
      $("#div_message").empty();
      $("#text_error_message").empty();
      $("#table_body").empty();$("#table_head").empty();
      if(curr_object_name!=='Sensor'){
        apClearSearch();
        PAGE_SET=0;PAGE_CURR=0;PAGE_COUNT=5;/*five pages in*/
        $("#div_pages").hide();
      }
      curr_object_name='Sensor';
      curr_object_list='fa.sensor_list';
      PAGE_ROWS=rows_count;
      fa.offset=PAGE_SET*PAGE_COUNT*PAGE_ROWS+PAGE_CURR*PAGE_ROWS;fa.rows=PAGE_ROWS;
      $("#search").attr("placeholder",getMessage(fa.language,20005));
      var sensor=new faSensor();
      if(search!==null&&search!=='')sensor.name="%"+search+"%";
      fa.sensor_list.length=0;
      fa.getSensor(sensor,fa.language,"#text_error_message",apAfter);
      $(document).one("ajaxStop",function(){
        apShowSensor();
      });
      $("#div_buttons").show();
    }
    function apShowSensor(){
      var h;
      if(fa.sensor_list.length>0){
        h=faParsePattern(fa.sensor_list,
        '<tr id="%%id%%"><td>%%id%%</td>'+
        '<td><input type="text" onchange="apUpdateInput(%%id%%,this);" name="name" value="%%name%%"></td>'+
        '<td><input type="text" onchange="apUpdateInput(%%id%%,this);" name="serial_number" value="%%serial_number%%"></td>'+
        '<td><input type="text" onchange="apUpdateInput(%%id%%,this);" name="device_name" value="%%device_name%%"></td>'+
        '<td><input type="text" onchange="apUpdateInput(%%id%%,this);" name="phone" value="%%phone%%"></td>'+
        '<td>%%obj.user?obj.user.call_name+\' (\'+obj.user.id+\')\':\'&ndash;\'%%</td>'+
        '<td><div class="form-group"><div class="checkbox"><input type="checkbox" onchange="apUpdateCheckbox(%%id%%,this);" %%apChecked(obj.active)%% name="active" value="%%active%%" id="input_activity_%%id%%"><label id="label_activity" for="input_activity_%%id%%"><span></span></label></div></div></td>'+
        '<td>%%fromMySQLDatetimeString(obj.create_date)%%</td>'+
        '<td>%%getTimesAgoFrom(toMySQLDatetimeMilisec(obj.last_update),fa.language)%%</td>'+
        '<td><button type="button" class="btn btn-primary btn-lg" title="Remove" onclick="apRemoveObject(%%id%%,\'sensor\',getData);">'+remove_icon+'</button></td>'+
        '<td><button type="button" class="btn btn-primary btn-lg" title="Update" onclick="apUpdateObject(%%id%%,apAfterUpdateSensor,apBeforeUpdateSensor);">'+update_icon+'</button></td>'+
        '</tr>');
        $("#table_body").html(h);
      }
      h="<tr id='tr_table_header'><th>Id</th><th>Name</th><th>Serial number</th><th>Device name</th><th>Phone</th><th>User(Id)</th><th>Activity</th><th>Create date</th><th>Last update</th><th>Remove</th><th>Update</th></tr>";
      $("#table_head").html(h);
      updateTableHeader(fa.language);
    }
    function apAddSensor(){
      var h=faParsePattern(null,
      '<tr id="'+temp_id+'"><td>&ndash;</td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="name" value=""></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="serial_number" value=""></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="device_name" value=""></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="phone" value=""></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="user_id" value=""></td>'+
      '<td><div class="form-group"><div class="checkbox"><input type="checkbox" onchange="apUpdateCheckbox('+temp_id+',this);" name="active" value="" id="input_activity_'+temp_id+'"><label id="label_activity" for="input_activity_'+temp_id+'"><span></span></label></div></div></td>'+
      '<td>&ndash;</td>'+
      '<td>&ndash;</td>'+
      '<td><button type="button" class="btn btn-primary btn-lg" title="Remove" onclick="apRemoveEmptyId('+temp_id+');">'+remove_icon+'</button></td>'+
      '<td><button type="button" class="btn btn-primary btn-lg" title="Update" onclick="apUpdateObject('+temp_id+',apAfterUpdateSensor,apBeforeUpdateSensor);">'+update_icon+'</button></td>'+
      '</tr>');
      $("#table_body").append(h);

      var sensor=new faSensor();
      sensor.id=temp_id;
      fa.sensor_list.push(sensor);

      temp_id--;
    }
    function apBeforeUpdateSensor(ptr){
      if(ptr.user_id===null||ptr.user_id==='')ptr.user_id=-1;
    }
    function apAfterUpdateSensor(ptr){
      var list=fa.ret_val_list;
      if(list.length>0){
        var ret_val=list[list.length-1];
        if(ret_val.status==="ERROR"){
        }
        else if(ret_val.status==="SUCCESS"){
          if(ptr.id===null||parseInt(ptr.id)<temp_value){/*replace id*/
            ptr.id=ret_val.value;
          }
          if(ptr.active===null)ptr.active=0;
          fa.updateSensorActivity(ptr.id,ptr.active,"#text_error_message",getData);
        }
      }
    }

    /*discount*/
    function apGetDiscount(){
      $("#div_object_name").html("<h2>"+getMessage(fa.language,10006)+"</h2>");
      $("#div_form_search").hide();
      $("#div_message").empty();
      $("#text_error_message").empty();
      $("#table_body").empty();$("#table_head").empty();
      if(curr_object_name!=='Discount'){
        apClearSearch();
        PAGE_SET=0;PAGE_CURR=0;PAGE_COUNT=5;/*five pages in*/
        $("#div_pages").hide();
      }
      curr_object_name='Discount';
      curr_object_list='fa.discount_list';
      PAGE_ROWS=rows_count;
      fa.offset=PAGE_SET*PAGE_COUNT*PAGE_ROWS+PAGE_CURR*PAGE_ROWS;fa.rows=PAGE_ROWS;
      $("#search").attr("placeholder",getMessage(fa.language,20005));
      var discount=new faDiscount();
      discount.code="%";
      if(search!==null&&search!=='')discount.name="%"+search+"%";
      fa.discount_list.length=0;
      fa.getDiscount(discount,fa.language,"#text_error_message",apAfter);
      fa.offset=null;fa.rows=null;
      var obj_type=new faObjectTypeExt();
      obj_type.id="%";
      fa.product_type_list.length=0;
      fa.getProductType(obj_type,fa.language,"#text_error_message",null);
      fa.language_list.length=0;
      fa.getLanguage("#text_error_message",null);
      $(document).one("ajaxStop",function(){
        apShowDiscount();
      });
      $("#div_buttons").show();
    }
    function apShowDiscount(){
      fa.temp_list.length=0;
      var discount_type;
      discount_type=new faObjectType();
      discount_type.id=DISCOUNT_IN_PERCENT;
      discount_type.name=getMessage(fa.language,11);
      fa.temp_list.push(discount_type);
      discount_type=new faObjectType();
      discount_type.id=DISCOUNT_IN_VALUE;
      discount_type.name=getMessage(fa.language,12);
      fa.temp_list.push(discount_type);
      discount_type=new faObjectType();
      discount_type.id=INCREASE_IN_PERCENT;
      discount_type.name=getMessage(fa.language,13);
      fa.temp_list.push(discount_type);
      discount_type=new faObjectType();
      discount_type.id=INCREASE_IN_VALUE;
      discount_type.name=getMessage(fa.language,14);
      fa.temp_list.push(discount_type);

      var h;
      if(fa.discount_list.length>0){
        h=faParsePattern(fa.discount_list,
        '<tr id="%%id%%"><td>%%id%%</td>'+
        '<td><select options="fa.temp_list" onchange="apUpdateSelect(%%id%%,this);" name="type" option_selected="%%type%%" option_value="id" option_name="name"><option value=""></option></select></td>'+
        '<td><input type="text" onchange="apUpdateInput(%%id%%,this);" name="code" value="%%code%%"></td>'+
        '<td><input type="text" onchange="apUpdateInput(%%id%%,this);" name="name" value="%%name%%"></td>'+
        '<td><input type="text" onchange="apUpdateInput(%%id%%,this);" name="value" value="%%value%%"></td>'+
        '<td><select options="fa.language_list" onchange="apUpdateSelect(%%id%%,this);" name="language" option_selected="%%language%%" option_value="value" option_name="value"><option value=""></option></select></td>'+
        '<td><input type="text" onchange="apUpdateDate(%%id%%,this);" name="start_date" value="%%obj.start_date?fromMySQLDatetimeString(obj.start_date):\'\'%%"></td>'+
        '<td><input type="text" onchange="apUpdateDate(%%id%%,this);" name="finish_date" value="%%obj.finish_date?fromMySQLDatetimeString(obj.finish_date):\'\'%%"></td>'+
        '<td><select options="fa.product_type_list" onchange="apUpdateSelect(%%id%%,this);" name="product_type_id" option_selected="%%product_type_id%%" option_value="id" option_name="obj.name+\' [\'+parseAttrList(obj.attr_list)+\']\'"><option value=""></option></select></td>'+
        '<td>%%fromMySQLDatetimeString(obj.create_date)%%</td>'+
        '<td>%%getTimesAgoFrom(toMySQLDatetimeMilisec(obj.last_update),fa.language)%%</td>'+
        '<td><button type="button" class="btn btn-primary btn-lg" title="Remove" onclick="apRemoveObject(%%id%%,\'discount\',getData);">'+remove_icon+'</button></td>'+
        '<td><button type="button" class="btn btn-primary btn-lg" title="Update" onclick="apUpdateObject(%%id%%,getData,apBeforeUpdateDiscount);">'+update_icon+'</button></td>'+
        '</tr>');
        $("#table_body").html(h);
      }
      h="<tr id='tr_table_header'><th>Id</th><th>Discount type</th><th>Code</th><th>Name</th><th>Value</th><th>Language</th><th>Start date</th><th>Finish date</th><th>Product type</th><th>Create date</th><th>Last update</th><th>Remove</th><th>Update</th></tr>";
      $("#table_head").html(h);
      updateTableHeader(fa.language);
    }
    function apAddDiscount(){
      var h=faParsePattern(null,
      '<tr id="'+temp_id+'"><td>&ndash;</td>'+
      '<td><select options="fa.temp_list" onchange="apUpdateSelect('+temp_id+',this);" name="type" option_selected="" option_value="id" option_name="name"><option value=""></option></select></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="code" value=""></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="name" value=""></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="value" value=""></td>'+
      '<td><select options="fa.language_list" onchange="apUpdateSelect('+temp_id+',this);" name="language" option_selected="" option_value="value" option_name="value"><option value=""></option></select></td>'+
      '<td><input type="text" onchange="apUpdateDate('+temp_id+',this);" name="start_date" value="" title="'+getCurrentDatetime()+'"></td>'+
      '<td><input type="text" onchange="apUpdateDate('+temp_id+',this);" name="finish_date" value="" title="'+getCurrentDatetime()+'"></td>'+
      '<td><select options="fa.product_type_list" onchange="apUpdateSelect('+temp_id+',this);" name="product_type_id" option_selected="" option_value="id" option_name="obj.name+\' [\'+parseAttrList(obj.attr_list)+\']\'"><option value=""></option></select></td>'+
      '<td>&ndash;</td>'+
      '<td>&ndash;</td>'+
      '<td><button type="button" class="btn btn-primary btn-lg" title="Remove" onclick="apRemoveEmptyId('+temp_id+');">'+remove_icon+'</button></td>'+
      '<td><button type="button" class="btn btn-primary btn-lg" title="Update" onclick="apUpdateObject('+temp_id+',getData,apBeforeUpdateDiscount);">'+update_icon+'</button></td>'+
      '</tr>');
      $("#table_body").append(h);

      var discount=new faDiscount();
      discount.id=temp_id;
      fa.discount_list.push(discount);

      temp_id--;
    }
    function apBeforeUpdateDiscount(ptr){
      if(ptr.type===null||ptr.type==='')ptr.type=-1;
      if(ptr.product_type_id===null||ptr.product_type_id==='')ptr.product_type_id=-1;
    }

    /*tax*/
    function apGetTax(){
      $("#div_object_name").html("<h2>"+getMessage(fa.language,10007)+"</h2>");
      $("#div_form_search").hide();
      $("#div_message").empty();
      $("#text_error_message").empty();
      $("#table_body").empty();$("#table_head").empty();
      if(curr_object_name!=='Tax'){
        apClearSearch();
        PAGE_SET=0;PAGE_CURR=0;PAGE_COUNT=5;/*five pages in*/
        $("#div_pages").hide();
      }
      curr_object_name='Tax';
      curr_object_list='fa.tax_list';
      PAGE_ROWS=rows_count;
      fa.offset=PAGE_SET*PAGE_COUNT*PAGE_ROWS+PAGE_CURR*PAGE_ROWS;fa.rows=PAGE_ROWS;
      $("#search").attr("placeholder",getMessage(fa.language,20005));
      var tax=new faTax();
      tax.id="%";
      if(search!==null&&search!=='')tax.name="%"+search+"%";
      fa.tax_list.length=0;
      fa.getTax(tax,fa.language,"#text_error_message",apAfter);
      fa.offset=null;fa.rows=null;
      fa.language_list.length=0;
      fa.getLanguage("#text_error_message",null);
      $(document).one("ajaxStop",function(){
        apShowTax();
      });
      $("#div_buttons").show();
    }
    function apShowTax(){
      var h;
      if(fa.tax_list.length>0){
        h=faParsePattern(fa.tax_list,
        '<tr id="%%id%%"><td>%%id%%</td>'+
        '<td><input type="text" onchange="apUpdateInput(%%id%%,this);" name="code" value="%%code%%"></td>'+
        '<td><input type="text" onchange="apUpdateInput(%%id%%,this);" name="name" value="%%name%%"></td>'+
        '<td><input type="text" onchange="apUpdateInput(%%id%%,this);" name="value" value="%%value%%"></td>'+
        '<td><select options="fa.language_list" onchange="apUpdateSelect(%%id%%,this);" name="language" option_selected="%%language%%" option_value="value" option_name="value"><option value=""></option></select></td>'+
        '<td>%%getTimesAgoFrom(toMySQLDatetimeMilisec(obj.last_update),fa.language)%%</td>'+
        '<td>%%parseAttrList(obj.attr_list)%%</td>'+
        '<td><button type="button" class="btn btn-primary btn-lg" title="Remove" onclick="apRemoveObject(%%id%%,\'tax\',getData);">'+remove_icon+'</button></td>'+
        '<td><button type="button" class="btn btn-primary btn-lg" title="Update" onclick="apUpdateObject(%%id%%,getData);">'+update_icon+'</button></td>'+
        '</tr>');
        $("#table_body").html(h);
      }
      h="<tr id='tr_table_header'><th>Id</th><th>Code</th><th>Name</th><th>Value</th><th>Language</th><th>Last update</th><th>Attr</th><th>Remove</th><th>Update</th></tr>";
      $("#table_head").html(h);
      updateTableHeader(fa.language);
    }
    function apAddTax(){
      var h=faParsePattern(null,
      '<tr id="'+temp_id+'"><td>&ndash;</td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="code" value=""></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="name" value=""></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="value" value=""></td>'+
      '<td><select options="fa.language_list" onchange="apUpdateSelect('+temp_id+',this);" name="language" option_selected="" option_value="value" option_name="value"><option value=""></option></select></td>'+
      '<td>&ndash;</td>'+
      '<td>&ndash;</td>'+
      '<td><button type="button" class="btn btn-primary btn-lg" title="Remove" onclick="apRemoveEmptyId('+temp_id+');">'+remove_icon+'</button></td>'+
      '<td><button type="button" class="btn btn-primary btn-lg" title="Update" onclick="apUpdateObject('+temp_id+',getData);">'+update_icon+'</button></td>'+
      '</tr>');
      $("#table_body").append(h);

      var tax=new faTax();
      tax.id=temp_id;
      fa.tax_list.push(tax);

      temp_id--;
    }

    /*message*/
    function apGetMessage(){
      $("#div_object_name").html("<h2>"+getMessage(fa.language,10008)+"</h2>");
      $("#div_form_search").hide();
      $("#div_message").empty();
      $("#text_error_message").empty();
      $("#table_body").empty();$("#table_head").empty();
      if(curr_object_name!=='Message'){
        apClearSearch();
        PAGE_SET=0;PAGE_CURR=0;PAGE_COUNT=5;/*five pages in*/
        $("#div_pages").hide();
      }
      curr_object_name='Message';
      curr_object_list='fa.message_list';
      PAGE_ROWS=rows_count;
      fa.offset=PAGE_SET*PAGE_COUNT*PAGE_ROWS+PAGE_CURR*PAGE_ROWS;fa.rows=PAGE_ROWS;
      $("#search").attr("placeholder",getMessage(fa.language,20036));
      var message=new faMessage();
      message.id="%";
      message.user_id="%";/*all sender and receiver seek*/
      if(search!==null&&search!=='')message.message="%"+search+"%";
      if(search_id!==null&&search_id!=='')message.id=search_id;
      if(search_date!==null&&search_date!=='')message.create_date="%"+search_date+"%";
      if(search_name1!==null&&search_name1!=='')message.user_id="%"+search_name1+"%";
      fa.message_list.length=0;
      fa.getMessage(message,fa.language,"#text_error_message",apAfter);
      $(document).one("ajaxStop",function(){
        apShowMessage();
        /*create search form*/
        apSearchForm("Id",getMessage(fa.language,20025),getMessage(fa.language,20101),null,null,null,null);
      });
      $("#div_buttons").show();
    }
    function apShowMessage(){
      fa.temp_list.length=0;
      var message_type;
      message_type=new faObjectType();
      message_type.id=MESSAGE_TYPE_INPUT;
      message_type.name=getMessage(fa.language,21);
      fa.temp_list.push(message_type);
      message_type=new faObjectType();
      message_type.id=MESSAGE_TYPE_OUTPUT;
      message_type.name=getMessage(fa.language,22);
      fa.temp_list.push(message_type);

      var h;
      if(fa.message_list.length>0){
        h=faParsePattern(fa.message_list,
        '<tr id="%%id%%"><td>%%id%%</td>'+
        '<td><select options="fa.temp_list" name="type" option_selected="%%type%%" option_value="id" option_name="name"><option value=""></option></select></td>'+
        '<td>%%userA.call_name%%(%%userA.id%%)</td>'+
        '<td>%%userB.call_name%%(%%userB.id%%)</td>'+
        '<td>%%message%%</td>'+
        '<td>%%fromMySQLDatetimeString(obj.create_date)%%</td>'+
        '<td><button type="button" class="btn btn-primary btn-lg" title="Remove" onclick="apRemoveObject(%%id%%,\'message\',getData);">'+remove_icon+'</button></td>'+
        '<td>&ndash;</td>'+
        '</tr>');
        $("#table_body").html(h);
      }
      h="<tr id='tr_table_header'><th>Id</th><th>Type</th><th>Sender(Id)</th><th>Receiver(Id)</th><th>Message</th><th>Create date</th><th>Remove</th><th>Update</th></tr>";
      $("#table_head").html(h);
      updateTableHeader(fa.language);
    }
    function apAddMessage(){
      var h=faParsePattern(null,
      '<tr id="'+temp_id+'"><td>&ndash;</td>'+
      '<td><select options="fa.temp_list" onchange="apUpdateSelect('+temp_id+',this);" name="type" option_selected="" option_value="id" option_name="name"><option value=""></option></select></td>'+
      '<td>'+call_name+'</td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="recipient" value=""></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="message" value=""></td>'+
      '<td>&ndash;</td>'+
      '<td><button type="button" class="btn btn-primary btn-lg" title="Remove" onclick="apRemoveEmptyId('+temp_id+');">'+remove_icon+'</button></td>'+
      '<td><button type="button" class="btn btn-primary btn-lg" title="Update" onclick="apUpdateMessage('+temp_id+',getData);">'+update_icon+'</button></td>'+
      '</tr>');
      $("#table_body").append(h);

      var message=new faMessage();
      message.id=temp_id;
      fa.message_list.push(message);

      temp_id--;
    }
    function apUpdateMessage(object_id,callback){
      var obj=apFindObjectById(curr_object_list,object_id);
      if(obj){
        fa.addMessage(obj.recipient,obj.message,"#text_error_message",callback);
      }
    }

    /*user_review*/
    function apGetUserReview(){
      $("#div_object_name").html("<h2>"+getMessage(fa.language,10016)+"</h2>");
      $("#div_form_search").hide();
      $("#div_message").empty();
      $("#text_error_message").empty();
      $("#table_body").empty();$("#table_head").empty();
      if(curr_object_name!=='UserReview'){
        apClearSearch();
        PAGE_SET=0;PAGE_CURR=0;PAGE_COUNT=5;/*five pages in*/
        $("#div_pages").hide();
      }
      curr_object_name='UserReview';
      curr_object_list='fa.user_review_list';
      PAGE_ROWS=rows_count;
      fa.offset=PAGE_SET*PAGE_COUNT*PAGE_ROWS+PAGE_CURR*PAGE_ROWS;fa.rows=PAGE_ROWS;
      $("#search").attr("placeholder",getMessage(fa.language,20009));
      var user_review=new faObjectReview();
      user_review.user_id="%";
      user_review.object_id="%";
      if(search!==null&&search!=='')user_review.description="%"+search+"%";
      fa.user_review_list.length=0;
      fa.getUserReview(user_review,"#text_error_message",apAfter);
      $(document).one("ajaxStop",function(){
        apShowUserReview();
      });
      $("#div_buttons").show();
    }
    function apShowUserReview(){
      var h;
      if(fa.user_review_list.length>0){
        h=faParsePattern(fa.user_review_list,
        '<tr id="%%id%%">'+
        '<td>%%obj.user?obj.user.call_name+\' (\'+obj.user.id+\')\':\'&ndash;\'%%</td>'+
        '<td>%%obj.object?obj.object.call_name+\' (\'+obj.object.id+\')\':\'&ndash;\'%%</td>'+
        '<td>%%description%%</td>'+
        '<td>%%value%%</td>'+
        '<td>%%getTimesAgoFrom(toMySQLDatetimeMilisec(obj.last_update),fa.language)%%</td>'+
        '<td><button type="button" class="btn btn-primary btn-lg" title="Remove" onclick="apRemoveUserReview(%%user_id%%,%%object_id%%,getData);">'+remove_icon+'</button></td>'+
        '<td>&ndash;</td>'+
        '</tr>');
        $("#table_body").html(h);
      }
      h="<tr id='tr_table_header'><th>User(Id)</th><th>ReviewUser(Id)</th><th>Description</th><th>Value</th><th>Last update</th><th>Remove</th><th>Update</th></tr>";
      $("#table_head").html(h);
      updateTableHeader(fa.language);
    }
    function apAddUserReview(){
      var h=faParsePattern(null,
      '<tr id="'+temp_id+'">'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="user_id" value=""></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="object_id" value=""></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="description" value=""></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="value" value=""></td>'+
      '<td>&ndash;</td>'+
      '<td><button type="button" class="btn btn-primary btn-lg" title="Remove" onclick="apRemoveEmptyId('+temp_id+');">'+remove_icon+'</button></td>'+
      '<td><button type="button" class="btn btn-primary btn-lg" title="Update" onclick="apUpdateObject('+temp_id+',getData);">'+update_icon+'</button></td>'+
      '</tr>');
      $("#table_body").append(h);

      var user_review=new faObjectReview();
      user_review.id=temp_id;
      fa.user_review_list.push(user_review);

      temp_id--;
    }
    function apRemoveUserReview(user_id,review_user_id,callback){
      fa.removeUserReview(user_id,review_user_id,"#text_error_message",callback);
    }

    /*product_review*/
    function apGetProductReview(){
      $("#div_object_name").html("<h2>"+getMessage(fa.language,10009)+"</h2>");
      $("#div_form_search").hide();
      $("#div_message").empty();
      $("#text_error_message").empty();
      $("#table_body").empty();$("#table_head").empty();
      if(curr_object_name!=='ProductReview'){
        apClearSearch();
        PAGE_SET=0;PAGE_CURR=0;PAGE_COUNT=5;/*five pages in*/
        $("#div_pages").hide();
      }
      curr_object_name='ProductReview';
      curr_object_list='fa.product_review_list';
      PAGE_ROWS=rows_count;
      fa.offset=PAGE_SET*PAGE_COUNT*PAGE_ROWS+PAGE_CURR*PAGE_ROWS;fa.rows=PAGE_ROWS;
      $("#search").attr("placeholder",getMessage(fa.language,20009));
      var product_review=new faObjectReview();
      product_review.user_id="%";
      product_review.object_id="%";
      if(search!==null&&search!=='')product_review.description="%"+search+"%";
      fa.product_review_list.length=0;
      fa.getProductReview(product_review,"#text_error_message",apAfter);
      $(document).one("ajaxStop",function(){
        apShowProductReview();
      });
      $("#div_buttons").show();
    }
    function apShowProductReview(){
      var h;
      if(fa.product_review_list.length>0){
        h=faParsePattern(fa.product_review_list,
        '<tr id="%%id%%">'+
        '<td>%%obj.user?obj.user.call_name+\' (\'+obj.user.id+\')\':\'&ndash;\'%%</td>'+
        '<td>%%obj.object.name+\' \'+parseAttrList(obj.object.attr_list)+\' (\'+obj.object.id+\')\'%%</td>'+
        '<td>%%description%%</td>'+
        '<td>%%value%%</td>'+
        '<td>%%getTimesAgoFrom(toMySQLDatetimeMilisec(obj.last_update),fa.language)%%</td>'+
        '<td><button type="button" class="btn btn-primary btn-lg" title="Remove" onclick="apRemoveProductReview(%%user_id%%,%%object_id%%,getData);">'+remove_icon+'</button></td>'+
        '<td>&ndash;</td>'+
        '</tr>');
        $("#table_body").html(h);
      }
      h="<tr id='tr_table_header'><th>User(Id)</th><th>Product(Id)</th><th>Description</th><th>Value</th><th>Last update</th><th>Remove</th><th>Update</th></tr>";
      $("#table_head").html(h);
      updateTableHeader(fa.language);
    }
    function apAddProductReview(){
      var h=faParsePattern(null,
      '<tr id="'+temp_id+'">'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="user_id" value=""></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="object_id" value=""></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="description" value=""></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="value" value=""></td>'+
      '<td>&ndash;</td>'+
      '<td><button type="button" class="btn btn-primary btn-lg" title="Remove" onclick="apRemoveEmptyId('+temp_id+');">'+remove_icon+'</button></td>'+
      '<td><button type="button" class="btn btn-primary btn-lg" title="Update" onclick="apUpdateObject('+temp_id+',getData);">'+update_icon+'</button></td>'+
      '</tr>');
      $("#table_body").append(h);

      var product_review=new faObjectReview();
      product_review.id=temp_id;
      fa.product_review_list.push(product_review);

      temp_id--;
    }
    function apRemoveProductReview(user_id,product_id,callback){
      fa.removeProductReview(user_id,product_id,"#text_error_message",callback);
    }

    /*transport_review*/
    function apGetTransportReview(){
      $("#div_object_name").html("<h2>"+getMessage(fa.language,10010)+"</h2>");
      $("#div_form_search").hide();
      $("#div_message").empty();
      $("#text_error_message").empty();
      $("#table_body").empty();$("#table_head").empty();
      if(curr_object_name!=='TransportReview'){
        apClearSearch();
        PAGE_SET=0;PAGE_CURR=0;PAGE_COUNT=5;/*five pages in*/
        $("#div_pages").hide();
      }
      curr_object_name='TransportReview';
      curr_object_list='fa.transport_review_list';
      PAGE_ROWS=rows_count;
      fa.offset=PAGE_SET*PAGE_COUNT*PAGE_ROWS+PAGE_CURR*PAGE_ROWS;fa.rows=PAGE_ROWS;
      $("#search").attr("placeholder",getMessage(fa.language,20009));
      var transport_review=new faObjectReview();
      transport_review.order_id="%";
      transport_review.user_id="%";
      transport_review.object_id="%";
      if(search!==null&&search!=='')transport_review.description="%"+search+"%";
      fa.transport_review_list.length=0;
      fa.getTransportReview(transport_review,"#text_error_message",apAfter);
      $(document).one("ajaxStop",function(){
        apShowTransportReview();
      });
      $("#div_buttons").show();
    }
    function apShowTransportReview(){
      var h;
      if(fa.transport_review_list.length>0){
        h=faParsePattern(fa.transport_review_list,
        '<tr id="%%id%%"><td>%%order_id%%</td>'+
        '<td>%%obj.user?obj.user.call_name+\' (\'+obj.user.id+\')\':\'&ndash;\'%%</td>'+
        '<td>%%obj.object.name+\' \'+obj.object.license_plate+\' (\'+obj.object.id+\')\'%%</td>'+
        '<td>%%description%%</td>'+
        '<td>%%value%%</td>'+
        '<td>%%getTimesAgoFrom(toMySQLDatetimeMilisec(obj.last_update),fa.language)%%</td>'+
        '<td><button type="button" class="btn btn-primary btn-lg" title="Remove" onclick="apRemoveTransportReview(%%order_id%%,%%user_id%%,%%object_id%%,getData);">'+remove_icon+'</button></td>'+
        '<td>&ndash;</td>'+
        '</tr>');
        $("#table_body").html(h);
      }
      h="<tr id='tr_table_header'><th>OrderId</th><th>User(Id)</th><th>Transport(Id)</th><th>Description</th><th>Value</th><th>Last update</th><th>Remove</th><th>Update</th></tr>";
      $("#table_head").html(h);
      updateTableHeader(fa.language);
    }
    function apAddTransportReview(){
      var h=faParsePattern(null,
      '<tr id="'+temp_id+'">'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="order_id" value=""></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="user_id" value=""></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="object_id" value=""></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="description" value=""></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="value" value=""></td>'+
      '<td>&ndash;</td>'+
      '<td><button type="button" class="btn btn-primary btn-lg" title="Remove" onclick="apRemoveEmptyId('+temp_id+');">'+remove_icon+'</button></td>'+
      '<td><button type="button" class="btn btn-primary btn-lg" title="Update" onclick="apUpdateObject('+temp_id+',getData);">'+update_icon+'</button></td>'+
      '</tr>');
      $("#table_body").append(h);

      var transport_review=new faObjectReview();
      transport_review.id=temp_id;
      fa.transport_review_list.push(transport_review);

      temp_id--;
    }
    function apRemoveTransportReview(order_id,user_id,transport_id,callback){
      fa.removeTransportReview(order_id,user_id,transport_id,"#text_error_message",callback);
    }

    /*track*/
    function apGetTrack(){
      $("#div_object_name").html("<h2>"+getMessage(fa.language,10011)+"</h2>");
      $("#div_form_search").hide();
      $("#div_message").empty();
      $("#text_error_message").empty();
      $("#table_body").empty();$("#table_head").empty();
      if(curr_object_name!=='Track'){
        apClearSearch();
        PAGE_SET=0;PAGE_CURR=0;PAGE_COUNT=5;/*five pages in*/
        $("#div_pages").hide();
      }
      curr_object_name='Track';
      curr_object_list='fa.track_list';
      PAGE_ROWS=rows_count;
      fa.offset=PAGE_SET*PAGE_COUNT*PAGE_ROWS+PAGE_CURR*PAGE_ROWS;fa.rows=PAGE_ROWS;
      $("#search").attr("placeholder",getMessage(fa.language,20112));
      var track=new faTrack();
      track.sensor_id="%";
      if(search!==null&&search!=='')track.sensor_id=search;
      fa.track_list.length=0;
      fa.getTrack(track,fa.language,"#text_error_message",apAfter);
      fa.offset=null;fa.rows=null;
      var obj_type=new faObjectType();
      obj_type.id="%";
      fa.track_type_list.length=0;
      fa.getTrackType(obj_type,fa.language,"#text_error_message",null);
      $(document).one("ajaxStop",function(){
        apShowTrack();
      });
      $("#div_buttons").show();
    }
    function apShowTrack(){
      var h;
      if(fa.track_list.length>0){
        h=faParsePattern(fa.track_list,
        '<tr id="%%id%%"><td>%%id%%</td>'+
        '<td>%%obj.sensor.name+\' (\'+obj.sensor.id+\')\'%%</td>'+
        '<td>%%obj.transport?obj.transport.name+\' \'+obj.transport.license_plate+\' (\'+obj.transport.id+\')\':\'&ndash;\'%%</td>'+
        '<td><select options="fa.track_type_list" name="type_id" option_selected="%%type_id%%" option_value="id" option_name="obj.name+\' [\'+parseAttrList(obj.attr_list)+\']\'"><option value=""></option></select></td>'+
        '<td>%%latitude%%</td>'+
        '<td>%%longitude%%</td>'+
        '<td>%%time%%</td>'+
        '<td>%%altitude%%</td>'+
        '<td>%%accuracy%%</td>'+
        '<td>%%bearing%%</td>'+
        '<td>%%speed%%</td>'+
        '<td>%%satellites%%</td>'+
        '<td>%%battery%%</td>'+
        '<td>%%timezone_offset%%</td>'+
        '<td>%%fromMySQLDatetimeString(obj.create_date)%%</td>'+
        '<td><button type="button" class="btn btn-primary btn-lg" title="Remove" onclick="apRemoveObject(%%id%%,\'track\',getData);">'+remove_icon+'</button></td>'+
        '<td>&ndash;</td>'+
        '</tr>');
        $("#table_body").html(h);
      }
      h="<tr id='tr_table_header'><th>Id</th><th>Sensor(Id)</th><th>Transport(Id)</th><th>Type</th><th>Lat</th><th>Lng</th><th>Time</th><th>Alt</th><th>Accu</th><th>Bear</th><th>Speed</th><th>Sat</th><th>Bat</th><th>Timezone</th><th>Create date</th><th>Remove</th><th>Update</th></tr>";
      $("#table_head").html(h);
      updateTableHeader(fa.language);
    }
    function apAddTrack(){
      var h=faParsePattern(null,
      '<tr id="'+temp_id+'"><td>&ndash;</td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="sensor_id" value=""></td>'+
      '<td>&ndash;</td>'+
      '<td><select options="fa.track_type_list" onchange="apUpdateSelect('+temp_id+',this);" name="type_id" option_selected="" option_value="id" option_name="obj.name+\' [\'+parseAttrList(obj.attr_list)+\']\'"><option value=""></option></select></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="latitude" value=""></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="longitude" value=""></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="time" value=""></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="altitude" value=""></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="accuracy" value=""></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="bearing" value=""></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="speed" value=""></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="satellites" value=""></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="battery" value=""></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="timezone_offset" value=""></td>'+
      '<td>&ndash;</td>'+
      '<td><button type="button" class="btn btn-primary btn-lg" title="Remove" onclick="apRemoveEmptyId('+temp_id+');">'+remove_icon+'</button></td>'+
      '<td><button type="button" class="btn btn-primary btn-lg" title="Update" onclick="apUpdateObject('+temp_id+',getData);">'+update_icon+'</button></td>'+
      '</tr>');
      $("#table_body").append(h);

      var track=new faTrack();
      track.id=temp_id;
      fa.track_list.push(track);

      temp_id--;
    }

    /*track_part is not implemeted*/
    function apGetTrackPart(){
      $("#div_object_name").html("<h2>"+getMessage(fa.language,10012)+"</h2>");
      $("#div_form_search").hide();
      $("#div_message").empty();
      $("#text_error_message").empty();
      $("#table_body").empty();$("#table_head").empty();
      $("#div_buttons").hide();
      $("#div_pages").hide();
    }

    /*sensor_circle*/
    function apGetSensorCircle(){
      $("#div_object_name").html("<h2>"+getMessage(fa.language,10013)+"</h2>");
      $("#div_form_search").hide();
      $("#div_message").empty();
      $("#text_error_message").empty();
      $("#table_body").empty();$("#table_head").empty();
      if(curr_object_name!=='SensorCircle'){
        apClearSearch();
        PAGE_SET=0;PAGE_CURR=0;PAGE_COUNT=5;/*five pages in*/
        $("#div_pages").hide();
      }
      curr_object_name='SensorCircle';
      curr_object_list='fa.sensor_circle_list';
      PAGE_ROWS=rows_count;
      fa.offset=PAGE_SET*PAGE_COUNT*PAGE_ROWS+PAGE_CURR*PAGE_ROWS;fa.rows=PAGE_ROWS;
      $("#search").attr("placeholder",getMessage(fa.language,20112));
      var sensor_circle=new faSensorCircle();
      sensor_circle.sensorA_id="%";
      if(search!==null&&search!=='')sensor_circle.sensorA_id=search;
      fa.sensor_circle_list.length=0;
      fa.getSensorCircle(sensor_circle,fa.language,"#text_error_message",apAfter);
      $(document).one("ajaxStop",function(){
        /*virtual id create*/
        if(fa.sensor_circle_list.length>0){
          var j,sensor_circle;
          for(j=0;j<fa.sensor_circle_list.length;j++){
            sensor_circle=fa.sensor_circle_list[j];
            sensor_circle.id=(sensor_circle.sensorA_id*id_reserved_value)+sensor_circle.sensorB_id;
          }
        }
        apShowSensorCircle();
      });
      $("#div_buttons").show();
    }
    function apShowSensorCircle(){
      var h;
      if(fa.sensor_circle_list.length>0){
        h=faParsePattern(fa.sensor_circle_list,
        '<tr>'+
        '<td>%%obj.sensorA.name+\' [\'+obj.sensorA.user.call_name+\'] (\'+obj.sensorA_id+\')\'%%</td>'+
        '<td>%%obj.sensorB.name+\' [\'+obj.sensorB.user.call_name+\'] (\'+obj.sensorB_id+\')\'%%</td>'+
        '<td>%%fromMySQLDatetimeString(obj.create_date)%%</td>'+
        '<td><button type="button" class="btn btn-primary btn-lg" title="Remove" onclick="apRemoveSensorCircle(%%sensorA_id%%,%%sensorB_id%%,getData);">'+remove_icon+'</button></td>'+
        '<td>&ndash;</td>'+
        '</tr>');
        $("#table_body").html(h);
      }
      h="<tr id='tr_table_header'><th>SensorA[Callname](Id)</th><th>SensorB[Callname](Id)</th><th>Create date</th><th>Remove</th><th>Update</th></tr>";
      $("#table_head").html(h);
      updateTableHeader(fa.language);
    }
    function apAddSensorCircle(){
      var h=faParsePattern(null,
      '<tr id="'+temp_id+'">'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="sensorA_id" value=""></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="sensorB_id" value=""></td>'+
      '<td>&ndash;</td>'+
      '<td><button type="button" class="btn btn-primary btn-lg" title="Remove" onclick="apRemoveEmptyId('+temp_id+');">'+remove_icon+'</button></td>'+
      '<td><button type="button" class="btn btn-primary btn-lg" title="Update" onclick="apUpdateSensorCircle('+temp_id+',getData);">'+update_icon+'</button></td>'+
      '</tr>');
      $("#table_body").append(h);

      var sensor_circle=new faSensorCircle();
      sensor_circle.id=temp_id;
      fa.sensor_circle_list.push(sensor_circle);

      temp_id--;
    }
    function apUpdateSensorCircle(object_id,callback){
      var obj=apFindObjectById(curr_object_list,object_id);
      if(obj){
        fa.addSensorCircle(obj.sensorA_id,obj.sensorB_id,"#text_error_message",callback);
      }
    }
    function apRemoveSensorCircle(sensorA_id,sensorB_id,callback){
      fa.removeSensorCircle(sensorA_id,sensorB_id,"#text_error_message",callback);
    }

    /*sensor_group is not implemeted*/
    function apGetSensorGroup(){
      $("#div_object_name").html("<h2>"+getMessage(fa.language,10014)+"</h2>");
      $("#div_form_search").hide();
      $("#div_message").empty();
      $("#text_error_message").empty();
      $("#table_body").empty();$("#table_head").empty();
      $("#div_buttons").hide();
      $("#div_pages").hide();
    }
    /*sensor_place is not implemeted*/
    function apGetSensorPlace(){
      $("#div_object_name").html("<h2>"+getMessage(fa.language,10015)+"</h2>");
      $("#div_form_search").hide();
      $("#div_message").empty();
      $("#text_error_message").empty();
      $("#table_body").empty();$("#table_head").empty();
      $("#div_buttons").hide();
      $("#div_pages").hide();
    }

    /*Trade And Services*/

    /*stock*/
    function apGetStock(){
      $("#div_object_name").html("<h2>"+getMessage(fa.language,10202)+"</h2>");
      $("#div_form_search").hide();
      $("#div_message").empty();
      $("#text_error_message").empty();
      $("#table_body").empty();$("#table_head").empty();
      if(curr_object_name!=='Stock'){
        apClearSearch();
        PAGE_SET=0;PAGE_CURR=0;PAGE_COUNT=5;/*five pages in*/
        $("#div_pages").hide();
      }
      curr_object_name='Stock';
      curr_object_list='fa.stock_list';
      PAGE_ROWS=rows_count;
      fa.offset=PAGE_SET*PAGE_COUNT*PAGE_ROWS+PAGE_CURR*PAGE_ROWS;fa.rows=PAGE_ROWS;
      $("#search").attr("placeholder",getMessage(fa.language,20104));
      var stock=new faStock();
      stock.product_id="%";
      if(search!==null&&search!=='')stock.product_id=search;
      fa.stock_list.length=0;
      fa.getStock(stock,"#text_error_message",apAfter);
      fa.offset=null;fa.rows=null;
      var product=new faProduct();
      product.id="%";
      fa.product_list.length=0;
      fa.getProduct(product,fa.language,null,null,"#text_error_message",null);
      var store=new faStore();
      store.id="%";
      fa.store_list.length=0;
      fa.getStore(store,fa.language,"#text_error_message",null);
      $(document).one("ajaxStop",function(){
        /*virtual id create*/
        if(fa.stock_list.length>0){
          var j,stock;
          for(j=0;j<fa.stock_list.length;j++){
            stock=fa.stock_list[j];
            stock.id=(stock.store_id*id_reserved_value)+stock.product_id;
          }
        }
        apShowStock();
      });
      $("#div_buttons").show();
    }
    function apShowStock(){
      var h;
      if(fa.stock_list.length>0){
        h=faParsePattern(fa.stock_list,
        '<tr>'+
        '<td><select options="fa.product_list" onchange="apUpdateSelect(%%id%%,this);" name="product_id" option_selected="%%product_id%%" option_value="id" option_name="obj.name+\' [\'+parseAttrList(obj.attr_list)+\']\'"><option value=""></option></select></td>'+
        '<td><select options="fa.store_list" onchange="apUpdateSelect(%%id%%,this);" name="store_id" option_selected="%%store_id%%" option_value="id" option_name="obj.name+\' [\'+parseAttrList(obj.attr_list)+\']\'"><option value=""></option></select></td>'+
        '<td><input type="text" onchange="apUpdateInput(%%id%%,this);" name="count" value="%%count%%"></td>'+
        '<td>%%getTimesAgoFrom(toMySQLDatetimeMilisec(obj.last_update),fa.language)%%</td>'+
        '<td><button type="button" class="btn btn-primary btn-lg" title="Remove" onclick="apRemoveStock(%%product_id%%,%%store_id%%,getData);">'+remove_icon+'</button></td>'+
        '<td><button type="button" class="btn btn-primary btn-lg" title="Update" onclick="apUpdateObject(%%id%%,getData,apBeforeUpdateStock);">'+update_icon+'</button></td>'+
        '</tr>');
        $("#table_body").html(h);
      }
      h="<tr id='tr_table_header'><th>Product</th><th>Store</th><th>Count</th><th>Last update</th><th>Remove</th><th>Update</th></tr>";
      $("#table_head").html(h);
      updateTableHeader(fa.language);
    }
    function apAddStock(){
      var h=faParsePattern(null,
      '<tr id="'+temp_id+'">'+
      '<td><select options="fa.product_list" onchange="apUpdateSelect('+temp_id+',this);" name="product_id" option_selected="" option_value="id" option_name="obj.name+\' [\'+parseAttrList(obj.attr_list)+\']\'"><option value=""></option></select></td>'+
      '<td><select options="fa.store_list" onchange="apUpdateSelect('+temp_id+',this);" name="store_id" option_selected="" option_value="id" option_name="obj.name+\' [\'+parseAttrList(obj.attr_list)+\']\'"><option value=""></option></select></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="count" value="0"></td>'+
      '<td>&ndash;</td>'+
      '<td><button type="button" class="btn btn-primary btn-lg" title="Remove" onclick="apRemoveEmptyId('+temp_id+');">'+remove_icon+'</button></td>'+
      '<td><button type="button" class="btn btn-primary btn-lg" title="Update" onclick="apUpdateObject('+temp_id+',getData,apBeforeUpdateStock);">'+update_icon+'</button></td>'+
      '</tr>');
      $("#table_body").append(h);

      var stock=new faStock();
      stock.id=temp_id;
      fa.stock_list.push(stock);

      temp_id--;
    }
    function apRemoveStock(product_id,store_id,callback){
      fa.removeStock(product_id,store_id,"#text_error_message",callback);
    }
    function apBeforeUpdateStock(ptr){
      if(ptr.product_id===null||ptr.product_id==='')ptr.product_id=-1;
      if(ptr.store_id===null||ptr.store_id==='')ptr.store_id=-1;
      if(ptr.count===null||ptr.count==='')ptr.count=0;
    }

    /*stock_invoice*/
    function apGetStockInvoice(){
      $("#div_object_name").html("<h2>"+getMessage(fa.language,10203)+"</h2>");
      $("#div_form_search").hide();
      $("#div_message").empty();
      $("#text_error_message").empty();
      $("#table_body").empty();$("#table_head").empty();
      if(curr_object_name!=='StockInvoice'){
        apClearSearch();
        PAGE_SET=0;PAGE_CURR=0;PAGE_COUNT=5;/*five pages in*/
        $("#div_pages").hide();
      }
      curr_object_name='StockInvoice';
      curr_object_list='fa.stock_invoice_list';
      PAGE_ROWS=rows_count;
      fa.offset=PAGE_SET*PAGE_COUNT*PAGE_ROWS+PAGE_CURR*PAGE_ROWS;fa.rows=PAGE_ROWS;
      $("#search").attr("placeholder",getMessage(fa.language,20054));
      var stock_invoice=new faStockInvoice();
      stock_invoice.id="%";
      if(search!==null&&search!=='')stock_invoice.supplier="%"+search+"%";
      fa.stock_invoice_list.length=0;
      fa.getStockInvoice(stock_invoice,"#text_error_message",apAfter);
      fa.offset=null;fa.rows=null;
      var obj_type=new faObjectType();
      obj_type.id="%";
      fa.delivery_type_list.length=0;
      fa.getDeliveryType(obj_type,fa.language,"#text_error_message",null);
      $(document).one("ajaxStop",function(){
        apShowStockInvoice();
      });
      $("#div_buttons").show();
    }
    function apShowStockInvoice(){
      var h;
      if(fa.stock_invoice_list.length>0){
        h=faParsePattern(fa.stock_invoice_list,
        '<tr id="%%id%%"><td>%%id%%</td>'+
        '<td><input type="text" onchange="apUpdateInput(%%id%%,this);" name="invoice_code" value="%%invoice_code%%"></td>'+
        '<td><input type="text" onchange="apUpdateDate(%%id%%,this);" name="invoice_date" value="%%obj.invoice_date?fromMySQLDatetimeString(obj.invoice_date):\'\'%%"></td>'+
        '<td><input type="text" onchange="apUpdateInput(%%id%%,this);" name="total_price" value="%%total_price%%"></td>'+
        '<td><input type="text" onchange="apUpdateInput(%%id%%,this);" name="total_tax" value="%%total_tax%%"></td>'+
        '<td><input type="text" onchange="apUpdateInput(%%id%%,this);" name="supplier" value="%%supplier%%"></td>'+
        '<td><input type="text" onchange="apUpdateInput(%%id%%,this);" name="phone" value="%%phone%%"></td>'+
        '<td><input type="text" onchange="apUpdateInput(%%id%%,this);" name="delivery_id" value="%%delivery_id%%"></td>'+
        '<td><input type="text" onchange="apUpdateInput(%%id%%,this);" name="delivery_code" value="%%delivery_code%%"></td>'+
        '<td><select options="fa.delivery_type_list" onchange="apUpdateSelect(%%id%%,this);" name="delivery_type_id" option_selected="%%delivery_type_id%%" option_value="id" option_name="obj.name+\' [\'+parseAttrList(obj.attr_list)+\']\'"><option value=""></option></select></td>'+
        '<td><input type="text" onchange="apUpdateDate(%%id%%,this);" name="delivery_date" value="%%obj.delivery_date?fromMySQLDatetimeString(obj.delivery_date):\'\'%%"></td>'+
        '<td><input type="text" onchange="apUpdateInput(%%id%%,this);" name="delivery_price" value="%%delivery_price%%"></td>'+
        '<td><input type="text" onchange="apUpdateDate(%%id%%,this);" name="payment_date" value="%%obj.payment_date?fromMySQLDatetimeString(obj.payment_date):\'\'%%"></td>'+
        '<td><input type="text" onchange="apUpdateInput(%%id%%,this);" name="payment_info" value="%%payment_info%%"></td>'+
        '<td><input type="text" onchange="apUpdateInput(%%id%%,this);" name="payment_amount" value="%%payment_amount%%"></td>'+
        '<td>%%fromMySQLDatetimeString(obj.create_date)%%</td>'+
        '<td>%%getTimesAgoFrom(toMySQLDatetimeMilisec(obj.last_update),fa.language)%%</td>'+
        '<td><button type="button" class="btn btn-primary btn-lg" title="Remove" onclick="apRemoveObject(%%id%%,\'stock_invoice\',getData);">'+remove_icon+'</button></td>'+
        '<td><button type="button" class="btn btn-primary btn-lg" title="Update" onclick="apUpdateObject(%%id%%,getData,apBeforeUpdateStockInvoice);">'+update_icon+'</button></td>'+
        '</tr>');
        $("#table_body").html(h);
      }
      h="<tr id='tr_table_header'><th>Id</th><th>Invoice code</th><th>Invoice date</th><th>Total price</th><th>Total tax</th><th>Supplier</th><th>Phone</th><th>Delivery(Id)</th><th>Delivery code</th><th>Delivery type</th><th>Delivery date</th><th>Delivery price</th><th>Payment date</th><th>Payment info</th><th>Payment amount</th><th>Create date</th><th>Last update</th><th>Remove</th><th>Update</th></tr>";
      $("#table_head").html(h);
      updateTableHeader(fa.language);
    }
    function apAddStockInvoice(){
      var h=faParsePattern(null,
      '<tr id="'+temp_id+'"><td>&ndash;</td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="invoice_code" value=""></td>'+
      '<td><input type="text" onchange="apUpdateDate('+temp_id+',this);" name="invoice_date" value="" title="'+getCurrentDatetime()+'"></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="total_price" value=""></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="total_tax" value=""></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="supplier" value=""></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="phone" value=""></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="delivery_id" value=""></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="delivery_code" value=""></td>'+
      '<td><select options="fa.delivery_type_list" onchange="apUpdateSelect('+temp_id+',this);" name="delivery_type_id" option_selected="" option_value="id" option_name="obj.name+\' [\'+parseAttrList(obj.attr_list)+\']\'"><option value=""></option></select></td>'+
      '<td><input type="text" onchange="apUpdateDate('+temp_id+',this);" name="delivery_date" value="" title="'+getCurrentDatetime()+'"></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="delivery_price" value=""></td>'+
      '<td><input type="text" onchange="apUpdateDate('+temp_id+',this);" name="payment_date" value="" title="'+getCurrentDatetime()+'"></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="payment_info" value=""></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="payment_amount" value=""></td>'+
      '<td>&ndash;</td>'+
      '<td>&ndash;</td>'+
      '<td><button type="button" class="btn btn-primary btn-lg" title="Remove" onclick="apRemoveEmptyId('+temp_id+');">'+remove_icon+'</button></td>'+
      '<td><button type="button" class="btn btn-primary btn-lg" title="Update" onclick="apUpdateObject('+temp_id+',getData,apBeforeUpdateStockInvoice);">'+update_icon+'</button></td>'+
      '</tr>');
      $("#table_body").append(h);

      var stock_invoice=new faStockInvoice();
      stock_invoice.id=temp_id;
      fa.stock_invoice_list.push(stock_invoice);

      temp_id--;
    }
    function apBeforeUpdateStockInvoice(ptr){
      if(ptr.delivery_id===null||ptr.delivery_id==='')ptr.delivery_id=-1;
      if(ptr.delivery_type_id===null||ptr.delivery_type_id==='')ptr.delivery_type_id=-1;

      toMySQLDatetimeString(ptr.invoice_date);
      toMySQLDatetimeString(ptr.delivery_date);
      toMySQLDatetimeString(ptr.payment_date);
    }

    /*stock_invoice_part*/
    function apGetStockInvoicePart(){
      $("#div_object_name").html("<h2>"+getMessage(fa.language,10204)+"</h2>");
      $("#div_form_search").hide();
      $("#div_message").empty();
      $("#text_error_message").empty();
      $("#table_body").empty();$("#table_head").empty();
      if(curr_object_name!=='StockInvoicePart'){
        apClearSearch();
        PAGE_SET=0;PAGE_CURR=0;PAGE_COUNT=5;/*five pages in*/
        $("#div_pages").hide();
      }
      curr_object_name='StockInvoicePart';
      curr_object_list='fa.stock_invoice_part_list';
      PAGE_ROWS=rows_count;
      fa.offset=PAGE_SET*PAGE_COUNT*PAGE_ROWS+PAGE_CURR*PAGE_ROWS;fa.rows=PAGE_ROWS;
      $("#search").attr("placeholder",getMessage(fa.language,20107));
      var stock_invoice_part=new faStockInvoicePart();
      stock_invoice_part.stock_invoice_id="%";
      if(search!==null&&search!=='')stock_invoice_part.stock_invoice_id=search;
      fa.stock_invoice_part_list.length=0;
      fa.getStockInvoicePart(stock_invoice_part,"#text_error_message",apAfter);
      fa.offset=null;fa.rows=null;
      var product=new faProduct();
      product.id="%";
      fa.product_list.length=0;
      fa.getProduct(product,fa.language,null,null,"#text_error_message",null);
      var tax=new faTax();
      tax.id="%";
      fa.tax_list.length=0;
      fa.getTax(tax,fa.language,"#text_error_message",null);
      $(document).one("ajaxStop",function(){
        /*virtual id create*/
        if(fa.stock_invoice_part_list.length>0){
          var j,stock_invoice_part;
          for(j=0;j<fa.stock_invoice_part_list.length;j++){
            stock_invoice_part=fa.stock_invoice_part_list[j];
            stock_invoice_part.id=(stock_invoice_part.stock_invoice_id*id_reserved_value)+stock_invoice_part.product_id;
          }
        }
        apShowStockInvoicePart();
      });
      $("#div_buttons").show();
    }
    function apShowStockInvoicePart(){
      var h;
      if(fa.stock_invoice_part_list.length>0){
        h=faParsePattern(fa.stock_invoice_part_list,
        '<tr id="%%stock_invoice_id%%"><td>%%stock_invoice_id%%</td>'+
        '<td><select options="fa.product_list" onchange="apUpdateSelect(%%id%%,this);" name="product_id" option_selected="%%product_id%%" option_value="id" option_name="obj.name+\' [\'+parseAttrList(obj.attr_list)+\']\'"><option value=""></option></select></td>'+
        '<td><select options="fa.tax_list" onchange="apUpdateSelect(%%id%%,this);" name="tax_id" option_selected="%%tax_id%%" option_value="id" option_name="obj.name+\' [\'+parseAttrList(obj.attr_list)+\']\'"><option value=""></option></select></td>'+
        '<td><input type="text" onchange="apUpdateInput(%%id%%,this);" name="count" value="%%count%%"></td>'+
        '<td><input type="text" onchange="apUpdateInput(%%id%%,this);" name="price" value="%%price%%"></td>'+
        '<td>%%getTimesAgoFrom(toMySQLDatetimeMilisec(obj.last_update),fa.language)%%</td>'+
        '<td><button type="button" class="btn btn-primary btn-lg" title="Remove" onclick="apRemoveStockInvoicePart(%%stock_invoice_id%%,%%product_id%%,getData);">'+remove_icon+'</button></td>'+
        '<td><button type="button" class="btn btn-primary btn-lg" title="Update" onclick="apUpdateObject(%%id%%,getData,apBeforeUpdateStockInvoicePart);">'+update_icon+'</button></td>'+
        '</tr>');
        $("#table_body").html(h);
      }
      h="<tr id='tr_table_header'><th>StockInvoiceId</th><th>Product</th><th>Tax</th><th>Count</th><th>Price</th><th>Last update</th><th>Remove</th><th>Update</th></tr>";
      $("#table_head").html(h);
      updateTableHeader(fa.language);
    }
    function apAddStockInvoicePart(){
      var h=faParsePattern(null,
      '<tr id="'+temp_id+'">'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="stock_invoice_id" value=""></td>'+
      '<td><select options="fa.product_list" onchange="apUpdateSelect('+temp_id+',this);" name="product_id" option_selected="" option_value="id" option_name="obj.name+\' [\'+parseAttrList(obj.attr_list)+\']\'"><option value=""></option></select></td>'+
      '<td><select options="fa.tax_list" onchange="apUpdateSelect('+temp_id+',this);" name="tax_id" option_selected="" option_value="id" option_name="obj.name+\' [\'+parseAttrList(obj.attr_list)+\']\'"><option value=""></option></select></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="count" value="0"></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="price" value=""></td>'+
      '<td>&ndash;</td>'+
      '<td><button type="button" class="btn btn-primary btn-lg" title="Remove" onclick="apRemoveEmptyId('+temp_id+');">'+remove_icon+'</button></td>'+
      '<td><button type="button" class="btn btn-primary btn-lg" title="Update" onclick="apUpdateObject('+temp_id+',getData,apBeforeUpdateStockInvoicePart);">'+update_icon+'</button></td>'+
      '</tr>');
      $("#table_body").append(h);

      var stock_invoice_part=new faStockInvoicePart();
      stock_invoice_part.id=temp_id;
      fa.stock_invoice_part_list.push(stock_invoice_part);

      temp_id--;
    }
    function apRemoveStockInvoicePart(stock_invoice_id,product_id,callback){
      fa.removeStockInvoicePart(stock_invoice_id,product_id,"#text_error_message",callback);
    }
    function apBeforeUpdateStockInvoicePart(ptr){
      if(ptr.product_id===null||ptr.product_id==='')ptr.product_id=-1;
      if(ptr.tax_id===null||ptr.tax_id==='')ptr.tax_id=-1;
      if(ptr.count===null||ptr.count==='')ptr.count=0;
    }

    /*STORES*/

    /*store*/
    function apGetStore(){
      $("#div_object_name").html("<h2>"+getMessage(fa.language,10205)+"</h2>");
      $("#div_form_search").hide();
      $("#div_message").empty();
      $("#text_error_message").empty();
      $("#table_body").empty();$("#table_head").empty();
      if(curr_object_name!=='Store'){
        apClearSearch();
        PAGE_SET=0;PAGE_CURR=0;PAGE_COUNT=5;/*five pages in*/
        $("#div_pages").hide();
      }
      curr_picture_function="store";
      curr_object_name='Store';
      curr_object_list='fa.store_list';
      PAGE_ROWS=rows_count;
      fa.offset=PAGE_SET*PAGE_COUNT*PAGE_ROWS+PAGE_CURR*PAGE_ROWS;fa.rows=PAGE_ROWS;
      $("#search").attr("placeholder",getMessage(fa.language,20005));
      var store=new faStore();
      store.id="%";
      if(search!==null&&search!=='')store.name="%"+search+"%";
      fa.store_list.length=0;
      fa.getStore(store,fa.language,"#text_error_message",apAfter);
      $(document).one("ajaxStop",function(){
        apShowStore();
        /*pictures*/
        if(fa.store_list.length>0){
          var j,store;
          for(j=0;j<fa.store_list.length;j++){
            store=fa.store_list[j];
            fa.getPicture(store,store.id,curr_picture_function,null,apAfterPicture,store);
          }
        }
      });
      $("#div_buttons").show();
    }
    function apShowStore(){
      var h;
      if(fa.store_list.length>0){
        h=faParsePattern(fa.store_list,
        '<tr id="%%id%%"><td>%%id%%</td>'+
        '<td><img id="img_picture_%%id%%" onclick="apPictureClick(%%id%%);" src="'+picture_do_not_disturb+'" class="img-rounded" style="width: 100%; display: inline;" alt="PICTURE"></td>'+
        '<td><input type="text" onchange="apUpdateInput(%%id%%,this);" name="name" value="%%name%%"></td>'+
        '<td><input type="text" onchange="apUpdateInput(%%id%%,this);" name="description" value="%%description%%"></td>'+
        '<td><div class="form-group"><div class="checkbox"><input type="checkbox" onchange="apUpdateCheckbox(%%id%%,this);" %%apChecked(obj.active)%% name="active" value="%%active%%" id="input_activity_%%id%%"><label id="label_activity" for="input_activity_%%id%%"><span></span></label></div></div></td>'+
        '<td>%%getTimesAgoFrom(toMySQLDatetimeMilisec(obj.last_update),fa.language)%%</td>'+
        '<td><button type="button" class="btn btn-primary btn-lg" title="Remove" onclick="apRemoveObject(%%id%%,\'store\',getData);">'+remove_icon+'</button></td>'+
        '<td><button type="button" class="btn btn-primary btn-lg" title="Update" onclick="apUpdateObject(%%id%%,apAfterUpdateStore);">'+update_icon+'</button></td>'+
        '</tr>');
        $("#table_body").html(h);
      }
      h="<tr id='tr_table_header'><th>Id</th><th>Picture</th><th>Name</th><th>Description</th><th>Activity</th><th>Last update</th><th>Remove</th><th>Update</th></tr>";
      $("#table_head").html(h);
      updateTableHeader(fa.language);
    }
    function apAddStore(){
      var h=faParsePattern(null,
      '<tr id="'+temp_id+'"><td>&ndash;</td>'+
      '<td>&ndash;</td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="name" value=""></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="description" value=""></td>'+
      '<td><div class="form-group"><div class="checkbox"><input type="checkbox" onchange="apUpdateCheckbox('+temp_id+',this);" name="active" value="" id="input_activity_'+temp_id+'"><label id="label_activity" for="input_activity_'+temp_id+'"><span></span></label></div></div></td>'+
      '<td>&ndash;</td>'+
      '<td><button type="button" class="btn btn-primary btn-lg" title="Remove" onclick="apRemoveEmptyId('+temp_id+');">'+remove_icon+'</button></td>'+
      '<td><button type="button" class="btn btn-primary btn-lg" title="Update" onclick="apUpdateObject('+temp_id+',apAfterUpdateStore);">'+update_icon+'</button></td>'+
      '</tr>');
      $("#table_body").append(h);

      var store=new faStore();
      store.id=temp_id;
      fa.store_list.push(store);

      temp_id--;
    }
    function apAfterUpdateStore(ptr){
      var list=fa.ret_val_list;
      if(list.length>0){
        var ret_val=list[list.length-1];
        if(ret_val.status==="ERROR"){
        }
        else if(ret_val.status==="SUCCESS"){
          if(ptr.id===null||parseInt(ptr.id)<temp_value){/*replace id*/
            ptr.id=ret_val.value;
          }
          if(ptr.active===null)ptr.active=0;
          fa.updateStoreActivity(ptr.id,ptr.active,"#text_error_message",getData);
        }
      }
    }

    /*store_part*/
    function apGetStorePart(){
      $("#div_object_name").html("<h2>"+getMessage(fa.language,10206)+"</h2>");
      $("#div_form_search").hide();
      $("#div_message").empty();
      $("#text_error_message").empty();
      $("#table_body").empty();$("#table_head").empty();
      if(curr_object_name!=='StorePart'){
        apClearSearch();
        PAGE_SET=0;PAGE_CURR=0;PAGE_COUNT=5;/*five pages in*/
        $("#div_pages").hide();
      }
      curr_picture_function="store_part";
      curr_object_name='StorePart';
      curr_object_list='fa.store_part_list';
      PAGE_ROWS=rows_count;
      fa.offset=PAGE_SET*PAGE_COUNT*PAGE_ROWS+PAGE_CURR*PAGE_ROWS;fa.rows=PAGE_ROWS;
      $("#search").attr("placeholder",getMessage(fa.language,20106));
      var store_part=new faStorePart();
      store_part.store_id="%";
      if(search!==null&&search!=='')store_part.store_id=search;
      fa.store_part_list.length=0;
      fa.getStorePart(store_part,null,"#text_error_message",apAfter);
      fa.offset=null;fa.rows=null;
      var store=new faStore();
      store.id="%";
      fa.store_list.length=0;
      fa.getStore(store,fa.language,"#text_error_message",null);
      fa.language_list.length=0;
      fa.getLanguage("#text_error_message",null);
      $(document).one("ajaxStop",function(){
        apShowStorePart();
        /*pictures*/
        if(fa.store_part_list.length>0){
          var j,store_part;
          for(j=0;j<fa.store_part_list.length;j++){
            store_part=fa.store_part_list[j];
            fa.getPicture(store_part,store_part.id,curr_picture_function,null,apAfterPicture,store_part);
          }
        }
      });
      $("#div_buttons").show();
    }
    function apShowStorePart(){
      var h;
      if(fa.store_part_list.length>0){
        h=faParsePattern(fa.store_part_list,
        '<tr id="%%id%%"><td>%%id%%</td>'+
        '<td><img id="img_picture_%%id%%" onclick="apPictureClick(%%id%%);" src="'+picture_do_not_disturb+'" class="img-rounded" style="width: 100%; display: inline;" alt="PICTURE"></td>'+
        '<td><select options="fa.store_list" onchange="apUpdateSelect(%%id%%,this);" name="store_id" option_selected="%%store_id%%" option_value="id" option_name="obj.name+\' [\'+parseAttrList(obj.attr_list)+\']\'"><option value=""></option></select></td>'+
        '<td><input type="text" onchange="apUpdateInput(%%id%%,this);" name="name" value="%%name%%"></td>'+
        '<td><input type="text" onchange="apUpdateInput(%%id%%,this);" name="description" value="%%description%%"></td>'+
        '<td><input type="text" onchange="apUpdateInput(%%id%%,this);" name="latitude" value="%%latitude%%"></td>'+
        '<td><input type="text" onchange="apUpdateInput(%%id%%,this);" name="longitude" value="%%longitude%%"></td>'+
        '<td><input type="text" onchange="apUpdateInput(%%id%%,this);" name="email" value="%%email%%"></td>'+
        '<td><input type="text" onchange="apUpdateInput(%%id%%,this);" name="phone1" value="%%phone1%%"></td>'+
        '<td><input type="text" onchange="apUpdateInput(%%id%%,this);" name="phone2" value="%%phone2%%"></td>'+
        '<td><input type="text" onchange="apUpdateInput(%%id%%,this);" name="address" value="%%address%%"></td>'+
        '<td><input type="text" onchange="apUpdateInput(%%id%%,this);" name="city" value="%%city%%"></td>'+
        '<td><input type="text" onchange="apUpdateInput(%%id%%,this);" name="postcode" value="%%postcode%%"></td>'+
        '<td><select options="fa.language_list" onchange="apUpdateSelect(%%id%%,this);" name="language" option_selected="%%language%%" option_value="value" option_name="value"><option value=""></option></select></td>'+
        '<td>%%getTimesAgoFrom(toMySQLDatetimeMilisec(obj.last_update),fa.language)%%</td>'+
        '<td><button type="button" class="btn btn-primary btn-lg" title="Remove" onclick="apRemoveObject(%%id%%,\'store_part\',getData);">'+remove_icon+'</button></td>'+
        '<td><button type="button" class="btn btn-primary btn-lg" title="Update" onclick="apUpdateObject(%%id%%,getData);">'+update_icon+'</button></td>'+
        '</tr>');
        $("#table_body").html(h);
      }
      h="<tr id='tr_table_header'><th>Id</th><th>Picture</th><th>Store</th><th>Name</th><th>Description</th><th>Latitude</th><th>Longitude</th><th>Email</th><th>Phone1</th><th>Phone2</th><th>Address</th><th>City</th><th>Postcode</th><th>Language</th><th>Last update</th><th>Remove</th><th>Update</th></tr>";
      $("#table_head").html(h);
      updateTableHeader(fa.language);
    }
    function apAddStorePart(){
      var h=faParsePattern(null,
      '<tr id="'+temp_id+'"><td>&ndash;</td>'+
      '<td>&ndash;</td>'+
      '<td><select options="fa.store_list" onchange="apUpdateSelect('+temp_id+',this);" name="store_id" option_selected="" option_value="id" option_name="obj.name+\' [\'+parseAttrList(obj.attr_list)+\']\'"><option value=""></option></select></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="name" value=""></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="description" value=""></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="latitude" value=""></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="longitude" value=""></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="email" value=""></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="phone1" value=""></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="phone2" value=""></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="address" value=""></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="city" value=""></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="postcode" value=""></td>'+
      '<td><select options="fa.language_list" onchange="apUpdateSelect('+temp_id+',this);" name="language" option_selected="" option_value="value" option_name="value"><option value=""></option></select></td>'+
      '<td>&ndash;</td>'+
      '<td><button type="button" class="btn btn-primary btn-lg" title="Remove" onclick="apRemoveEmptyId('+temp_id+');">'+remove_icon+'</button></td>'+
      '<td><button type="button" class="btn btn-primary btn-lg" title="Update" onclick="apUpdateObject('+temp_id+',getData);">'+update_icon+'</button></td>'+
      '</tr>');
      $("#table_body").append(h);

      var store_part=new faStorePart();
      store_part.id=temp_id;
      fa.store_part_list.push(store_part);

      temp_id--;
    }

    /*ORDERS*/

    /*order_job*/
    function apGetOrderJob(){
      $("#div_object_name").html("<h2>"+getMessage(fa.language,10218)+"</h2>");
      $("#div_form_search").hide();
      $("#div_message").empty();
      $("#text_error_message").empty();
      $("#table_body").empty();$("#table_head").empty();
      $("#div_buttons").hide();
      $("#div_pages").hide();
    }

    /*order_AB*/
    function apGetOrderAB(){
      $("#div_object_name").html("<h2>"+getMessage(fa.language,10207)+"</h2>");
      $("#div_form_search").hide();
      $("#div_message").empty();
      $("#text_error_message").empty();
      $("#table_body").empty();$("#table_head").empty();
      if(curr_object_name!=='OrderAB'){
        apClearSearch();
        PAGE_SET=0;PAGE_CURR=0;PAGE_COUNT=5;/*five pages in*/
        $("#div_pages").hide();
      }
      curr_object_name='OrderAB';
      curr_object_list='fa.order_AB_list';
      PAGE_ROWS=rows_count;
      fa.offset=PAGE_SET*PAGE_COUNT*PAGE_ROWS+PAGE_CURR*PAGE_ROWS;fa.rows=PAGE_ROWS;
      $("#search").attr("placeholder",getMessage(fa.language,20075));
      var order=new faOrderAB();
      order.id="%";
      if(search!==null&&search!=='')order.order_address="%"+search+"%";
      if(search_id!==null&&search_id!=='')order.id=search_id;
      if(search_date!==null&&search_date!=='')order.create_date="%"+search_date+"%";
      if(search_name1!==null&&search_name1!=='')order.delivery_address="%"+search_name1+"%";
      fa.order_AB_list.length=0;
      fa.getOrderAB(order,fa.language,"#text_error_message",apAfter);
      fa.offset=null;fa.rows=null;
      var transport=new faTransport();
      transport.id="%";
      fa.transport_list.length=0;
      fa.getTransport(transport,fa.language,"#text_error_message",null);
      var obj_type=new faObjectType();
      obj_type.id="%";
      fa.order_status_list.length=0;
      fa.getOrderStatus(obj_type,fa.language,"#text_error_message",null);
      var obj_type=new faObjectType();
      obj_type.id="%";
      fa.delivery_type_list.length=0;
      fa.getDeliveryType(obj_type,fa.language,"#text_error_message",null);
      $(document).one("ajaxStop",function(){
        apShowOrderAB();
        /*create search form*/
        apSearchForm("Id",getMessage(fa.language,20025),getMessage(fa.language,20078),null,null,null,null);
      });
      $("#div_buttons").show();
    }
    function apShowOrderAB(){
      var h;
      if(fa.order_AB_list.length>0){
        h=faParsePattern(fa.order_AB_list,
        '<tr id="%%id%%"><td>%%id%%</td>'+
        '<td>%%obj.user?obj.user.call_name+\' (\'+obj.user.id+\')\':\'&ndash;\'%%</td>'+
        '<td><select options="fa.transport_list" onchange="apUpdateSelect(%%id%%,this);" name="transport_id" option_selected="%%transport_id%%" option_value="id" option_name="obj.name+\' \'+obj.license_plate+\' (\'+obj.id+\')\'"><option value=""></option></select></td>'+
        '<td><select options="fa.order_status_list" onchange="apUpdateSelect(%%id%%,this);" name="order_status_id" option_selected="%%order_status_id%%" option_value="id" option_name="obj.name+\' [\'+parseAttrList(obj.attr_list)+\']\'"><option value=""></option></select></td>'+
        '<td><input type="text" onchange="apUpdateInput(%%id%%,this);" name="total_price" value="%%total_price%%"></td>'+
        '<td><input type="text" onchange="apUpdateInput(%%id%%,this);" name="route_distance" value="%%route_distance%%"></td>'+
        '<td><input type="text" onchange="apUpdateInput(%%id%%,this);" name="route_duration" value="%%route_duration%%"></td>'+
        '<td><input type="text" onchange="apUpdateInput(%%id%%,this);" name="order_lat" value="%%order_lat%%"></td>'+
        '<td><input type="text" onchange="apUpdateInput(%%id%%,this);" name="order_lon" value="%%order_lon%%"></td>'+
        '<td><input type="text" onchange="apUpdateInput(%%id%%,this);" name="order_address" value="%%order_address%%"></td>'+
        '<td><input type="text" onchange="apUpdateInput(%%id%%,this);" name="delivery_lat" value="%%delivery_lat%%"></td>'+
        '<td><input type="text" onchange="apUpdateInput(%%id%%,this);" name="delivery_lon" value="%%delivery_lon%%"></td>'+
        '<td><input type="text" onchange="apUpdateInput(%%id%%,this);" name="delivery_address" value="%%delivery_address%%"></td>'+
        '<td><select options="fa.delivery_type_list" onchange="apUpdateSelect(%%id%%,this);" name="delivery_type_id" option_selected="%%delivery_type_id%%" option_value="id" option_name="obj.name+\' [\'+parseAttrList(obj.attr_list)+\']\'"><option value=""></option></select></td>'+
        '<td><input type="text" onchange="apUpdateDate(%%id%%,this);" name="reserved_date" value="%%obj.reserved_date?fromMySQLDatetimeString(obj.reserved_date):\'\'%%"></td>'+
        '<td><input type="text" onchange="apUpdateInput(%%id%%,this);" name="reserved_hours" value="%%reserved_hours%%"></td>'+
        '<td><div class="form-group"><div class="checkbox"><input type="checkbox" disabled %%apChecked(obj.purchase_list.length>0)%% id="input_purchase_%%id%%"><label id="label_purchase" for="input_purchase_%%id%%"><span></span></label></div></div></td>'+
        '<td>%%fromMySQLDatetimeString(obj.create_date)%%</td>'+
        '<td>%%getTimesAgoFrom(toMySQLDatetimeMilisec(obj.last_update),fa.language)%%</td>'+
        '<td><button type="button" class="btn btn-primary btn-lg" title="Download" onclick="apDownloadOrderAB(%%id%%);">'+download_icon+'</button></td>'+
        '<td><button type="button" class="btn btn-primary btn-lg" title="Remove" onclick="apRemoveObject(%%id%%,\'order_AB\',getData);">'+remove_icon+'</button></td>'+
        '<td><button type="button" class="btn btn-primary btn-lg" title="Update" onclick="apUpdateObject(%%id%%,getData,apBeforeUpdateOrderAB);">'+update_icon+'</button></td>'+
        '</tr>');
        $("#table_body").html(h);
      }
      h="<tr id='tr_table_header'><th>Id</th><th>User(Id)</th><th>Transport</th><th>Status</th><th>Total price</th><th>Distance</th><th>Duration</th><th>A.Latitude</th><th>A.Longitude</th><th>A.Address</th><th>B.Latitude</th><th>B.Longitude</th><th>B.Address</th><th>Delivery type</th><th>Reserved date</th><th>Reserved hours</th><th>Purchase</th><th>Create date</th><th>Last update</th><th>Download</th><th>Remove</th><th>Update</th></tr>";
      $("#table_head").html(h);
      updateTableHeader(fa.language);
    }
    function apAddOrderAB(){
      var h=faParsePattern(null,
      '<tr id="'+temp_id+'"><td>&ndash;</td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="user_id" value=""></td>'+
      '<td><select options="fa.transport_list" onchange="apUpdateSelect('+temp_id+',this);" name="transport_id" option_selected="" option_value="id" option_name="obj.name+\' \'+obj.license_plate+\' (\'+obj.id+\')\'"><option value=""></option></select></td>'+
      '<td><select options="fa.order_status_list" onchange="apUpdateSelect('+temp_id+',this);" name="order_status_id" option_selected="" option_value="id" option_name="obj.name+\' [\'+parseAttrList(obj.attr_list)+\']\'"><option value=""></option></select></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="total_price" value=""></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="route_distance" value=""></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="route_duration" value=""></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="order_lat" value=""></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="order_lon" value=""></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="order_address" value=""></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="delivery_lat" value=""></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="delivery_lon" value=""></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="delivery_address" value=""></td>'+
      '<td><select options="fa.delivery_type_list" onchange="apUpdateSelect('+temp_id+',this);" name="delivery_type_id" option_selected="" option_value="id" option_name="obj.name+\' [\'+parseAttrList(obj.attr_list)+\']\'"><option value=""></option></select></td>'+
      '<td><input type="text" onchange="apUpdateDate('+temp_id+',this);" name="reserved_date" value="" title="'+getCurrentDatetime()+'"></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="reserved_hours" value=""></td>'+
      '<td><div class="form-group"><div class="checkbox"><input type="checkbox" disabled id="input_activity_'+temp_id+'"><label id="label_activity" for="input_activity_'+temp_id+'"><span></span></label></div></div></td>'+
      '<td>&ndash;</td>'+
      '<td>&ndash;</td>'+
      '<td><button type="button" class="btn btn-primary btn-lg" title="Remove" onclick="apRemoveEmptyId('+temp_id+');">'+remove_icon+'</button></td>'+
      '<td><button type="button" class="btn btn-primary btn-lg" title="Update" onclick="apUpdateObject('+temp_id+',apAfterUpdateOrderAB,apBeforeUpdateOrderAB);">'+update_icon+'</button></td>'+
      '</tr>');
      $("#table_body").append(h);

      var order=new faOrderAB();
      order.id=temp_id;
      fa.order_AB_list.push(order);

      temp_id--;
    }
    function apAfterUpdateOrderAB(ptr){
      var list=fa.ret_val_list;
      if(list.length>0){
        var ret_val=list[list.length-1];
        if(ret_val.status==="ERROR"){
        }
        else if(ret_val.status==="SUCCESS"){
          if(ptr.id===null||parseInt(ptr.id)<temp_value){/*replace id*/
            ptr.id=ret_val.value;
          }
          if(ptr.order_status_id!==null){
            fa.updateOrderABStatus(ptr.id,ptr.order_status_id,"#text_error_message",getData);
          }
        }
      }
    }
    function apBeforeUpdateOrderAB(ptr){
      if(ptr.transport_id===null||ptr.transport_id==='')ptr.transport_id=-1;
      if(ptr.order_status_id===null||ptr.order_status_id==='')ptr.order_status_id=-1;
      if(ptr.delivery_type_id===null||ptr.delivery_type_id==='')ptr.delivery_type_id=-1;
      if(ptr.route_distance===null||ptr.route_distance==='')ptr.route_distance=-1;
      if(ptr.route_duration===null||ptr.route_duration==='')ptr.route_duration=-1;
      if(ptr.reserved_hours===null||ptr.reserved_hours==='')ptr.reserved_hours=-1;

      ptr.route_data=null;

      toMySQLDatetimeString(ptr.reserved_date);
    }
    function apDownloadOrderAB(order_id){
      var rep_val=new repVal();
      rep_val.id=order_id;
      fa.getReport('report_order',rep_val,fa.language,"#text_error_message",showReportFilepath,null);
    }

    /*order_product_part*/
    function apGetOrderABProductPart(){
      $("#div_object_name").html("<h2>"+getMessage(fa.language,10216)+"</h2>");
      $("#div_form_search").hide();
      $("#div_message").empty();
      $("#text_error_message").empty();
      $("#table_body").empty();$("#table_head").empty();
      if(curr_object_name!=='OrderABProductPart'){
        apClearSearch();
        PAGE_SET=0;PAGE_CURR=0;PAGE_COUNT=5;/*five pages in*/
        $("#div_pages").hide();
      }
      curr_object_name='OrderABProductPart';
      curr_object_list='fa.order_AB_product_part_list';
      PAGE_ROWS=rows_count;
      fa.offset=PAGE_SET*PAGE_COUNT*PAGE_ROWS+PAGE_CURR*PAGE_ROWS;fa.rows=PAGE_ROWS;
      $("#search").attr("placeholder",getMessage(fa.language,20103));
      var order_part=new faOrderABProductPart();
      order_part.order_id="%";
      if(search!==null&&search!=='')order_part.order_id=search;
      fa.order_AB_product_part_list.length=0;
      fa.getOrderABProductPart(order_part,fa.language,"#text_error_message",apAfter);
      fa.offset=null;fa.rows=null;
      var product=new faProduct();
      product.id="%";
      fa.product_list.length=0;
      fa.getProduct(product,fa.language,null,null,"#text_error_message",null);
      var product_param=new faProductParam();
      product_param.id="%";
      fa.product_param_list.length=0;
      fa.getProductParam(product_param,fa.language,"#text_error_message",null);
      var product_param_part=new faProductParam();
      product_param_part.id="%";
      fa.product_param_part_list.length=0;
      fa.getProductParamPart(product_param_part,fa.language,"#text_error_message",null);
      $(document).one("ajaxStop",function(){
        /*virtual id create*/
        if(fa.order_AB_product_part_list.length>0){
          var j,order_part;
          for(j=0;j<fa.order_AB_product_part_list.length;j++){
            order_part=fa.order_AB_product_part_list[j];
            order_part.id=(order_part.order_id*id_reserved_value)+order_part.product_id;
          }
        }
        apShowOrderABProductPart();
      });
      $("#div_buttons").show();
    }
    function apShowOrderABProductPart(){
      var h;
      if(fa.order_AB_product_part_list.length>0){
        h=faParsePattern(fa.order_AB_product_part_list,
        '<tr id="%%order_id%%"><td>%%order_id%%</td>'+
        '<td><select options="fa.product_list" onchange="apUpdateSelect(%%id%%,this);" name="product_id" option_selected="%%product_id%%" option_value="id" option_name="obj.name+\' [\'+parseAttrList(obj.attr_list)+\']\'"><option value=""></option></select>'+
        '\r\n%%parseProduct(obj.product)%%'+currency_title+'</td>'+
        '<td>%%parseProductDiscount(obj.product,fa.language,currency_title)%%</td>'+
        '<td>%%parseProductParam(obj.product.param_list)%%'+currency_title+
        '<select options="fa.product_param_list" onchange="apUpdateSelectProductParam(this);" name="product_param_id" option_selected="" option_value="id" option_name="obj.name+\' [\'+parseAttrList(obj.attr_list)+\']\'"><option value=""></option></select>'+
        '<br><br><button type="button" class="btn btn-primary btn-lg" title="Add to Order" onclick="apAddOrderABProductParamPart(%%id%%,getData);">'+add_icon+'</button>'+
        '&nbsp;<button type="button" class="btn btn-primary btn-lg" title="Remove from Order" onclick="apRemoveOrderABProductParamPart(%%id%%,getData);">'+remove_icon+'</button>'+
        '</td>'+
        '<td><input type="text" onchange="apUpdateInput(%%id%%,this);" name="product_count" value="%%product_count%%"></td>'+
        '<td><input type="text" onchange="apUpdateInput(%%id%%,this);" name="total_price" value="%%total_price%%"></td>'+
        '<td>%%getTimesAgoFrom(toMySQLDatetimeMilisec(obj.last_update),fa.language)%%</td>'+
        '<td><button type="button" class="btn btn-primary btn-lg" title="Remove" onclick="apRemoveOrderABProductPart(%%order_id%%,%%product_id%%,getData);">'+remove_icon+'</button></td>'+
        '<td><button type="button" class="btn btn-primary btn-lg" title="Update" onclick="apUpdateObject(%%id%%,getData,apBeforeUpdateOrderABProductPart);">'+update_icon+'</button></td>'+
        '</tr>');
        $("#table_body").html(h);
      }
      h="<tr id='tr_table_header'><th>OrderId</th><th>Product</th><th>Product discount</th><th>Product param</th><th>Product count</th><th>Total price</th><th>Last update</th><th>Remove</th><th>Update</th></tr>";
      $("#table_head").html(h);
      updateTableHeader(fa.language);
    }
    function apAddOrderABProductPart(){
      var h=faParsePattern(null,
      '<tr id="'+temp_id+'">'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="order_id" value=""></td>'+
      '<td><select options="fa.product_list" onchange="apUpdateSelect('+temp_id+',this);" name="product_id" option_selected="" option_value="id" option_name="obj.name+\' [\'+parseAttrList(obj.attr_list)+\']\'"><option value=""></option></select></td>'+
      '<td>&ndash;</td>'+
      '<td>&ndash;</td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="product_count" value="0"></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="total_price" value=""></td>'+
      '<td>&ndash;</td>'+
      '<td><button type="button" class="btn btn-primary btn-lg" title="Remove" onclick="apRemoveEmptyId('+temp_id+');">'+remove_icon+'</button></td>'+
      '<td><button type="button" class="btn btn-primary btn-lg" title="Update" onclick="apUpdateObject('+temp_id+',getData,apBeforeUpdateOrderABProductPart);">'+update_icon+'</button></td>'+
      '</tr>');
      $("#table_body").append(h);

      var order_part=new faOrderABProductPart();
      order_part.id=temp_id;
      fa.order_AB_product_part_list.push(order_part);

      temp_id--;
    }
    function apRemoveOrderABProductPart(order_id,product_id,callback){
      fa.removeOrderABProductPart(order_id,product_id,"#text_error_message",callback);
    }
    function apBeforeUpdateOrderABProductPart(ptr){
      if(ptr.product_id===null||ptr.product_id==='')ptr.product_id=-1;
      if(ptr.product_count===null||ptr.product_count==='')ptr.product_count=0;
    }
    var selected_value=null;/*if creates more must UP*/
    function apUpdateSelectProductParam(select){
      selected_value=$(select).val();
    }
    function apAddOrderABProductParamPart(object_id,callback){
      var obj=apFindObjectById(curr_object_list,object_id);
      var obj_param=apFindObjectById('fa.product_param_list',selected_value);
      if(obj&&obj_param){
        var order_product_param_part=new faOrderABProductParamPart();
        order_product_param_part.order_id=obj.order_id;
        order_product_param_part.product_id=obj.product_id;
        order_product_param_part.product_param_id=obj_param.id;
        order_product_param_part.count=1;/*take one*/
        var obj_param_part=apFindObjectBy2Value('fa.product_param_part_list','product_id','product_param_id',obj.product_id,obj_param.id);
        order_product_param_part.price=(obj_param_part?obj_param_part.price:0);
        fa.addOrderABProductParamPart(order_product_param_part,"#text_error_message",callback);
      }
    }
    function apRemoveOrderABProductParamPart(object_id,callback){
      var obj=apFindObjectById(curr_object_list,object_id);
      var obj_param=apFindObjectById('fa.product_param_list',selected_value);
      if(obj&&obj_param){
        fa.removeOrderABProductParamPart(obj.order_id,obj.product_id,obj_param.id,"#text_error_message",callback);
      }
    }

    /*order_user_part*/
    function apGetOrderABUserPart(){
      $("#div_object_name").html("<h2>"+getMessage(fa.language,10217)+"</h2>");
      $("#div_form_search").hide();
      $("#div_message").empty();
      $("#text_error_message").empty();
      $("#table_body").empty();$("#table_head").empty();
      $("#div_buttons").hide();
      $("#div_pages").hide();
    }

    /*manufacture*/
    function apGetManufacture(){
      $("#div_object_name").html("<h2>"+getMessage(fa.language,10209)+"</h2>");
      $("#div_form_search").hide();
      $("#div_message").empty();
      $("#text_error_message").empty();
      $("#table_body").empty();$("#table_head").empty();
      if(curr_object_name!=='Manufacture'){
        apClearSearch();
        PAGE_SET=0;PAGE_CURR=0;PAGE_COUNT=5;/*five pages in*/
        $("#div_pages").hide();
      }
      curr_picture_function="manufacture";
      curr_object_name='Manufacture';
      curr_object_list='fa.manufacture_list';
      PAGE_ROWS=rows_count;
      fa.offset=PAGE_SET*PAGE_COUNT*PAGE_ROWS+PAGE_CURR*PAGE_ROWS;fa.rows=PAGE_ROWS;
      $("#search").attr("placeholder",getMessage(fa.language,20005));
      var manufacture=new faManufacture();
      manufacture.id="%";
      if(search!==null&&search!=='')manufacture.name="%"+search+"%";
      fa.manufacture_list.length=0;
      fa.getManufacture(manufacture,fa.language,"#text_error_message",apAfter);
      $(document).one("ajaxStop",function(){
        apShowManufacture();
        /*pictures*/
        if(fa.manufacture_list.length>0){
          var j,manufacture;
          for(j=0;j<fa.manufacture_list.length;j++){
            manufacture=fa.manufacture_list[j];
            fa.getPicture(manufacture,manufacture.id,curr_picture_function,null,apAfterPicture,manufacture);
          }
        }
      });
      $("#div_buttons").show();
    }
    function apShowManufacture(){
      var h;
      if(fa.manufacture_list.length>0){
        h=faParsePattern(fa.manufacture_list,
        '<tr id="%%id%%"><td>%%id%%</td>'+
        '<td><img id="img_picture_%%id%%" onclick="apPictureClick(%%id%%);" src="'+picture_do_not_disturb+'" class="img-rounded" style="width: 100%; display: inline;" alt="PICTURE"></td>'+
        '<td><input type="text" onchange="apUpdateInput(%%id%%,this);" name="name" value="%%name%%"></td>'+
        '<td><input type="text" onchange="apUpdateInput(%%id%%,this);" name="description" value="%%description%%"></td>'+
        '<td>%%getTimesAgoFrom(toMySQLDatetimeMilisec(obj.last_update),fa.language)%%</td>'+
        '<td><button type="button" class="btn btn-primary btn-lg" title="Remove" onclick="apRemoveObject(%%id%%,\'manufacture\',getData);">'+remove_icon+'</button></td>'+
        '<td><button type="button" class="btn btn-primary btn-lg" title="Update" onclick="apUpdateObject(%%id%%,getData);">'+update_icon+'</button></td>'+
        '</tr>');
        $("#table_body").html(h);
      }
      h="<tr id='tr_table_header'><th>Id</th><th>Picture</th><th>Name</th><th>Description</th><th>Last update</th><th>Remove</th><th>Update</th></tr>";
      $("#table_head").html(h);
      updateTableHeader(fa.language);
    }
    function apAddManufacture(){
      var h=faParsePattern(null,
      '<tr id="'+temp_id+'"><td>&ndash;</td>'+
      '<td>&ndash;</td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="name" value=""></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="description" value=""></td>'+
      '<td>&ndash;</td>'+
      '<td><button type="button" class="btn btn-primary btn-lg" title="Remove" onclick="apRemoveEmptyId('+temp_id+');">'+remove_icon+'</button></td>'+
      '<td><button type="button" class="btn btn-primary btn-lg" title="Update" onclick="apUpdateObject('+temp_id+',getData);">'+update_icon+'</button></td>'+
      '</tr>');
      $("#table_body").append(h);

      var manufacture=new faManufacture();
      manufacture.id=temp_id;
      fa.manufacture_list.push(manufacture);

      temp_id--;
    }

    /*product*/
    function apGetProduct(){
      $("#div_object_name").html("<h2>"+getMessage(fa.language,10210)+"</h2>");
      $("#div_form_search").hide();
      $("#div_message").empty();
      $("#text_error_message").empty();
      $("#table_body").empty();$("#table_head").empty();
      if(curr_object_name!=='Product'){
        apClearSearch();
        PAGE_SET=0;PAGE_CURR=0;PAGE_COUNT=5;/*five pages in*/
        $("#div_pages").hide();
      }
      curr_picture_function="product";
      curr_object_name='Product';
      curr_object_list='fa.product_list';
      PAGE_ROWS=rows_count;
      fa.offset=PAGE_SET*PAGE_COUNT*PAGE_ROWS+PAGE_CURR*PAGE_ROWS;fa.rows=PAGE_ROWS;
      $("#search").attr("placeholder",getMessage(fa.language,20005));
      var product=new faProduct();
      product.id="%";
      var price_from=null,price_to=null;
      if(search!==null&&search!=='')product.name="%"+search+"%";
      if(search_id!==null&&search_id!=='')product.id=search_id;
      if(search_name1!==null&&search_name1!=='')product.code="%"+search_name1+"%";
      if(search_name2!==null&&search_name2!=='')price_from="%"+search_name2+"%";
      if(search_name3!==null&&search_name3!=='')price_to="%"+search_name3+"%";
      if(search_name4!==null&&search_name4!=='')product.stock_count="%"+search_name4+"%";
      fa.product_list.length=0;
      fa.getProduct(product,fa.language,price_from,price_to,"#text_error_message",apAfter);
      fa.offset=null;fa.rows=null;
      var manufacture=new faManufacture();
      manufacture.id="%";
      fa.manufacture_list.length=0;
      fa.getManufacture(manufacture,fa.language,"#text_error_message",null);
      var discount=new faDiscount();
      discount.code="%";
      fa.discount_list.length=0;
      fa.getDiscount(discount,fa.language,"#text_error_message",null);
      $(document).one("ajaxStop",function(){
        apShowProduct();
        /*create search form*/
        apSearchForm("Id",null,getMessage(fa.language,20007),getMessage(fa.language,9003),getMessage(fa.language,9004),getMessage(fa.language,20087),null);
        /*pictures*/
        if(fa.product_list.length>0){
          var j,product;
          for(j=0;j<fa.product_list.length;j++){
            product=fa.product_list[j];
            fa.getPicture(product,product.id,curr_picture_function,null,apAfterPicture,product);
          }
        }
      });
      $("#div_buttons").show();
    }
    function apShowProduct(){
      var h;
      if(fa.product_list.length>0){
        h=faParsePattern(fa.product_list,
        '<tr id="%%id%%"><td>%%id%%</td>'+
        '<td><img id="img_picture_%%id%%" onclick="apPictureClick(%%id%%);" src="'+picture_do_not_disturb+'" class="img-rounded" style="width: 100%; display: inline;" alt="PICTURE"></td>'+
        '<td><select options="fa.manufacture_list" onchange="apUpdateSelect(%%id%%,this);" name="manufacture_id" option_selected="%%manufacture_id%%" option_value="id" option_name="obj.name+\' [\'+parseAttrList(obj.attr_list)+\']\'"><option value=""></option></select>'+
        '<td><select options="fa.discount_list" onchange="apUpdateSelect(%%id%%,this);" name="discount_code" option_selected="%%discount_code%%" option_value="code" option_name="code"><option value=""></option></select></td>'+
        '<td><input type="text" onchange="apUpdateInput(%%id%%,this);" name="name" value="%%name%%"></td>'+
        '<td><input type="text" onchange="apUpdateInput(%%id%%,this);" name="description" value="%%description%%"></td>'+
        '<td><input type="text" onchange="apUpdateInput(%%id%%,this);" name="code" value="%%code%%"></td>'+
        '<td><input type="text" onchange="apUpdateInput(%%id%%,this);" name="price" value="%%price%%"></td>'+
        '<td>%%rate%%</td>'+
        '<td>%%stock_count%%</td>'+
        '<td>%%getTimesAgoFrom(toMySQLDatetimeMilisec(obj.last_update),fa.language)%%</td>'+
        '<td><button type="button" class="btn btn-primary btn-lg" title="Remove" onclick="apRemoveObject(%%id%%,\'product\',getData);">'+remove_icon+'</button></td>'+
        '<td><button type="button" class="btn btn-primary btn-lg" title="Update" onclick="apUpdateObject(%%id%%,apAfterUpdateProduct,apBeforeUpdateProduct);">'+update_icon+'</button></td>'+
        '</tr>');
        $("#table_body").html(h);
      }
      h="<tr id='tr_table_header'><th>Id</th><th>Picture</th><th>Manufacture</th><th>Discount</th><th>Name</th><th>Description</th><th>Code</th><th>Price</th><th>Rate</th><th>Stock count</th><th>Last update</th><th>Remove</th><th>Update</th></tr>";
      $("#table_head").html(h);
      updateTableHeader(fa.language);
    }
    function apAddProduct(){
      var h=faParsePattern(null,
      '<tr id="'+temp_id+'"><td>&ndash;</td>'+
      '<td>&ndash;</td>'+
      '<td><select options="fa.manufacture_list" onchange="apUpdateSelect('+temp_id+',this);" name="manufacture_id" option_selected="" option_value="id" option_name="obj.name+\' [\'+parseAttrList(obj.attr_list)+\']\'"><option value=""></option></select>'+
      '<td><select options="fa.discount_list" onchange="apUpdateSelect('+temp_id+',this);" name="discount_code" option_selected="" option_value="code" option_name="code"><option value=""></option></select></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="name" value=""></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="description" value=""></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="code" value=""></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="price" value=""></td>'+
      '<td>&ndash;</td>'+
      '<td>&ndash;</td>'+
      '<td>&ndash;</td>'+
      '<td><button type="button" class="btn btn-primary btn-lg" title="Remove" onclick="apRemoveEmptyId('+temp_id+');">'+remove_icon+'</button></td>'+
      '<td><button type="button" class="btn btn-primary btn-lg" title="Update" onclick="apUpdateObject('+temp_id+',apAfterUpdateProduct,apBeforeUpdateProduct);">'+update_icon+'</button></td>'+
      '</tr>');
      $("#table_body").append(h);

      var product=new faProduct();
      product.id=temp_id;
      fa.product_list.push(product);

      temp_id--;
    }
    function apAfterUpdateProduct(ptr){
      var list=fa.ret_val_list;
      if(list.length>0){
        var ret_val=list[list.length-1];
        if(ret_val.status==="ERROR"){
        }
        else if(ret_val.status==="SUCCESS"){
          fa.updateProductDiscount(ptr.id,ptr.discount_code,"#text_error_message",null);
          $(document).one("ajaxStop",function(){
            getData();
          });
        }
      }
    }
    function apBeforeUpdateProduct(ptr){
      if(ptr.manufacture_id===null||ptr.manufacture_id==='')ptr.manufacture_id=-1;
    }

    /*product_param_part*/
    function apGetProductParamPart(){
      $("#div_object_name").html("<h2>"+getMessage(fa.language,10211)+"</h2>");
      $("#div_form_search").hide();
      $("#div_message").empty();
      $("#text_error_message").empty();
      $("#table_body").empty();$("#table_head").empty();
      if(curr_object_name!=='ProductParamPart'){
        apClearSearch();
        PAGE_SET=0;PAGE_CURR=0;PAGE_COUNT=5;/*five pages in*/
        $("#div_pages").hide();
      }
      curr_object_name='ProductParamPart';
      curr_object_list='fa.product_param_part_list';
      PAGE_ROWS=rows_count;
      fa.offset=PAGE_SET*PAGE_COUNT*PAGE_ROWS+PAGE_CURR*PAGE_ROWS;fa.rows=PAGE_ROWS;
      $("#search").attr("placeholder",getMessage(fa.language,20005));
      var product_param_part=new faProductParam();
      product_param_part.id="%";
      if(search!==null&&search!=='')product_param_part.name="%"+search+"%";
      fa.product_param_part_list.length=0;
      fa.getProductParamPart(product_param_part,fa.language,"#text_error_message",apAfter);
      fa.offset=null;fa.rows=null;
      var product=new faProduct();
      product.id="%";
      fa.product_list.length=0;
      fa.getProduct(product,fa.language,null,null,"#text_error_message",null);
      var product_param=new faProductParam();
      product_param.id="%";
      fa.product_param_list.length=0;
      fa.getProductParam(product_param,fa.language,"#text_error_message",null);
      $(document).one("ajaxStop",function(){
        /*pictures*/
        /*virtual id create*/
        if(fa.product_param_part_list.length>0){
          var j,product_param_part;
          for(j=0;j<fa.product_param_part_list.length;j++){
            product_param_part=fa.product_param_part_list[j];
            /*set virtual id for picture*/
            product_param_part.id=(product_param_part.product_param_id*id_reserved_value)+product_param_part.product_id;
            /*get picture to vitual_id*/
            fa.getProductParamPartPicture(product_param_part,product_param_part.product_id,product_param_part.product_param_id,null,apAfterPicture,product_param_part);
          }
        }
        apShowProductParamPart();
      });
      $("#div_buttons").show();
    }
    function apShowProductParamPart(){
      var h;
      if(fa.product_param_part_list.length>0){
        h=faParsePattern(fa.product_param_part_list,
        '<tr id="%%id%%">'+
        '<td><img id="img_picture_%%id%%" onclick="apPictureClick(%%id%%);" src="'+picture_do_not_disturb+'" class="img-rounded" style="width: 100%; display: inline;" alt="PICTURE"></td>'+
        '<td>%%product_id%%</td>'+
        '<td><select disabled options="fa.product_list" name="product_id" option_selected="%%product_id%%" option_value="id" option_name="obj.name+\' [\'+parseAttrList(obj.attr_list)+\']\'"><option value=""></option></select>'+
        '<td>%%product_param_id%%</td>'+
        '<td><select disabled options="fa.product_param_list" name="product_param_id" option_selected="%%product_param_id%%" option_value="id" option_name="obj.name+\' [\'+parseAttrList(obj.attr_list)+\']\'"><option value=""></option></select>'+
        '<td>%%value%%</td>'+
        '<td>%%price%%</td>'+
        '<td>%%getTimesAgoFrom(toMySQLDatetimeMilisec(obj.last_update),fa.language)%%</td>'+
        '<td><button type="button" class="btn btn-primary btn-lg" title="Remove" onclick="apRemoveProductParamPart(%%product_id%%,%%product_param_id%%,getData);">'+remove_icon+'</button></td>'+
        '<td>&ndash;</td>'+
        '</tr>');
        $("#table_body").html(h);
      }
      h="<tr id='tr_table_header'><th>Picture</th><th>ProductId</th><th>Product</th><th>ParamId</th><th>Product param</th><th>Value</th><th>Price</th><th>Last update</th><th>Remove</th><th>Update</th></tr>";
      $("#table_head").html(h);
      updateTableHeader(fa.language);
    }
    function apAddProductParamPart(){
      var h=faParsePattern(null,
      '<tr id="'+temp_id+'">'+
      '<td>&ndash;</td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="product_id" value=""></td>'+
      '<td><select options="fa.product_list" onchange="apUpdateSelect('+temp_id+',this);" name="product_id" option_selected="" option_value="id" option_name="obj.name+\' [\'+parseAttrList(obj.attr_list)+\']\'"><option value=""></option></select></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="product_param_id" value=""></td>'+
      '<td><select options="fa.product_param_list" onchange="apUpdateSelect('+temp_id+',this);" name="product_param_id" option_selected="" option_value="id" option_name="obj.name+\' [\'+parseAttrList(obj.attr_list)+\']\'"><option value=""></option></select></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="value" value=""></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="price" value=""></td>'+
      '<td>&ndash;</td>'+
      '<td><button type="button" class="btn btn-primary btn-lg" title="Remove" onclick="apRemoveEmptyId('+temp_id+');">'+remove_icon+'</button></td>'+
      '<td><button type="button" class="btn btn-primary btn-lg" title="Update" onclick="apUpdateObject('+temp_id+',getData);">'+update_icon+'</button></td>'+
      '</tr>');
      $("#table_body").append(h);

      var product_param_part=new faProductParamPart();
      product_param_part.id=temp_id;
      fa.product_param_part_list.push(product_param_part);

      temp_id--;
    }
    function apRemoveProductParamPart(product_id,param_id,callback){
      fa.removeProductParamPart(product_id,param_id,"#text_error_message",callback);
    }

    /*product_type_part*/
    function apGetProductTypePart(){
      $("#div_object_name").html("<h2>"+getMessage(fa.language,10212)+"</h2>");
      $("#div_form_search").hide();
      $("#div_message").empty();
      $("#text_error_message").empty();
      $("#table_body").empty();$("#table_head").empty();
      if(curr_object_name!=='ProductTypePart'){
        apClearSearch();
        PAGE_SET=0;PAGE_CURR=0;PAGE_COUNT=5;/*five pages in*/
        $("#div_pages").hide();
      }
      curr_object_name='ProductTypePart';
      curr_object_list='fa.product_type_part_list';
      PAGE_ROWS=rows_count;
      fa.offset=PAGE_SET*PAGE_COUNT*PAGE_ROWS+PAGE_CURR*PAGE_ROWS;fa.rows=PAGE_ROWS;
      $("#search").attr("placeholder",getMessage(fa.language,20005));
      var obj_type=new faObjectTypeExt();
      obj_type.id="%";
      if(search!==null&&search!=='')obj_type.name="%"+search+"%";
      fa.product_type_part_list.length=0;
      fa.getProductTypePart(obj_type,fa.language,"#text_error_message",apAfter);
      fa.offset=null;fa.rows=null;
      var product=new faProduct();
      product.id="%";
      fa.product_list.length=0;
      fa.getProduct(product,fa.language,null,null,"#text_error_message",null);
      obj_type=new faObjectTypeExt();
      obj_type.id="%";
      fa.product_type_list.length=0;
      fa.getProductType(obj_type,fa.language,"#text_error_message",null);
      $(document).one("ajaxStop",function(){
        apShowProductTypePart();
      });
      $("#div_buttons").show();
    }
    function apShowProductTypePart(){
      var h;
      if(fa.product_type_part_list.length>0){
        h=faParsePattern(fa.product_type_part_list,
        '<tr id="%%product_id%%%%product_type_id%%">'+
        '<td>%%product_id%%</td>'+
        '<td><select disabled options="fa.product_list" name="product_id" option_selected="%%product_id%%" option_value="id" option_name="obj.name+\' [\'+parseAttrList(obj.attr_list)+\']\'"><option value=""></option></select>'+
        '<td>%%product_type_id%%</td>'+
        '<td><select disabled options="fa.product_type_list" name="product_type_id" option_selected="%%product_type_id%%" option_value="id" option_name="obj.name+\' [\'+parseAttrList(obj.attr_list)+\']\'"><option value=""></option></select>'+
        '<td>%%getTimesAgoFrom(toMySQLDatetimeMilisec(obj.last_update),fa.language)%%</td>'+
        '<td><button type="button" class="btn btn-primary btn-lg" title="Remove" onclick="apRemoveProductTypePart(%%product_id%%,%%product_type_id%%,getData);">'+remove_icon+'</button></td>'+
        '<td>&ndash;</td>'+
        '</tr>');
        $("#table_body").html(h);
      }
      h="<tr id='tr_table_header'><th>ProductId</th><th>Product</th><th>TypeId</th><th>Product type</th><th>Last update</th><th>Remove</th><th>Update</th></tr>";
      $("#table_head").html(h);
      updateTableHeader(fa.language);
    }
    function apAddProductTypePart(){
      var h=faParsePattern(null,
      '<tr id="'+temp_id+'">'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="product_id" value=""></td>'+
      '<td><select options="fa.product_list" onchange="apUpdateSelect('+temp_id+',this);" name="product_id" option_selected="" option_value="id" option_name="obj.name+\' [\'+parseAttrList(obj.attr_list)+\']\'"><option value=""></option></select></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="product_type_id" value=""></td>'+
      '<td><select options="fa.product_type_list" onchange="apUpdateSelect('+temp_id+',this);" name="product_type_id" option_selected="" option_value="id" option_name="obj.name+\' [\'+parseAttrList(obj.attr_list)+\']\'"><option value=""></option></select></td>'+
      '<td>&ndash;</td>'+
      '<td><button type="button" class="btn btn-primary btn-lg" title="Remove" onclick="apRemoveEmptyId('+temp_id+');">'+remove_icon+'</button></td>'+
      '<td><button type="button" class="btn btn-primary btn-lg" title="Update" onclick="apUpdateProductTypePart('+temp_id+',getData);">'+update_icon+'</button></td>'+
      '</tr>');
      $("#table_body").append(h);

      var product_type_part=new faProductTypePart();
      product_type_part.id=temp_id;
      fa.product_type_part_list.push(product_type_part);

      temp_id--;
    }
    function apRemoveProductTypePart(product_id,type_id,callback){
      fa.removeProductTypePart(product_id,type_id,"#text_error_message",callback);
    }
    function apUpdateProductTypePart(object_id,callback){
      var obj=apFindObjectById(curr_object_list,object_id);
      if(obj){
        fa.addProductTypePart(obj.product_id,obj.product_type_id,"#text_error_message",callback);
      }
    }

    /*purchase*/
    function apGetPurchase(){
      $("#div_object_name").html("<h2>"+getMessage(fa.language,10213)+"</h2>");
      $("#div_form_search").hide();
      $("#div_message").empty();
      $("#text_error_message").empty();
      $("#table_body").empty();$("#table_head").empty();
      if(curr_object_name!=='Purchase'){
        apClearSearch();
        PAGE_SET=0;PAGE_CURR=0;PAGE_COUNT=5;/*five pages in*/
        $("#div_pages").hide();
      }
      curr_object_name='Purchase';
      curr_object_list='fa.purchase_list';
      PAGE_ROWS=rows_count;
      fa.offset=PAGE_SET*PAGE_COUNT*PAGE_ROWS+PAGE_CURR*PAGE_ROWS;fa.rows=PAGE_ROWS;
      $("#search").attr("placeholder",getMessage(fa.language,20050));
      var purchase=new faPurchase();
      purchase.id="%";
      if(search!==null&&search!=='')purchase.invoice_code="%"+search+"%";
      fa.purchase_list.length=0;
      fa.getPurchase(purchase,fa.language,"#text_error_message",apAfter);
      fa.offset=null;fa.rows=null;
      var obj_type=new faObjectType();
      obj_type.id="%";
      fa.delivery_type_list.length=0;
      fa.getDeliveryType(obj_type,fa.language,"#text_error_message",null);
      $(document).one("ajaxStop",function(){
        apShowPurchase();
      });
      $("#div_buttons").show();
    }
    function apShowPurchase(){
      var h;
      if(fa.purchase_list.length>0){
        h=faParsePattern(fa.purchase_list,
        '<tr id="%%id%%"><td>%%id%%</td>'+
        '<td><input type="text" onchange="apUpdateInput(%%id%%,this);" name="user_id" value="%%user_id%%"></td>'+
        '<td><input type="text" onchange="apUpdateInput(%%id%%,this);" name="invoice_code" value="%%invoice_code%%"></td>'+
        '<td><input type="text" onchange="apUpdateDate(%%id%%,this);" name="invoice_date" value="%%fromMySQLDatetimeString(obj.invoice_date)%%"></td>'+
        '<td><input type="text" onchange="apUpdateInput(%%id%%,this);" name="total_price" value="%%total_price%%"></td>'+
        '<td><input type="text" onchange="apUpdateInput(%%id%%,this);" name="total_tax" value="%%total_tax%%"></td>'+
        '<td><input type="text" onchange="apUpdateInput(%%id%%,this);" name="order_id" value="%%order_id%%"></td>'+
        '<td><input type="text" onchange="apUpdateDate(%%id%%,this);" name="order_date" value="%%fromMySQLDatetimeString(obj.order_date)%%"></td>'+
        '<td><input type="text" onchange="apUpdateInput(%%id%%,this);" name="order_info" value="%%order_info%%"></td>'+
        '<td><input type="text" onchange="apUpdateInput(%%id%%,this);" name="delivery_id" value="%%delivery_id%%"></td>'+
        '<td><input type="text" onchange="apUpdateInput(%%id%%,this);" name="delivery_code" value="%%delivery_code%%"></td>'+
        '<td><select options="fa.delivery_type_list" onchange="apUpdateSelect(%%id%%,this);" name="delivery_type_id" option_selected="%%delivery_type_id%%" option_value="id" option_name="obj.name+\' [\'+parseAttrList(obj.attr_list)+\']\'"><option value=""></option></select></td>'+
        '<td><input type="text" onchange="apUpdateDate(%%id%%,this);" name="delivery_date" value="%%fromMySQLDatetimeString(obj.delivery_date)%%"></td>'+
        '<td><input type="text" onchange="apUpdateInput(%%id%%,this);" name="delivery_price" value="%%delivery_price%%"></td>'+
        '<td><input type="text" onchange="apUpdateDate(%%id%%,this);" name="payment_date" value="%%fromMySQLDatetimeString(obj.payment_date)%%"></td>'+
        '<td><input type="text" onchange="apUpdateInput(%%id%%,this);" name="payment_info" value="%%payment_info%%"></td>'+
        '<td><input type="text" onchange="apUpdateInput(%%id%%,this);" name="payment_amount" value="%%payment_amount%%"></td>'+
        '<td>%%fromMySQLDatetimeString(obj.create_date)%%</td>'+
        '<td>%%getTimesAgoFrom(toMySQLDatetimeMilisec(obj.last_update),fa.language)%%</td>'+
        '<td><button type="button" class="btn btn-primary btn-lg" title="Remove" onclick="apRemoveObject(%%id%%,\'purchase\',getData);">'+remove_icon+'</button></td>'+
        '<td><button type="button" class="btn btn-primary btn-lg" title="Update" onclick="apUpdateObject(%%id%%,getData,apBeforeUpdatePurchase);">'+update_icon+'</button></td>'+
        '</tr>');
        $("#table_body").html(h);
      }
      h="<tr id='tr_table_header'><th>Id</th><th>UserId</th><th>Invoice code</th><th>Invoice date</th><th>Total price</th><th>Total tax</th><th>OrderId</th><th>Order date</th><th>Order info</th><th>DeliveryId</th><th>Delivery code</th><th>Delivery type</th><th>Delivery date</th><th>Delivery price</th><th>Payment date</th><th>Payment info</th><th>Payment amount</th><th>Create date</th><th>Last update</th><th>Remove</th><th>Update</th></tr>";
      $("#table_head").html(h);
      updateTableHeader(fa.language);
    }
    function apAddPurchase(){
      var h=faParsePattern(null,
      '<tr id="'+temp_id+'"><td>&ndash;</td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="user_id" value=""></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="invoice_code" value=""></td>'+
      '<td><input type="text" onchange="apUpdateDate('+temp_id+',this);" name="invoice_date" value="" title="'+getCurrentDatetime()+'"></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="total_price" value=""></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="total_tax" value=""></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="order_id" value=""></td>'+
      '<td><input type="text" onchange="apUpdateDate('+temp_id+',this);" name="order_date" value="" title="'+getCurrentDatetime()+'"></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="order_info" value=""></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="delivery_id" value=""></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="delivery_code" value=""></td>'+
      '<td><select options="fa.delivery_type_list" onchange="apUpdateSelect('+temp_id+',this);" name="delivery_type_id" option_selected="" option_value="id" option_name="obj.name+\' [\'+parseAttrList(obj.attr_list)+\']\'"><option value=""></option></select></td>'+
      '<td><input type="text" onchange="apUpdateDate('+temp_id+',this);" name="delivery_date" value="" title="'+getCurrentDatetime()+'"></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="delivery_price" value=""></td>'+
      '<td><input type="text" onchange="apUpdateDate('+temp_id+',this);" name="payment_date" value="" '+getCurrentDatetime()+'></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="payment_info" value=""></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="payment_amount" value=""></td>'+
      '<td>&ndash;</td>'+
      '<td>&ndash;</td>'+
      '<td><button type="button" class="btn btn-primary btn-lg" title="Remove" onclick="apRemoveEmptyId('+temp_id+');">'+remove_icon+'</button></td>'+
      '<td><button type="button" class="btn btn-primary btn-lg" title="Update" onclick="apUpdateObject('+temp_id+',getData,apBeforeUpdatePurchase);">'+update_icon+'</button></td>'+
      '</tr>');
      $("#table_body").append(h);

      var purchase=new faPurchase();
      purchase.id=temp_id;
      fa.purchase_list.push(purchase);

      temp_id--;
    }
    function apBeforeUpdatePurchase(ptr){
      if(ptr.user_id===null||ptr.user_id==='')ptr.user_id=-1;
      if(ptr.order_id===null||ptr.order_id==='')ptr.order_id=-1;
      if(ptr.delivery_id===null||ptr.delivery_id==='')ptr.delivery_id=-1;
      if(ptr.delivery_type_id===null||ptr.delivery_type_id==='')ptr.delivery_type_id=-1;

      toMySQLDatetimeString(ptr.invoice_date);
      toMySQLDatetimeString(ptr.order_date);
      toMySQLDatetimeString(ptr.delivery_date);
      toMySQLDatetimeString(ptr.payment_date);
    }

    /*payment*/
    function apGetPayment(){
      $("#div_object_name").html("<h2>"+getMessage(fa.language,10214)+"</h2>");
      $("#div_form_search").hide();
      $("#div_message").empty();
      $("#text_error_message").empty();
      $("#table_body").empty();$("#table_head").empty();
      if(curr_object_name!=='Payment'){
        apClearSearch();
        PAGE_SET=0;PAGE_CURR=0;PAGE_COUNT=5;/*five pages in*/
        $("#div_pages").hide();
      }
      curr_object_name='Payment';
      curr_object_list='fa.payment_list';
      PAGE_ROWS=rows_count;
      fa.offset=PAGE_SET*PAGE_COUNT*PAGE_ROWS+PAGE_CURR*PAGE_ROWS;fa.rows=PAGE_ROWS;
      $("#search").attr("placeholder",getMessage(fa.language,20100));
      var payment=new faPayment();
      payment.purchase_id="%";
      if(search!==null&&search!=='')payment.purchase_id=search;
      fa.payment_list.length=0;
      fa.getPayment(payment,"#text_error_message",apAfter);
      $(document).one("ajaxStop",function(){
        apShowPayment();
      });
      $("#div_buttons").show();
    }
    function apShowPayment(){
      var h;
      if(fa.payment_list.length>0){
        h=faParsePattern(fa.payment_list,
        '<tr id="%%purchase_id%%"><td>%%purchase_id%%</td>'+
        '<td>%%amount%%</td>'+
        '<td>%%currency%%</td>'+
        '<td>%%description%%</td>'+
        '<td>%%status%%</td>'+
        '<td>%%transaction_id%%</td>'+
        '<td>%%phone%%</td>'+
        '<td>%%fromMySQLDatetimeString(obj.create_date)%%</td>'+
        '<td>%%getTimesAgoFrom(toMySQLDatetimeMilisec(obj.last_update),fa.language)%%</td>'+
        '<td><button type="button" class="btn btn-primary btn-lg" title="Remove" onclick="apRemoveObject(%%purchase_id%%,\'payment\',getData);">'+remove_icon+'</button></td>'+
        '<td>&ndash;</td>'+
        '</tr>');
        $("#table_body").html(h);
      }
      h="<tr id='tr_table_header'><th>PurchaseId</th><th>Amount</th><th>Currency</th><th>Description</th><th>Status</th><th>Transaction id</th><th>Phone</th><th>Create date</th><th>Last update</th><th>Remove</th><th>Update</th></tr>";
      $("#table_head").html(h);
      updateTableHeader(fa.language);
    }
    function apAddPayment(){
      var h=faParsePattern(null,
      '<tr id="'+temp_id+'">'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="purchase_id" value=""></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="amount" value=""></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="currency" value=""></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="description" value=""></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="status" value=""></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="transaction_id" value=""></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="phone" value=""></td>'+
      '<td>&ndash;</td>'+
      '<td>&ndash;</td>'+
      '<td><button type="button" class="btn btn-primary btn-lg" title="Remove" onclick="apRemoveEmptyId('+temp_id+');">'+remove_icon+'</button></td>'+
      '<td><button type="button" class="btn btn-primary btn-lg" title="Update" onclick="apUpdateObject('+temp_id+',getData,apBeforeUpdatePayment);">'+update_icon+'</button></td>'+
      '</tr>');
      $("#table_body").append(h);

      var payment=new faPayment();
      payment.id=temp_id;
      fa.payment_list.push(payment);

      temp_id--;
    }
    function apBeforeUpdatePayment(ptr){
      if(ptr.purchase_id===null||ptr.purchase_id==='')ptr.purchase_id=-1;
    }

    /*prepaid_card*/
    function apGetPrepaidCard(){
      $("#div_object_name").html("<h2>"+getMessage(fa.language,10215)+"</h2>");
      $("#div_form_search").hide();
      $("#div_message").empty();
      $("#text_error_message").empty();
      $("#table_body").empty();$("#table_head").empty();
      if(curr_object_name!=='PrepaidCard'){
        apClearSearch();
        PAGE_SET=0;PAGE_CURR=0;PAGE_COUNT=5;/*five pages in*/
        $("#div_pages").hide();
      }
      curr_object_name='PrepaidCard';
      curr_object_list='fa.prepaid_card_list';
      PAGE_ROWS=rows_count;
      fa.offset=PAGE_SET*PAGE_COUNT*PAGE_ROWS+PAGE_CURR*PAGE_ROWS;fa.rows=PAGE_ROWS;
      $("#search").attr("placeholder",getMessage(fa.language,20028));
      var prepaid_card=new faPrepaidCard();
      prepaid_card.id="%";
      if(search!==null&&search!=='')prepaid_card.serial_number="%"+search+"%";
      fa.prepaid_card_list.length=0;
      fa.getPrepaidCard(prepaid_card,"#text_error_message",apAfter);
      $(document).one("ajaxStop",function(){
        apShowPrepaidCard();
      });
      $("#div_buttons").show();
    }
    function apShowPrepaidCard(){
      var h;
      if(fa.prepaid_card_list.length>0){
        h=faParsePattern(fa.prepaid_card_list,
        '<tr id="%%id%%"><td>%%id%%</td>'+
        '<td><input type="text" onchange="apUpdateInput(%%id%%,this);" name="serial_number" value="%%serial_number%%"></td>'+
        '<td><input type="text" onchange="apUpdateInput(%%id%%,this);" name="prepaid_code" value="%%prepaid_code%%"></td>'+
        '<td><input type="text" onchange="apUpdateInput(%%id%%,this);" name="amount" value="%%amount%%"></td>'+
        '<td><div class="form-group"><div class="checkbox"><input type="checkbox" onchange="apUpdateCheckbox(%%id%%,this);" %%apChecked(obj.active)%% name="active" value="%%active%%" id="input_activity_%%id%%"><label id="label_activity" for="input_activity_%%id%%"><span></span></label></div></div></td>'+
        '<td>%%fromMySQLDatetimeString(obj.create_date)%%</td>'+
        '<td><button type="button" class="btn btn-primary btn-lg" title="Remove" onclick="apRemoveObject(%%id%%,\'prepaid_card\',getData);">'+remove_icon+'</button></td>'+
        '<td><button type="button" class="btn btn-primary btn-lg" title="Update" onclick="apUpdatePrepaidCardActivity(%%id%%,getData);">'+update_icon+'</button></td>'+
        '</tr>');
        $("#table_body").html(h);
      }
      h="<tr id='tr_table_header'><th>Id</th><th>Serial number</th><th>Prepaid code</th><th>Amount</th><th>Activity</th><th>Create date</th><th>Remove</th><th>Update</th></tr>";
      $("#table_head").html(h);
      updateTableHeader(fa.language);
    }
    function apAddPrepaidCard(){
      var h=faParsePattern(null,
      '<tr id="'+temp_id+'"><td>&ndash;</td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="serial_number" value=""></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="prepaid_code" value=""></td>'+
      '<td><input type="text" onchange="apUpdateInput('+temp_id+',this);" name="amount" value=""></td>'+
      '<td><div class="form-group"><div class="checkbox"><input type="checkbox" onchange="apUpdateCheckbox('+temp_id+',this);" name="active" value="" id="input_activity_'+temp_id+'"><label id="label_activity" for="input_activity_'+temp_id+'"><span></span></label></div></div></td>'+
      '<td>&ndash;</td>'+
      '<td><button type="button" class="btn btn-primary btn-lg" title="Remove" onclick="apRemoveEmptyId('+temp_id+');">'+remove_icon+'</button></td>'+
      '<td><button type="button" class="btn btn-primary btn-lg" title="Update" onclick="apUpdateObject('+temp_id+',apAfterUpdatePrepaidCard);">'+update_icon+'</button></td>'+
      '</tr>');
      $("#table_body").append(h);

      var prepaid_card=new faPrepaidCard();
      prepaid_card.id=temp_id;
      fa.prepaid_card_list.push(prepaid_card);

      temp_id--;
    }
    function apAfterUpdatePrepaidCard(ptr){
      var list=fa.ret_val_list;
      if(list.length>0){
        var ret_val=list[list.length-1];
        if(ret_val.status==="ERROR"){
        }
        else if(ret_val.status==="SUCCESS"){
          if(ptr.id===null||parseInt(ptr.id)<temp_value){/*replace id*/
            ptr.id=ret_val.value;
          }
          if(ptr.active===null)ptr.active=0;
          fa.updatePrepaidCardActivity(ptr.id,ptr.active,"#text_error_message",null);
          $(document).one("ajaxStop",function(){
            getData();
          });
        }
      }
    }
    function apUpdatePrepaidCardActivity(object_id,callback){
      var obj=apFindObjectById(curr_object_list,object_id);
      if(obj){
        fa.updatePrepaidCardActivity(obj.id,obj.active,"#text_error_message",callback);
      }
    }

    /*next wishes*/

/*
DATE'<td><input type="text" onchange="apUpdateInput(%%id%%,this);" name="start_date" value="%%obj.start_date?fromMySQLDatetimeString(obj.start_date):\'\'%%"></td>'+
NAME'<td><input type="text" onchange="apUpdateInput(%%id%%,this);" name="name" value="%%name%%"></td>'+
LIST'<td><select options="fa.language_list" onchange="apUpdateSelect(%%id%%,this);" name="language" option_selected="%%language%%" option_value="value" option_name="value"><option value=""></option></select></td>'+
    '<td><select options="fa.store_list" onchange="apUpdateSelect(%%id%%,this);" name="store_id" option_selected="%%store_id%%" option_value="id" option_name="obj.name+\' [\'+parseAttrList(obj.attr_list)+\']\'"><option value=""></option></select></td>'+
CHACKBOX'<td><div class="form-group"><div class="checkbox"><input type="checkbox" onchange="apUpdateCheckbox(%%id%%,this);" %%apChecked(obj.active)%% name="active" value="%%active%%" id="input_activity_%%id%%"><label id="label_activity" for="input_activity_%%id%%"><span></span></label></div></div></td>'+
CREATE_DATE'<td>%%fromMySQLDatetimeString(obj.create_date)%%</td>'+
LAST_UPDATE'<td>%%getTimesAgoFrom(toMySQLDatetimeMilisec(obj.last_update),fa.language)%%</td>'+
*/

////////////////////////////////////////////////////////////////////////////////

    /*MULTI LANGUAGE*/
    function updateContentLanguage(language){
      var text_need_to_register=document.getElementById('text_need_to_register');
      var text_user_deactivated=document.getElementById('text_user_deactivated');
      var text_insufficient_privileges=document.getElementById('text_insufficient_privileges');

      var text_name=document.getElementById('text_name');
      var search=document.getElementById('search');

      var menu_users_and_features=document.getElementById('menu_users_and_features');
      var a_audit=document.getElementById('a_audit');
      var a_settings=document.getElementById('a_settings');
      var a_project=document.getElementById('a_project');
      var a_user=document.getElementById('a_user');
      var a_transport=document.getElementById('a_transport');
      var a_transport_type_part=document.getElementById('a_transport_type_part');
      var a_sensor=document.getElementById('a_sensor');
      var a_discount=document.getElementById('a_discount');
      var a_tax=document.getElementById('a_tax');
      var a_message=document.getElementById('a_message');
      var a_user_review=document.getElementById('a_user_review');
      var a_product_review=document.getElementById('a_product_review');
      var a_transport_review=document.getElementById('a_transport_review');
      var a_track=document.getElementById('a_track');
      var a_track_part=document.getElementById('a_track_part');
      var a_sensor_circle=document.getElementById('a_sensor_circle');
      var a_sensor_group=document.getElementById('a_sensor_group');
      var a_sensor_place=document.getElementById('a_sensor_place');

      var menu_types_and_attr=document.getElementById('menu_types_and_attr');
      var a_attr=document.getElementById('a_attr');
      var a_attr_part=document.getElementById('a_attr_part');
      var a_color=document.getElementById('a_color');
      var a_currency=document.getElementById('a_currency');
      var a_language=document.getElementById('a_language');
      var a_delivery_type=document.getElementById('a_delivery_type');
      var a_track_type=document.getElementById('a_track_type');
      var a_order_status=document.getElementById('a_order_status');
      var a_pickup_status=document.getElementById('a_pickup_status');
      var a_product_param=document.getElementById('a_product_param');
      var a_product_type=document.getElementById('a_product_type');
      var a_transport_type=document.getElementById('a_transport_type');

      var menu_trade_and_services=document.getElementById('menu_trade_and_services');
      var a_stock=document.getElementById('a_stock');
      var a_stock_invoice=document.getElementById('a_stock_invoice');
      var a_stock_invoice_part=document.getElementById('a_stock_invoice_part');
      var a_store=document.getElementById('a_store');
      var a_store_part=document.getElementById('a_store_part');
      var a_job=document.getElementById('a_job');
      var a_order=document.getElementById('a_order');
      /*var a_order_part=document.getElementById('a_order_part');*/
      var a_order_product_part=document.getElementById('a_order_product_part');
      var a_order_user_part=document.getElementById('a_order_user_part');
      var a_manufacture=document.getElementById('a_manufacture');
      var a_product=document.getElementById('a_product');
      var a_product_param_part=document.getElementById('a_product_param_part');
      var a_product_type_part=document.getElementById('a_product_type_part');
      var a_purchase=document.getElementById('a_purchase');
      var a_payment=document.getElementById('a_payment');
      var a_prepaid_card=document.getElementById('a_prepaid_card');

      /*captions*/
      text_need_to_register.innerHTML=getMessage(language,1401);
      text_user_deactivated.innerHTML=getMessage(language,1402);
      text_insufficient_privileges.innerHTML=getMessage(language,1403);

      text_name.innerHTML=getMessage(language,10000);
      search.placeholder=getMessage(language,9000);

      menu_users_and_features.innerHTML='<i class="fa fa-users fa-fw"></i>'+getMessage(language,10001);
      a_audit.innerHTML=getMessage(language,10302);
      a_settings.innerHTML=getMessage(language,10303);
      a_project.innerHTML=getMessage(language,10304);
      a_user.innerHTML=getMessage(language,10002);
      a_transport.innerHTML=getMessage(language,10003);
      a_transport_type_part.innerHTML=getMessage(language,10004);
      a_sensor.innerHTML=getMessage(language,10005);
      a_discount.innerHTML=getMessage(language,10006);
      a_tax.innerHTML=getMessage(language,10007);
      a_message.innerHTML=getMessage(language,10008);
      a_user_review.innerHTML=getMessage(language,10016);
      a_product_review.innerHTML=getMessage(language,10009);
      a_transport_review.innerHTML=getMessage(language,10010);
      a_track.innerHTML=getMessage(language,10011);
      a_track_part.innerHTML=getMessage(language,10012);
      a_sensor_circle.innerHTML=getMessage(language,10013);
      a_sensor_group.innerHTML=getMessage(language,10014);
      a_sensor_place.innerHTML=getMessage(language,10015);

      menu_types_and_attr.innerHTML='<i class="fa fa-barcode fa-fw"></i>'+getMessage(language,10101);
      a_attr.innerHTML=getMessage(language,10102);
      a_attr_part.innerHTML=getMessage(language,10103);
      a_color.innerHTML=getMessage(language,10104);
      a_currency.innerHTML=getMessage(language,10105);
      a_language.innerHTML=getMessage(language,10106);
      a_delivery_type.innerHTML=getMessage(language,10107);
      a_track_type.innerHTML=getMessage(language,10108);
      a_order_status.innerHTML=getMessage(language,10109);
      a_pickup_status.innerHTML=getMessage(language,10113);
      a_product_param.innerHTML=getMessage(language,10110);
      a_product_type.innerHTML=getMessage(language,10111);
      a_transport_type.innerHTML=getMessage(language,10112);

      menu_trade_and_services.innerHTML='<i class="fa fa-cart-plus fa-fw"></i>'+getMessage(language,10201);
      a_stock.innerHTML=getMessage(language,10202);
      a_stock_invoice.innerHTML=getMessage(language,10203);
      a_stock_invoice_part.innerHTML=getMessage(language,10204);
      a_store.innerHTML=getMessage(language,10205);
      a_store_part.innerHTML=getMessage(language,10206);
      a_job.innerHTML=getMessage(language,10218);
      a_order.innerHTML=getMessage(language,10207);
      /*a_order_part.innerHTML=getMessage(language,10208);*/
      a_order_product_part.innerHTML=getMessage(language,10216);
      a_order_user_part.innerHTML=getMessage(language,10217);
      a_manufacture.innerHTML=getMessage(language,10209);
      a_product.innerHTML=getMessage(language,10210);
      a_product_param_part.innerHTML=getMessage(language,10211);
      a_product_type_part.innerHTML=getMessage(language,10212);
      a_purchase.innerHTML=getMessage(language,10213);
      a_payment.innerHTML=getMessage(language,10214);
      a_prepaid_card.innerHTML=getMessage(language,10215);
    }
    function updateTableHeader(language){
      $("#tr_table_header").find("th").each(function(){
        var name=getTranslateName(language,$(this).html());
        $(this).html(name);
      });
    }
    function updateTableBodyForStat(language){
      $("#table_body").find("td").each(function(){
        var text=$(this).html();
        var index=text.indexOf(":");
        if(index!==-1){
          var for_translate=text.substring(0,index);
          var value=text.substring(index+1);
          var name=getTranslateStatName(language,for_translate);
          var currency="";
          if(for_translate==="Orders total price"||for_translate==="Purchase amount"||for_translate==="Payment amount"||for_translate==="Driver orders total price")
            currency="&nbsp;<small>"+currency_title+"</small>";
          $(this).html(name+"<h2>&nbsp;"+value+currency+"</h2>");
        }
      });
    }

    updateContentLanguage(fa.language);
    apGetStat();
    $(document).ajaxStart(function(){$("#div_loading").show();}).ajaxStop(function(){$("#div_loading").hide();});

  </script>